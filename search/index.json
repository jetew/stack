[{"content":"å‰è¨€ åœ¨ä¹‹å‰çš„æ–‡ç«  ã€ŠWaline æœåŠ¡ç«¯ç‹¬ç«‹éƒ¨ç½²æ–¹æ¡ˆã€‹ ä¸­æœ‰è®²åˆ°è¿‡è¿›è¡Œæºç ç¼–è¯‘å®‰è£… Node ï¼Œä½†åªæ˜¯å¸¦è¿‡ä¸€ä¸‹ã€‚å…¶å®æˆ‘åœ¨ä½¿ç”¨ Debian æ—¶ç›´æ¥è¿›è¡Œç¼–è¯‘å®‰è£…æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯åœ¨ CentOS7 ä¸‹ï¼Œé‡åˆ°è®¸å¤šé—®é¢˜ï¼›äºæ˜¯ä¾¿åœ¨æ­¤è®°å½•ä¸€ä¸‹æ–¹ä¾¿æ—¥åè¿›è¡ŒæŸ¥é˜…ã€‚\nå®‰è£…æ­¥éª¤ å‡†å¤‡å·¥ä½œ è½¯ä»¶ä¾èµ– gcc g++ â‰¥ 10.1 GNU Make â‰¥ 3.81 Python å®‰è£…ä¾èµ– yum install -y python3 make python3-pip gcc å’Œ gcc-c++ ç”±äº yum æºç‰ˆæœ¬è¿‡ä½ï¼Œéœ€è¦å¦å¤–è¿›è¡Œç¼–è¯‘å®‰è£…ï¼Œå‚è€ƒ ã€ŠCentOS 7 ç¼–è¯‘å®‰è£… gccã€‹ ä¸‹è½½æºç  ä» Nodejså®˜ç½‘ ä¸‹è½½æºç å¹¶è¿›è¡Œè§£å‹\ncd /usr/local/src wget https://nodejs.org/dist/v20.11.1/node-v20.11.1.tar.gz tar zxvf node-v20.11.1.tar.gz ç¼–è¯‘å®‰è£… cd node-v20.11.1 ./configure --prefix=/usr/local/node # è¾“å‡º â€¦â€¦ INFO: configure completed successfully # åˆ›å»ºçª—å£ï¼Œé˜²æ­¢ç½‘ç»œé—®é¢˜æ–­å¼€ç»ˆç«¯å¯¼è‡´å®‰è£…ä¸­æ­¢ screen -S node make make install è¿™é‡Œå¯ä»¥é€šè¿‡ make -j è®¾ç½®çº¿ç¨‹æ•°æ¥æå‡ç¼–è¯‘é€Ÿåº¦ï¼Œå¦‚æœä¸æ¸…æ¥šè¯¥è®¾ç½®å¤šå°‘ï¼Œå¯ä»¥é€šè¿‡ make -j$(nproc) è‡ªåŠ¨è®¡ç®—çº¿ç¨‹æ•°ï¼š\nmake -j$(nproc) make install ä¸ºè½¯ä»¶è®¾ç½®ç¯å¢ƒå˜é‡ï¼š\nvim ~/.bashrc åœ¨æœ€åæ·»åŠ ï¼š\nexport PATH=/usr/local/node/bin:$PATH export CPATH=/usr/local/node/include:$CPATH export LD_LIBRARY_PATH=/usr/local/node/lib:$LD_LIBRARY_PATH åˆ·æ–°å˜é‡ç¯å¢ƒï¼š\nsource ~/.bashrc å®Œæˆåå¯é€šè¿‡ node -v ã€ npm version ã€ npx -v è¿›è¡ŒéªŒè¯ï¼Œè¿”å›ç‰ˆæœ¬å·åˆ™è¡¨ç¤ºæˆåŠŸã€‚\nå¯èƒ½å‡ºç°çš„é—®é¢˜ å®‰è£…è¿‡ç¨‹ä¸­å¯èƒ½ä¼šå‡ºç° â€¦â€¦ : Error: no such instruction: â€¦â€¦ è‹¥é‡åˆ°æ­¤é—®é¢˜åˆ™éœ€è¦é€šè¿‡ç¼–è¯‘å®‰è£…æ–°ç‰ˆ binutils\nç¼–è¯‘å®‰è£… binutils å¯é€šè¿‡ GNUå®˜æ–¹é•œåƒ ä¸‹è½½æ–°ç‰ˆæºç ï¼Œå›½å†…æœåŠ¡å™¨å¯ä½¿ç”¨ æ¸…åå¤§å­¦é•œåƒ cd /usr/local/src # å›½å†…æœåŠ¡å™¨å¯æ›´æ¢ä¸ºæ¸…åå¤§å­¦é•œåƒä¸‹è½½åœ°å€ wget https://ftp.gnu.org/gnu/binutils/binutils-2.42.tar.gz tar zxvf binutils-2.42.tar.gz cd binutils-2.42 ./configure --prefix=/usr/local/binutils # è¾“å‡º â€¦â€¦â€¦â€¦ â€¦â€¦â€¦â€¦ configure: creating ./config.status config.status: creating Makefile make make install å¸è½½æ—§ç‰ˆæœ¬ï¼š\nyum remove -y binutils è®¾ç½®ç¯å¢ƒå˜é‡ï¼š\nvim ~/.bashrc åœ¨æœ€åæ·»åŠ ï¼š\nexport PATH=/usr/local/binutils/bin:$PATH export CPATH=/usr/local/binutils/include:$CPATH export LD_LIBRARY_PATH=/usr/local/binutils/lib:$LD_LIBRARY_PATH åˆ·æ–°å˜é‡ç¯å¢ƒï¼š\nsource ~/.bashrc æœ€åç¼–è¾‘ /etc/yum.conf ä¸º node å’Œ binutils æ·»åŠ å¿½ç•¥ï¼š\nvim /etc/yum.conf åœ¨æœ«å°¾æ·»åŠ ä¸Šï¼š\nexclude=node*,binutils* å‚è€ƒèµ„æ–™ Building Node.js from source on supported platforms guide to porting the binutils ","date":"2024-02-27T23:37:17+08:00","permalink":"/archives/make_node/","title":"CentOS7 ç¼–è¯‘å®‰è£… Node"},{"content":"å‰è¨€ Cloudreve å¯ä»¥è®©æ‚¨å¿«é€Ÿæ­å»ºèµ·å…¬ç§å…¼å¤‡çš„ç½‘ç›˜ç³»ç»Ÿã€‚Cloudreve åœ¨åº•å±‚æ”¯æŒä¸åŒçš„äº‘å­˜å‚¨å¹³å°ï¼Œç”¨æˆ·åœ¨å®é™…ä½¿ç”¨æ—¶æ— é¡»å…³å¿ƒç‰©ç†å­˜å‚¨æ–¹å¼ã€‚ä½ å¯ä»¥ä½¿ç”¨ Cloudreve æ­å»ºä¸ªäººç”¨ç½‘ç›˜ã€æ–‡ä»¶åˆ†äº«ç³»ç»Ÿï¼Œäº¦æˆ–æ˜¯é’ˆå¯¹å¤§å°å›¢ä½“çš„å…¬æœ‰äº‘ç³»ç»Ÿã€‚\nå®‰è£…é…ç½® è·å– Cloudreve é¡¹ç›®åœ°å€ï¼šGithub é¡¹ç›®åœ°å€ ä½ å¯ä»¥åœ¨ GitHub Release é¡µé¢è·å–å·²ç»æ„å»ºæ‰“åŒ…å®Œæˆçš„ä¸»ç¨‹åºã€‚å…¶ä¸­æ¯ä¸ªç‰ˆæœ¬éƒ½æä¾›äº†å¸¸è§ç³»ç»Ÿæ¶æ„ä¸‹å¯ç”¨çš„ä¸»ç¨‹åºï¼Œå‘½åè§„åˆ™ä¸ºcloudreve_ç‰ˆæœ¬å·_æ“ä½œç³»ç»Ÿ_CPUæ¶æ„.tar.gz ã€‚æ¯”å¦‚ï¼Œæ™®é€š 64 ä½ Linux ç³»ç»Ÿä¸Šéƒ¨ç½² 3.0.0 ç‰ˆæœ¬ï¼Œåˆ™åº”è¯¥ä¸‹è½½cloudreve_3.0.0_linux_amd64.tar.gzã€‚\nå®‰è£…å¯åŠ¨ é€šè¿‡ä¸Šä¸€æ­¥è·å– Cloudreve ä¸‹è½½åœ°å€åï¼Œå³å¯ä¸‹è½½è‡³æœ¬åœ°å¹¶å¯åŠ¨(æˆ‘è¿™é‡Œæœ€æ–°ç‰ˆæœ¬æ˜¯3.6.2)ï¼š\n#åˆ›å»ºæ–‡ä»¶å¤¹ mkdir -p /opt/cloudreve #ä¸‹è½½ç¨‹åº wget https://github.com/cloudreve/Cloudreve/releases/download/3.6.2/cloudreve_3.6.2_linux_amd64.tar.gz #è§£å‹ç¨‹åº tar zxvf cloudreve_3.6.2_linux_amd64.tar.gz #èµ‹äºˆæ‰§è¡Œæƒé™ chmod +x ./cloudreve #å¯åŠ¨ Cloudreve ./cloudreve Cloudreve åœ¨é¦–æ¬¡å¯åŠ¨æ—¶ï¼Œä¼šåˆ›å»ºåˆå§‹ç®¡ç†å‘˜è´¦å·ï¼Œè¯·æ³¨æ„ä¿ç®¡ç®¡ç†å‘˜å¯†ç ï¼Œæ­¤å¯†ç åªä¼šåœ¨é¦–æ¬¡å¯åŠ¨æ—¶å‡ºç°ã€‚å¦‚æœæ‚¨å¿˜è®°åˆå§‹ç®¡ç†å‘˜å¯†ç ï¼Œéœ€è¦åˆ é™¤åŒçº§ç›®å½•ä¸‹çš„ cloudreve.dbï¼Œé‡æ–°å¯åŠ¨ä¸»ç¨‹åºä»¥åˆå§‹åŒ–æ–°çš„ç®¡ç†å‘˜è´¦æˆ·ã€‚\nCloudreve é»˜è®¤ä¼šç›‘å¬ 5212 ç«¯å£ã€‚ä½ å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è®¿é—® http://IP:5212 è¿›å…¥ Cloudreveã€‚\nä»¥ä¸Šæ­¥éª¤æ“ä½œå®Œåï¼Œæœ€ç®€å•çš„éƒ¨ç½²å°±å®Œæˆäº†ã€‚ä½ å¯èƒ½éœ€è¦ä¸€äº›æ›´ä¸ºå…·ä½“çš„é…ç½®ï¼Œæ‰èƒ½è®© Cloudreve æ›´å¥½çš„å·¥ä½œï¼Œå…·ä½“æµç¨‹è¯·å‚è€ƒä¸‹é¢çš„é…ç½®æµç¨‹ã€‚\nåå‘ä»£ç† åœ¨è‡ªç”¨æˆ–è€…å°è§„æ¨¡ä½¿ç”¨çš„åœºæ™¯ä¸‹ï¼Œä½ å®Œå…¨å¯ä»¥ä½¿ç”¨ Cloudreve å†…ç½®çš„ Web æœåŠ¡å™¨ã€‚ä½†æ˜¯å¦‚æœä½ éœ€è¦ä½¿ç”¨ HTTPSï¼Œäº¦æˆ–æ˜¯éœ€è¦ä¸æœåŠ¡å™¨ä¸Šå…¶ä»– Web æœåŠ¡å…±å­˜æ—¶ï¼Œä½ å¯èƒ½éœ€è¦ä½¿ç”¨ä¸»æµ Web æœåŠ¡å™¨åå‘ä»£ç† Cloudreve ï¼Œä»¥è·å¾—æ›´ä¸°å¯Œçš„æ‰©å±•åŠŸèƒ½ã€‚\nä½ éœ€è¦åœ¨ Web æœåŠ¡å™¨ä¸­æ–°å»ºä¸€ä¸ªè™šæ‹Ÿä¸»æœºï¼Œå®Œæˆæ‰€éœ€çš„å„é¡¹é…ç½®ï¼ˆå¦‚å¯ç”¨ HTTPSï¼‰ï¼Œç„¶ååœ¨ç½‘ç«™é…ç½®æ–‡ä»¶ä¸­åŠ å…¥åä»£è§„åˆ™ï¼š\nNginx é…ç½® åœ¨ç½‘ç«™çš„ server å­—æ®µä¸­åŠ å…¥ï¼š\nlocation / { proxy_pass http://127.0.0.1:5212; proxy_set_header Host $http_host; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-Proto $scheme; proxy_set_header X-NginX-Proxy true; proxy_redirect off; # å¦‚æœæ‚¨è¦ä½¿ç”¨æœ¬åœ°å­˜å‚¨ç­–ç•¥ï¼Œè¯·å°†ä¸‹ä¸€è¡Œæ³¨é‡Šç¬¦åˆ é™¤ï¼Œå¹¶æ›´æ”¹å¤§å°ä¸ºç†è®ºæœ€å¤§æ–‡ä»¶å°ºå¯¸ # client_max_body_size 20000m; } Apache é…ç½® åœ¨ VirtualHost å­—æ®µä¸‹åŠ å…¥åä»£é…ç½®é¡¹ ProxyPassï¼Œæ¯”å¦‚ï¼š\n\u0026lt;VirtualHost *:80\u0026gt; ServerName myapp.example.com ServerAdmin webmaster@example.com DocumentRoot /www/myapp/public # ä»¥ä¸‹ä¸ºå…³é”®éƒ¨åˆ† AllowEncodedSlashes NoDecode ProxyPass \u0026#34;/\u0026#34; \u0026#34;http://127.0.0.1:5212/\u0026#34; nocanon \u0026lt;/VirtualHost\u0026gt; Caddy é…ç½® åœ¨ç½‘ç«™é…ç½®ä¸­åŠ å…¥ï¼š\ndomain.com { reverse_proxy 127.0.0.1:5212 { header_up Host {host} header_up X-Real-IP {remote} header_up X-Forwarded-For {remote} header_up X-Forwarded-Proto https } } åå°è¿è¡Œ è¿™é‡Œä¾æ—§ä½¿ç”¨ Systemd å¤§æ³•ï¼š\nåˆ›å»ºç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š\nvim /usr/lib/systemd/system/cloudreve.service å°†ä¸‹é¢çš„ PATH_TO_CLOUDREVE æ¢æˆç¨‹åºæ‰€åœ¨ç›®å½•ï¼š\n[Unit] Description=Cloudreve After=network.target After=mysqld.service Wants=network.target [Service] WorkingDirectory=/PATH_TO_CLOUDREVE ExecStart=/PATH_TO_CLOUDREVE/cloudreve Restart=on-abnormal RestartSec=5s KillMode=mixed StandardOutput=null StandardError=syslog [Install] WantedBy=multi-user.target ç®¡ç†å‘½ä»¤ï¼š\n# æ›´æ–°é…ç½® systemctl daemon-reload # å¯åŠ¨æœåŠ¡ systemctl start cloudreve # è®¾ç½®å¼€æœºå¯åŠ¨ systemctl enable cloudreve # åœæ­¢æœåŠ¡ systemctl stop cloudreve # é‡å¯æœåŠ¡ systemctl restart cloudreve # æŸ¥çœ‹çŠ¶æ€ systemctl status cloudreve æ‰©å±•é…ç½® é»˜è®¤æƒ…å†µä¸‹ï¼ŒCloudreve ä¼šä½¿ç”¨å†…ç½®çš„ SQLite æ•°æ®åº“ï¼Œå¹¶åœ¨åŒçº§ç›®å½•åˆ›å»ºæ•°æ®åº“æ–‡ä»¶cloudreve.dbï¼Œå¦‚æœæ‚¨æƒ³è¦ä½¿ç”¨ MySQLï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®ï¼Œå¹¶é‡å¯ Cloudreveã€‚æ³¨æ„ï¼ŒCloudreve åªæ”¯æŒå¤§äºæˆ–ç­‰äº 5.7 ç‰ˆæœ¬çš„ MySQL ã€‚\nåˆ›å»ºé…ç½®æ–‡ä»¶ cd /opt/cloudreve vim conf.ini åŠ å…¥å¦‚ä¸‹é…ç½®ï¼Œå¹¶è¿›è¡Œä¿®æ”¹ï¼š\n[System] # è¿è¡Œæ¨¡å¼ Mode = master # ç›‘å¬ç«¯å£ Listen = :5212 # æ˜¯å¦å¼€å¯ Debug Debug = false # Session å¯†é’¥, ä¸€èˆ¬åœ¨é¦–æ¬¡å¯åŠ¨æ—¶è‡ªåŠ¨ç”Ÿæˆ SessionSecret = 23333 # Hash åŠ ç›, ä¸€èˆ¬åœ¨é¦–æ¬¡å¯åŠ¨æ—¶è‡ªåŠ¨ç”Ÿæˆ HashIDSalt = something really hard to guss # æ•°æ®åº“ç›¸å…³ [Database] # æ•°æ®åº“ç±»å‹ï¼Œç›®å‰æ”¯æŒ sqlite/mysql/mssql/postgres Type = mysql # MySQL ç«¯å£ Port = 3306 # ç”¨æˆ·å User = root # å¯†ç  Password = password # æ•°æ®åº“åœ°å€ Host = 127.0.0.1 # æ•°æ®åº“åç§° Name = root # æ•°æ®è¡¨å‰ç¼€ TablePrefix = cd_ # å­—ç¬¦é›† Charset = utf8mb4 # è¿›ç¨‹é€€å‡ºå‰å®‰å…¨å…³é—­æ•°æ®åº“è¿æ¥çš„ç¼“å†²æ—¶é—´ GracePeriod = 30 è®¾ç½®å®Œæˆåå°† Systemd æ–‡ä»¶ä¿®æ”¹å¦‚ä¸‹ï¼š\n[Unit] Description=Cloudreve After=network.target After=mysqld.service Wants=network.target [Service] WorkingDirectory=/PATH_TO_CLOUDREVE ExecStart=/PATH_TO_CLOUDREVE/cloudreve -c /path/to/conf.ini Restart=on-abnormal RestartSec=5s KillMode=mixed StandardOutput=null StandardError=syslog [Install] WantedBy=multi-user.target å…¶ä¸­ /path/to/conf.ini ä¸ºé…ç½®æ–‡ä»¶æ‰€åœ¨ä½ç½®ï¼Œæˆ‘è¿™é‡Œæ˜¯ /opt/cloudreve/conf.ini\nç„¶åæ›´æ–°é…ç½®å¹¶å¯åŠ¨æœåŠ¡ï¼š\nsystemctl daemon-reload systemctl start cloudreve ","date":"2023-01-02T13:21:30+08:00","permalink":"/archives/cloudreve/","title":"ä½¿ç”¨ Cloudreve æ­å»ºæ–‡ä»¶ç®¡ç†"},{"content":"å‰è¨€ ä»‹ç» Aria2 æ˜¯ç›®å‰æœ€å¼ºå¤§çš„å…¨èƒ½å‹ä¸‹è½½å·¥å…·ï¼Œå®ƒæ”¯æŒ BTã€ç£åŠ›ã€HTTPã€FTP ç­‰ä¸‹è½½åè®®ï¼Œå¸¸ç”¨åšç¦»çº¿ä¸‹è½½çš„æœåŠ¡ç«¯ã€‚\nAriaNg æ˜¯ä¸€ä¸ªè®© Aria2 æ›´å®¹æ˜“ä½¿ç”¨çš„ç°ä»£ Web å‰ç«¯ã€‚ AriaNg ä½¿ç”¨çº¯ html \u0026amp; javascript å¼€å‘ï¼Œæ‰€ä»¥å…¶ä¸éœ€è¦ä»»ä½•ç¼–è¯‘å™¨æˆ–è¿è¡Œç¯å¢ƒ.ã€‚æ‚¨åªè¦å°† AriaNg æ”¾åœ¨æ‚¨çš„ Web æœåŠ¡å™¨é‡Œå¹¶åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€å³å¯ä½¿ç”¨ï¼›AriaNg ä½¿ç”¨å“åº”å¼å¸ƒå±€ï¼Œæ”¯æŒå„ç§è®¡ç®—æœºæˆ–ç§»åŠ¨è®¾å¤‡ã€‚\nç‰¹æ€§ Aria2 BT ä¸‹è½½ç‡é«˜ã€é€Ÿåº¦å¿«\né‡å¯åä¸ä¸¢å¤±ä»»åŠ¡è¿›åº¦ã€ä¸é‡å¤ä¸‹è½½\nåˆ é™¤æ­£åœ¨ä¸‹è½½çš„ä»»åŠ¡è‡ªåŠ¨åˆ é™¤æœªå®Œæˆçš„æ–‡ä»¶\nä¸‹è½½é”™è¯¯è‡ªåŠ¨åˆ é™¤æœªå®Œæˆçš„æ–‡ä»¶\nä¸‹è½½å®Œæˆè‡ªåŠ¨åˆ é™¤æ§åˆ¶æ–‡ä»¶(.aria2åç¼€åæ–‡ä»¶)\nä¸‹è½½å®Œæˆè‡ªåŠ¨åˆ é™¤ç§å­æ–‡ä»¶(.torrentåç¼€åæ–‡ä»¶)\nä¸‹è½½å®Œæˆè‡ªåŠ¨åˆ é™¤ç©ºç›®å½•\nBT ä¸‹è½½å®Œæˆè‡ªåŠ¨æ¸…é™¤åƒåœ¾æ–‡ä»¶(æ–‡ä»¶ç±»å‹è¿‡æ»¤åŠŸèƒ½)\nBT ä¸‹è½½å®Œæˆè‡ªåŠ¨æ¸…é™¤å°æ–‡ä»¶(æ–‡ä»¶å¤§å°è¿‡æ»¤åŠŸèƒ½)\næœ‰ä¸€å®šçš„é˜²ç‰ˆæƒæŠ•è¯‰ã€é˜²è¿…é›·å¸è¡€æ•ˆæœ\næ›´å¥½çš„ PT ä¸‹è½½æ”¯æŒ\nAriaNG çº¯ Html \u0026amp; Javascript å®ç°, ä¸ä¾èµ–ä»»ä½•è¿è¡Œæ—¶\nå“åº”å¼å¸ƒå±€è®¾è®¡, å…¼å®¹è®¡ç®—æœºä¸ç§»åŠ¨è®¾å¤‡\nå‹å¥½çš„ç•Œé¢äº¤äº’\nä»»åŠ¡æ’åº (æŒ‰æ–‡ä»¶å, æ–‡ä»¶å¤§å°, è¿›åº¦, å‰©ä½™æ—¶é—´, ä¸‹è½½é€Ÿåº¦ç­‰.), æ–‡ä»¶æ’åº, Bittorrent è¿æ¥èŠ‚ç‚¹æ’åº\nä»»åŠ¡æœç´¢\nä»»åŠ¡é‡è¯•\næ‹–æ‹½è°ƒæ•´ä»»åŠ¡é¡ºåº\næ›´è¯¦ç»†çš„ä»»åŠ¡ä¿¡æ¯ (å¥åº·åº¦, è¿æ¥èŠ‚ç‚¹å®¢æˆ·ç«¯ä¿¡æ¯ç­‰.)\næ ¹æ®ç‰¹å®šæ–‡ä»¶ç±»å‹æˆ–æ–‡ä»¶æ‰©å±•åç­›é€‰æ–‡ä»¶ (è§†é¢‘, éŸ³é¢‘, å›¾ç‰‡, æ–‡æ¡£, åº”ç”¨ç¨‹åº, å­˜æ¡£æ–‡ä»¶ç­‰.)\nå¤šç›®å½•ä»»åŠ¡æ”¯æŒæ ‘å½¢ç»“æ„æ˜¾ç¤º\nAria2 åŠå•ä¸ªä»»åŠ¡çš„ä¸‹è½½/ä¸Šä¼ é€Ÿåº¦å›¾è¡¨\nå®Œæ•´æ”¯æŒ Aria2 è®¾ç½®é€‰é¡¹\næ·±è‰²ä¸»é¢˜\næ”¯æŒç½‘é¡µåœ°å€å‘½ä»¤è¡Œ API\nä¸‹è½½å®Œæˆæ¶ˆæ¯é€šçŸ¥\nå¤šè¯­è¨€æ”¯æŒ\næ”¯æŒé…ç½®å¤šä¸ª aria2 RPC\næ”¯æŒå¯¼å‡ºå’Œå¯¼å…¥è®¾ç½®\nèŠ‚çœå¸¦å®½, ä»…è¯·æ±‚å¢é‡æ•°æ®\nå®‰è£…é…ç½® Aria2 å®‰è£…é…ç½® è¿™é‡Œä½¿ç”¨çš„ä¸€é”®å®‰è£…ç®¡ç†è„šæœ¬å¢å¼ºç‰ˆï¼›Github é¡¹ç›®åœ°å€ è¾“å…¥å‘½ä»¤è¿›è¡Œä¸‹è½½ã€è¿è¡Œè„šæœ¬ï¼š\nwget -N git.io/aria2.sh \u0026amp;\u0026amp; chmod +x aria2.sh ./aria2.sh è¿è¡Œè„šæœ¬åï¼Œä¼šè¿›å…¥ç®¡ç†é¢æ¿ï¼š\nAria2 ä¸€é”®å®‰è£…ç®¡ç†è„šæœ¬ å¢å¼ºç‰ˆ [v2.7.4] by P3TERX.COM 1. å‡çº§è„šæœ¬ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” 1. å®‰è£… Aria2 2. æ›´æ–° Aria2 3. å¸è½½ Aria2 â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” 1. å¯åŠ¨ Aria2 2. åœæ­¢ Aria2 3. é‡å¯ Aria2 â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” 1. ä¿®æ”¹ é…ç½® 2. æŸ¥çœ‹ é…ç½® 3. æŸ¥çœ‹ æ—¥å¿— 1. æ¸…ç©º æ—¥å¿— â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” 1. æ‰‹åŠ¨æ›´æ–° BT-Tracker 2. è‡ªåŠ¨æ›´æ–° BT-Tracker â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” Aria2 çŠ¶æ€: å·²å®‰è£… | å·²å¯åŠ¨ è‡ªåŠ¨æ›´æ–° BT-Tracker: å·²å¼€å¯ è¯·è¾“å…¥æ•°å­— [0-12]: è¾“å…¥ 1 è¿›è¡Œå®‰è£…ï¼Œå®‰è£…å®Œæˆä¹‹åä¼šè·³å‡ºé…ç½®ä¿¡æ¯ï¼š\nä½ å¯ä»¥é€šè¿‡æ‰§è¡Œ ./aria2.sh ç„¶åè¾“å…¥ 7 å›è½¦ä¿®æ”¹é…ç½®ï¼›è®°å½•ä¸‹é…ç½®ä¿¡æ¯ï¼Œç„¶åç»§ç»­è¿›è¡Œä¸‹ä¸€æ­¥ã€‚\nAriaNG å®‰è£…é…ç½® é¡¹ç›®åœ°å€ï¼šGithub é¡¹ç›®åœ°å€ é¦–å…ˆåˆ›å»ºä¸€ä¸ªç½‘ç«™ï¼Œå¯ä»¥å‚è€ƒ Oneinstack åˆ›å»ºè™šæ‹Ÿä¸»æœº æˆ– Caddy åˆ›å»ºç«™ç‚¹ ç„¶åæ‰“å¼€ ä¸‹è½½ç‰ˆæœ¬ é¡µé¢ï¼Œå°† AriaNG-x.x.x.zip æ–‡ä»¶ä¸‹è½½ä¸Šä¼ è‡³ç½‘ç«™æ ¹ç›®å½•ï¼Œå¹¶è§£å‹ã€‚\nè®¿é—®è¯¥ç½‘ç«™åŸŸåï¼Œé¦–æ¬¡è®¿é—®ä¼šè·³å‡ºè®¤è¯é”™è¯¯æç¤ºï¼Œå…³é—­æ‰ç„¶åè¿›è¡Œè®¾ç½®ï¼š\nç‚¹å‡» AriaNGè®¾ç½® - RPC ç„¶åå°†ä¹‹å‰è®°å½•å¥½çš„ Aria é…ç½®ä¿¡æ¯ä¸­çš„ IPV4 åœ°å€ã€ç«¯å£ å¡«å…¥ Aria2 RPC åœ°å€ ç„¶åå¡«å…¥ Aria2 RPC å¯†é’¥ï¼›å¹¶ç‚¹å‡» é‡æ–°åŠ è½½ AriaNG\né…ç½®å®Œæˆé‡è½½åå³å¯è¿›è¡Œç¦»çº¿ä¸‹è½½ã€‚\næ‰©å±•è®¾ç½® å¦‚æœä½ ä¸æƒ³é€šè¿‡ http://127.0.0.1:6800 è¿›è¡Œè¿æ¥ Aria2ï¼Œé‚£ä¹ˆå¯ä»¥è¿›è¡Œåä»£ï¼Œé€šè¿‡åŸŸåè¿æ¥ï¼š\nä¿®æ”¹ AriaNG ç½‘ç«™é…ç½®ï¼Œæ·»åŠ ä¸‹é¢çš„é…ç½®ï¼š\nNginx location = /jsonrpc { proxy_pass http://127.0.0.1:6800; proxy_set_header Host $http_host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; proxy_set_header X-NginX-Proxy true; } Caddy domain.com { reverse_proxy /jsonrpc 127.0.0.1:6800 { header_up Host {host} header_up X-Real-IP {remote} header_up X-Forwarded-For {remote} header_up X-Forwarded-Proto https } } ç„¶ååœ¨ AriaNG ä¸­ä¿®æ”¹ Aria2 RPC åœ°å€ä¸ºï¼šhttps://domian.com:443/jsonrpc\n","date":"2022-12-24T10:58:22+08:00","permalink":"/archives/aria/","title":"ä½¿ç”¨ Aria2 + AriaNG æ­å»ºç¦»çº¿ä¸‹è½½ç«™"},{"content":"å‰è¨€ File Browser æ˜¯ä¸€æ¬¾ä½¿ç”¨ Golang å¼€å‘çš„æ–‡ä»¶ç®¡ç†å™¨ï¼Œè·¨å¹³å°ï¼Œå…è´¹å¼€æºï¼ŒåŠŸèƒ½å¼ºå¤§ã€‚å®ƒæ˜¯ä¸€ä¸ªèƒ½ç‹¬ç«‹è¿è¡Œçš„å¯æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¯ä»¥ä¸ Docker æˆ– Caddy ä¸€èµ·ä½¿ç”¨ã€‚è¿™ç¯‡æ–‡ç« åˆ†äº« Debian 11 ä¸‹å®‰è£… File Browser çš„è¿‡ç¨‹ã€‚\nå®‰è£…é…ç½® å®‰è£… File Browser é¡¹ç›®åœ°å€ï¼š Github é¡¹ç›®åœ°å€ é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…ï¼š\ncurl -fsSL https://raw.githubusercontent.com/filebrowser/get/master/get.sh | bash å®‰è£…ä½ç½®ï¼š /usr/local/bin/filebrowser\né…ç½® File Browser é¦–å…ˆåˆ›å»ºç›®å½•ç”¨äºæ”¾ç½®é…ç½®æ•°æ®ï¼š\n# åˆ›å»ºç›®å½• mkdir /opt/filebrowser # åˆ›å»ºé…ç½®æ•°æ®åº“ filebrowser -d /opt/filebrowser/filebrowser.db config init è®¾ç½®ç›‘å¬åœ°å€ï¼š\nfilebrowser -d /opt/filebrowser/filebrowser.db config set -a 0.0.0.0 è®¾ç½®ç›‘å¬ç«¯å£ï¼š\nfilebrowser -d /opt/filebrowser/filebrowser.db config set -p 8080 è®¾ç½®æ ¹ç›®å½•ï¼š\nfilebrowser -d /opt/filebrowser/filebrowser.db config set -r /var/filebrowser è®¾ç½®è¯­è¨€ç¯å¢ƒï¼š\nfilebrowser -d /opt/filebrowser/filebrowser.db config set --locale zh-cn æ·»åŠ ç”¨æˆ·ï¼š\nfilebrowser -d /opt/filebrowser/filebrowser.db users add user password --perm.admin --locale zh-cn å…¶ä¸­çš„ user ä¸ password ä¸ºç”¨æˆ·åå’Œå¯†ç \nè¯•è¿è¡Œï¼š\nfilebrowser -d /opt/filebrowser/filebrowser.db ä¹‹åå³å¯é€šè¿‡ http://ip:8080 è¿›è¡Œè®¿é—®\nåå°è¿è¡ŒåŠåå‘ä»£ç† åå°è¿è¡Œ åå°è¿è¡Œå¯é€šè¿‡ Systemd å¤§æ³•ï¼š\nåˆ›å»º filebrowser.service ç„¶åè¿›è¡Œç¼–è¾‘ï¼š\nvim /usr/lib/systemd/system/filebrowser.service å¤åˆ¶ä¸‹é¢æ–‡ä»¶å¹¶ç²˜è´´ï¼š\n[Unit] Description=File Browser After=network.target [Service] Type=simple ExecStart=/path/to/filebrowser -d /path/to/filebrowser.db Restart=always [Install] WantedBy=multi-user.target å…¶ä¸­ï¼Œ/path/to/filebrowser ä¸º filebrowser å®‰è£…ä½ç½®ï¼Œå¯é€šè¿‡ which filebrowser æŸ¥è¯¢ï¼›/path/to/filebrowser.db ä¸º filebrowser é…ç½®æ•°æ®åº“ä½ç½®ã€‚\nç®¡ç†å‘½ä»¤ï¼š\n# æ›´æ–°é…ç½® systemctl daemon-reload # å¯åŠ¨æœåŠ¡ systemctl start filebrowser # è®¾ç½®å¼€æœºå¯åŠ¨ systemctl enable filebrowser â€‹ # åœæ­¢æœåŠ¡ systemctl stop filebrowser â€‹ # é‡å¯æœåŠ¡ systemctl restart filebrowser â€‹ # æŸ¥çœ‹çŠ¶æ€ systemctl status filebrowser åä»£è®¾ç½® å¦‚æœä¸æƒ³é€šè¿‡ IP åœ°å€è®¿é—®ï¼Œå¯ä»¥è®¾ç½®åå‘ä»£ç†é€šè¿‡ç½‘å€è®¿é—®ï¼š\nNginx è®¾ç½®ï¼š location ^~ / { proxy_pass http://127.0.0.1:8080; proxy_set_header Host $http_host; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-Proto $scheme; proxy_set_header X-NginX-Proxy true; proxy_redirect off; client_max_body_size 10240m; } Caddy è®¾ç½®ï¼š domain.com { log { output file /var/log/caddy/filebrowser.log level error } root * /var/filebrowser header { Strict-Transport-Security max-age=31536000;preload X-Content-Type-Options nosniff X-Frame-Options SAMEORIGIN } encode gzip reverse_proxy 127.0.0.1:8080 { header_up Host {host} header_up X-Real-IP {remote} header_up X-Forwarded-For {remote} header_up X-Forwarded-Proto https } file_server tls user@email.com } é…ç½®å®Œæˆåå³å¯é€šè¿‡åŸŸåè¿›è¡Œè®¿é—®ã€‚\næ‰©å±•è®¾ç½® å¦‚æœä½ æƒ³è¦é€šè¿‡ https://domian.com/pan è¿›è¡Œè®¿é—®ï¼Œé‚£ä¹ˆéœ€è¦è®¾ç½® baseurl :\nfilebrowser -d /opt/filebrowser/filebrowser.db config set -b /pan ç„¶åè¿›è¡Œåä»£ï¼š\nNgxinï¼š location ~* /pan { proxy_pass http://127.0.0.1:8080; proxy_set_header Host $http_host; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-Proto $scheme; proxy_set_header X-NginX-Proxy true; proxy_redirect off; client_max_body_size 10240m; } Caddy: domain.com { reverse_proxy /pan/* 127.0.0.1:8080 { header_up Host {host} header_up X-Real-IP {remote} header_up X-Forwarded-For {remote} header_up X-Forwarded-Proto https } } ","date":"2022-12-16T20:09:22+08:00","permalink":"/archives/filebrowser/","title":"File Browser åœ¨çº¿æ–‡ä»¶ç®¡ç†"},{"content":"å‰è¨€ å‰ä¸¤å¤©æŠ˜è…¾æ‰‹ä¸Šçš„ CentOS7 æœåŠ¡å™¨ï¼Œåœ¨ç¼–è¯‘å®‰è£…è½¯ä»¶æ—¶å‘ç°ç¼–è¯‘å¤±è´¥ï¼›æŸ¥çœ‹äº†ä¸‹æ—¥å¿—å’Œæ–‡æ¡£å‘ç°æ˜¯å› ä¸º gcc å’Œ g++ ç‰ˆæœ¬è¿‡ä½äº†ã€‚è€Œé€šè¿‡ yum æŸ¥æ‰¾å‘ç°åªæœ‰ 4.8 ç‰ˆæœ¬ï¼Œäºæ˜¯å†³å®šé€šè¿‡ç¼–è¯‘å®‰è£…æ–°ç‰ˆæœ¬ï¼Œå†ç»äº†é‡é‡å›°éš¾åç»ˆäºæ˜¯å®‰è£…å®Œæ¯•ï¼Œå¹¶åœ¨æ­¤è¿›è¡Œè®°å½•ã€‚\nå®‰è£…æ­¥éª¤ å‡†å¤‡å·¥ä½œ é¦–å…ˆå®‰è£…ä»»æ„ç‰ˆæœ¬ gcc å’Œä¸€äº›éœ€è¦çš„è½¯ä»¶ï¼š yum update yum install -y gcc gcc-c++ m4 bzip2 screen ä¸‹è½½ gcc æºç  é€šè¿‡ å®˜æ–¹ä»“åº“ ä¸‹è½½æˆ– é•œåƒåœ°å€ å¯»æ‰¾æœåŠ¡å™¨å°±è¿‘åœ°å€ï¼›æ‰¾åˆ°éœ€è¦å®‰è£…çš„ç‰ˆæœ¬ä¸‹è½½å¹¶è§£å‹ï¼Œæˆ‘è¿™é‡Œé€‰çš„ 9.5.0ï¼š\nmkdir /opt/gcc cd /opt/gcc wget https://gcc.gnu.org/pub/gcc/releases/gcc-9.5.0/gcc-9.5.0.tar.gz tar zxvf gcc-9.5.0.tar.gz ä¸‹è½½ä¾èµ–åº“ gcc å®˜ç½‘æä¾›äº†ä¾èµ–åº“ä¸‹è½½åœ°å€ï¼Œä½†æ˜¯ä¸€ä¸ªä¸ªä¸‹è½½æ¯”è¾ƒéº»çƒ¦ï¼Œå¯ä»¥é€šè¿‡ gcc æºç è‡ªå¸¦çš„ download_prerequisites æ–‡ä»¶ï¼›å®ƒå¯ä»¥è‡ªåŠ¨ä¸‹è½½å…³è”çš„ä¾èµ–åº“å¹¶ä¸”æ”¾ç½®åˆ° gcc ç›®å½•ä¸‹ï¼Œä¸ gcc ä¸€èµ·ç¼–è¯‘ï¼š\ncd gcc-9.5.0 ./contrib/download_prerequisites æ‰§è¡Œåä¼šè‡ªåŠ¨ä¸‹è½½ä¾èµ–åº“å¹¶è§£å‹è‡³å½“å‰ç›®å½•ä¸‹ã€‚\nç¼–è¯‘å®‰è£… å®Œæˆä¸Šè¿°æ“ä½œåå³å¯å¼€å§‹ç¼–è¯‘å®‰è£… gcc äº†ï¼Œé¦–å…ˆè¿›è¡Œ configure é…ç½®ä¸æ£€æŸ¥ï¼š\nmkdir build \u0026amp;\u0026amp; cd build ../configure --prefix=/usr/local/gcc --enable-threads=posix --disable-checking --disable-multilib --enable-languages=c,c++ # è¾“å‡º ...... ...... configure: creating ./config.status config.status: creating Makefile æ£€æŸ¥å®Œæ¯•ç”Ÿæˆ MakeFile æ–‡ä»¶åï¼Œå°±å¯ä»¥è¿›è¡Œç¼–è¯‘å®‰è£…äº†ï¼Œæ—¶é—´æ¯”è¾ƒé•¿ï¼›ä¸ºäº†é˜²æ­¢ç½‘ç»œç­‰å› ç´ å¯¼è‡´æ–­è¿ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªçª—å£ç„¶åè¿›è¡Œç¼–è¯‘å®‰è£…ï¼š\nscreen -S gcc make \u0026amp;\u0026amp; make install è¿™é‡Œå¯ä»¥é€šè¿‡ make -j è®¾ç½®çº¿ç¨‹æ•°æ¥æå‡ç¼–è¯‘é€Ÿåº¦ï¼Œå¦‚æœä¸æ¸…æ¥šè¯¥è®¾ç½®å¤šå°‘ï¼Œå¯ä»¥é€šè¿‡ make -j$(nproc) è‡ªåŠ¨è®¡ç®—çº¿ç¨‹æ•°ï¼š\nmake -j$(nproc) \u0026amp;\u0026amp; make install ç‰ˆæœ¬æ›¿æ¢ å¸è½½æ—§ç‰ˆæœ¬ yum remove -y gcc gcc-c++ é“¾æ¥æ–°ç‰ˆæœ¬ ln -s /usr/local/gcc/bin/c++ /usr/bin/c++ ln -s /usr/local/gcc/bin/gcc /usr/bin/cc ln -s /usr/local/gcc/bin/g++ /usr/bin/g++ ln -s /usr/local/gcc/bin/gcc /usr/bin/gcc æ·»åŠ ç¯å¢ƒå˜é‡ã€æ›´æ–°åŠ¨æ€åº“ vim ~/.bashrc ä¿®æ”¹ ~/.bashrc æ–‡ä»¶ï¼Œåœ¨æœ€åæ·»åŠ ï¼š\nexport PATH=/usr/local/gcc/bin:$PATH export CPATH=/usr/local/gcc/include:$CPATH export LD_LIBRARY_PATH=/usr/local/gcc/lib:/usr/local/gcc/lib64:$LD_LIBRARY_PATH å…¶ä¸­ /usr/local/gcc ä¸º gcc å®‰è£…ç›®å½•\nç„¶ååˆ·æ–°ä¸€ä¸‹å˜é‡ç¯å¢ƒï¼š\nsource ~/.bashrc æ·»åŠ å®Œæ¯•ï¼Œæ¥ä¸‹æ¥æ›´æ–°åŠ¨æ€åº“ï¼Œé¦–å…ˆæŸ¥æ‰¾ä¸€ä¸‹åŠ¨æ€åº“ï¼š\nfind / -name \u0026#34;libstdc++.so*\u0026#34; è¾“å‡ºç»“æœï¼š\n/usr/lib64/libstdc++.so.6 /usr/lib64/libstdc++.so.6.0.19 /usr/share/gdb/auto-load/usr/lib64/libstdc++.so.6.0.19-gdb.py /usr/share/gdb/auto-load/usr/lib64/libstdc++.so.6.0.19-gdb.pyc /usr/share/gdb/auto-load/usr/lib64/libstdc++.so.6.0.19-gdb.pyo /usr/local/src/gcc-9.5.0/build/x86_64-pc-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so.6.0.28 /usr/local/src/gcc-9.5.0/build/x86_64-pc-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so.6 /usr/local/src/gcc-9.5.0/build/prev-x86_64-pc-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so.6.0.28 /usr/local/src/gcc-9.5.0/build/prev-x86_64-pc-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so.6 /usr/local/src/gcc-9.5.0/build/stage1-x86_64-pc-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so.6.0.28 /usr/local/src/gcc-9.5.0/build/stage1-x86_64-pc-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so.6 /usr/local/gcc/lib64/libstdc++.so.6.0.28 /usr/local/gcc/lib64/libstdc++.so.6 /usr/local/gcc/lib64/libstdc++.so /usr/local/gcc/lib64/libstdc++.so.6.0.28-gdb.py å¯ä»¥çœ‹åˆ°ç°åœ¨è€ç‰ˆæœ¬æ˜¯ 6.0.19 è€Œ libstdc++.so.6 åˆ™æ˜¯ libstdc++.so.6.0.19 çš„è½¯é“¾æ¥ï¼š\nls -l /usr/lib64/libstdc++.so.6 # è¾“å‡º lrwxrwxrwx. 1 root root 30 Dec 10 06:50 /usr/lib64/libstdc++.so.6 -\u0026gt; /usr/lib64/libstdc++.so.6.0.19 ç„¶åå°† gcc ä¸­çš„åŠ¨æ€åº“å¤åˆ¶è¿‡å»ï¼Œåˆ é™¤æ—§ç‰ˆæœ¬é“¾æ¥å¹¶é‡æ–°é“¾æ¥æ–°ç‰ˆæœ¬ï¼š\ncp /usr/local/gcc/lib64/libstdc++.so.6.0.28 /usr/lib64/ rm -f /usr/lib64/libstdc++.so.6 ln -s /usr/lib64/libstdc++.so.6.0.28 /usr/lib64/libstdc++.so.6 æ›´æ–°å®Œæ¯•ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ã€‚\næ·»åŠ å¿½ç•¥ï¼ˆå¯é€‰ï¼‰ ä¸ºé˜²æ­¢è¯¯æ“ä½œæˆ–è¿è¡Œè‡ªåŠ¨åŒ–è„šæœ¬æƒ…å†µå¯¼è‡´è¢«è¦†ç›–ï¼Œå¯ä»¥å°† cmake æ·»åŠ å¿½ç•¥ï¼Œç¼–è¾‘ /etc/yum.conf\nvim /etc/yum.conf åœ¨æœ«å°¾æ·»åŠ ä¸Šï¼š\nexclude=gcc* å¦å¤–éœ€è¦æ³¨æ„è¿è¡Œè‡ªåŠ¨åŒ–è„šæœ¬å‰æŸ¥çœ‹ä¸€ä¸‹æ˜¯å¦ä¼šå¯¹é…ç½®æ–‡ä»¶è¿›è¡Œç¼–è¾‘ï¼Œè‹¥å­˜åœ¨åˆ™éœ€è¦ä¿®æ”¹è„šæœ¬ã€‚\n","date":"2022-12-10T15:43:06+08:00","permalink":"/archives/make_gcc/","title":"CentOS 7 ç¼–è¯‘å®‰è£… gcc"},{"content":"å‰è¨€ åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­è®²äº†åœ¨æ·»åŠ ç½‘ç«™æ—¶é€šè¿‡ Oneinstackï¼ˆLNMP ä¸€é”®å®‰è£…åŒ…ï¼‰çš„ acme.sh/Caddy æ¥è‡ªåŠ¨å®‰è£…éƒ¨ç½²å…è´¹è¯ä¹¦ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå·±çš„è¯ä¹¦æ›¿ä»£å…è´¹è¯ä¹¦æ¥è¿›å®‰è£…éƒ¨ç½²ï¼›ç°åœ¨æ¥çœ‹ä¸‹å¦‚ä½•è¿›è¡Œæ“ä½œã€‚\nåœºæ™¯ä¸å‰æ ç”±äºæˆ‘ä½¿ç”¨çš„æ˜¯ Oneintack å®‰è£…çš„ Nginx å’Œ Caddy æœåŠ¡ï¼Œæ‰€ä»¥æœ¬æ–‡ä»¥ Nginx/Caddy è§†è§’è¿›è¡Œæ“ä½œã€‚æˆ‘çš„åŸŸåæ˜¯åœ¨è…¾è®¯äº‘ä¸‹ï¼Œå¹¶ä½¿ç”¨ä»–ä»¬æä¾›çš„ä¸ºæœŸ1å¹´å…è´¹ Trust Asia è¯ä¹¦ï¼Œæ‰€ä»¥æˆ‘ä»¥è¿™äº›å‰æä¸ºæ¼”ç¤ºï¼›ä½¿ç”¨å…¶ä»–çš„ä¹Ÿæ˜¯å®Œå…¨å¯ä»¥çš„ã€‚\næ“ä½œæ­¥éª¤ ä¸‹è½½å¹¶ä¸Šä¼ è¯ä¹¦ é¦–å…ˆç™»é™†åˆ°åŸŸåæ§åˆ¶é¢æ¿ï¼Œç”³è¯·å¥½ä½ æ‰€éœ€è¦çš„è¯ä¹¦ï¼Œç„¶åä¸‹è½½åˆ°æœ¬åœ°ï¼›å¦‚æˆ‘åœ¨è…¾è®¯äº‘ä¸‹è½½çš„ Nginx ç±»å‹è¯ä¹¦ï¼š\næ–‡ä»¶å†…å®¹ï¼š domain.com_nginx.zip â”œ domain.com_nginx â”‚ â”œ domain.com.scr â”‚ â”œ domain.com.key â”‚ â”œ domain.com_bundle.crt â”‚ â”œ domain.com_bundle.pem å°†å…¶è§£å‹å‡ºæ¥ï¼Œå¹¶å…¨éƒ¨å‘½åä¸º domian.com.xxx ï¼›ç„¶åå°† domain.com.scr ã€domian.com.key å’Œ domian.com.crt ä¸Šä¼ è‡³ SSL å­˜æ”¾ä½ç½®ã€‚\né€šè¿‡ Oneinistack å®‰è£…çš„ä½ç½®ä½äº /usr/local/nginx/conf/ssl\næ·»åŠ ç½‘ç«™ ä¸Šä¼ å®Œæˆåï¼Œå³å¯ä½¿ç”¨ Oneinstack é€šè¿‡è‡ªæœ‰è¯ä¹¦æ¨¡å¼æ·»åŠ ç½‘ç«™ï¼š\n~/oneinstack/vhost.sh è¾“å…¥ 2 é€‰æ‹©è‡ªæœ‰ SSL ï¼Œç„¶åå®Œæˆæ·»åŠ å³å¯ã€‚\næ·»åŠ å®Œæˆåå¯é€šè¿‡ nginx -t è¿›è¡Œæµ‹è¯•ï¼Œæ— è¯¯åå³å¯é€šè¿‡ nginx -s reload é‡è½½ Nginxï¼š\nnginx -t nginx: the configuration file /usr/local/nginx/conf/nginx.conf syntax is ok nginx: configuration file /usr/local/nginx/conf/nginx.conf test is successful nginx -s reload ä½¿ç”¨å·²æœ‰ç½‘ç«™ è‹¥éœ€è¦å°†è¯ä¹¦éƒ¨ç½²è‡³å·²æœ‰ç½‘ç«™ï¼Œåˆ™ä¿®æ”¹å¯¹åº”çš„é…ç½®æ–‡ä»¶å³å¯ï¼Œé…ç½®æ–‡ä»¶ä½äº /usr/local/nginx/conf/vhost/domian.com.conf\nvim /usr/local/nginx/conf/vhost/domian.com.conf æŒ‰ç…§å¤‡æ³¨ä½ç½®ä¿®æ”¹è¯ä¹¦è·¯å¾„ï¼š\nserver { listen 80; listen [::]:80; listen 443 ssl http2; listen [::]:443 ssl http2; ssl_certificate /usr/local/nginx/conf/ssl/domain.com.crt; # è¯ä¹¦æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„æˆ–ç»å¯¹è·¯å¾„ ssl_certificate_key /usr/local/nginx/conf/ssl/domain.com.key; # ç§é’¥æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„æˆ–ç»å¯¹è·¯å¾„ ssl_protocols TLSv1.2 TLSv1.3; ssl_ecdh_curve X25519:prime256v1:secp384r1:secp521r1; ssl_ciphers ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256; ssl_conf_command Ciphersuites TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256:TLS_AES_128_GCM_SHA256; ssl_conf_command Options PrioritizeChaCha; ssl_prefer_server_ciphers on; ssl_session_timeout 10m; ssl_session_cache shared:SSL:10m; ssl_buffer_size 2k; add_header Strict-Transport-Security max-age=15768000; ssl_stapling on; ssl_stapling_verify on; } ä¿®æ”¹å®Œæˆåå¯é€šè¿‡ nginx -t è¿›è¡Œæµ‹è¯•ï¼Œæ— è¯¯åå³å¯é€šè¿‡ nginx -s reload é‡è½½ Nginxï¼š\nnginx -t nginx: the configuration file /usr/local/nginx/conf/nginx.conf syntax is ok nginx: configuration file /usr/local/nginx/conf/nginx.conf test is successful nginx -s reload Caddy æ“ä½œ åŒæ ·å°† domian.com.key å’Œ domian.com.crt ä¸Šä¼ è‡³æœåŠ¡å™¨ï¼Œæ¯”å¦‚æˆ‘ä¸Šä¼ åˆ° /var/caddy/ssl ç›®å½•ä¸‹ï¼Œç„¶åå¯¹ Caddyfile è¿›è¡Œä¿®æ”¹ï¼š\nvim /etc/caddy/Caddyfile æŒ‰ç…§ä¸‹é¢è¿›è¡Œæ›´æ”¹ï¼š\ndomain.com { log { output file /var/log/caddy/domain.com.log level error } root * /var/www/domain.com encode gzip handle_errors { rewrite * /{err.status_code}.html file_server } php_fastcgi unix//dev/shm/php-cgi.sock file_server tls /path/to/domain.com.pem /path/to/domain.com.key # è¯ä¹¦å’Œå¯†é’¥çš„ PEM æ ¼å¼çš„æ–‡ä»¶ç»å¯¹è·¯å¾„ï¼Œæ³¨æ„ä¸­é—´ç©ºæ ¼ } è®¾ç½®å®Œæ¯•åï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿›è¡Œæµ‹è¯•ï¼š\ncaddy adapt --config /etc/caddy/Caddyfile ç¡®è®¤æ— è¯¯åé‡è½½é…ç½®æ–‡ä»¶ï¼š\ncaddy reload --config /etc/caddy/Caddyfile è‹¥å‡ºç° ERR_SSL_PROTOCOL_ERRORï¼Œå¯é‡è½½ Caddy:\nsystemctl restart caddy æ€»ç»“ ä»¥ä¸Šå°±æ˜¯ Nginx/Caddy æœåŠ¡ä¸‹å®‰è£…éƒ¨ç½² SSL è¯ä¹¦çš„è¯¦ç»†è¿‡ç¨‹ï¼Œå¸Œæœ›èƒ½å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ã€‚\nå‚è€ƒèµ„æ–™ Nginx æœåŠ¡å™¨ SSL è¯ä¹¦å®‰è£…éƒ¨ç½² ","date":"2022-12-02T10:17:55+08:00","permalink":"/archives/own_ssl/","title":"SSL è¯ä¹¦å®‰è£…éƒ¨ç½²"},{"content":"å‰è¨€ VPS ä¸»æœºä¸€é”®è‡ªåŠ¨é‡è£…ç³»ç»Ÿè„šæœ¬ä¼˜åŒ–ç‰ˆï¼ŒåŸºäºèŒå’–è„šæœ¬ä¼˜åŒ–ã€å¼€å‘ï¼›DD è¿‡ç¨‹ç®€å•ï¼Œå‚»ç“œå¼å®‰è£…ã€‚ è„šæœ¬æ”¯æŒåŸç‰ˆè‡ªå®šä¹‰å¯†ç å®‰è£…ï¼Œå¯é€‰ Linux å’Œ Windows ç³»ç»Ÿï¼Œè€Œä¸”è„šæœ¬æ”¯æŒ Oracle ç”²éª¨æ–‡å…è´¹äº‘ä¸»æœºä½¿ç”¨æ”¯æŒ UEFI çš„é•œåƒåŒ…å®‰è£…ã€‚\nä¸€é”® DD è„šæœ¬ï¼Œæ”¯æŒæ€§å¥½ï¼Œæ›´æ™ºèƒ½æ›´å…¨é¢ï¼Œæ”¯æŒå›½å†…å¤–å„ç§ VPS é‡è£…ï¼Œç‰¹åˆ«æ˜¯å¯¹å›½å†…å„ç§è®¿é—®å›½å¤–èµ„æºæ…¢çš„ VPS å®‰è£…æœ‰å¥‡æ•ˆã€‚\nGithub é¡¹ç›®åœ°å€ å®‰è£…è¿‡ç¨‹ å‡†å¤‡å·¥ä½œ ä¸ºé˜²æ­¢å¼‚å¸¸ï¼Œå…ˆæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\nDebian/Ubuntu: apt update -y \u0026amp;\u0026amp; apt dist-upgrade -y RedHat/CentOS: yum makecache \u0026amp;\u0026amp; yum update -y å®‰è£…é‡è£…ç³»ç»Ÿçš„å‰æç»„ä»¶:\nDebian/Ubuntu: apt-get install -y xz-utils openssl gawk file wget screen \u0026amp;\u0026amp; screen -S os RedHat/CentOS: yum install -y xz openssl gawk file glibc-common wget screen \u0026amp;\u0026amp; screen -S os ä¸€é”® DD æ‰§è¡Œå‘½ä»¤ï¼š\nwget --no-check-certificate -O NewReinstall.sh https://git.io/newbetags \u0026amp;\u0026amp; chmod a+x NewReinstall.sh \u0026amp;\u0026amp; bash NewReinstall.sh å¦‚ä¸ºCNä¸»æœº(éƒ¨åˆ†ä¸»æœºå•†å·²ä¸èƒ½ä½¿ç”¨)ï¼Œå¯èƒ½å‡ºç°æŠ¥é”™æˆ–ä¸èƒ½ä¸‹è½½è„šæœ¬çš„é—®é¢˜ï¼Œå¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¼€å§‹å®‰è£…ï¼š\nwget --no-check-certificate -O NewReinstall.sh https://cdn.jsdelivr.net/gh/fcurrk/reinstall@master/NewReinstall.sh \u0026amp;\u0026amp; chmod a+x NewReinstall.sh \u0026amp;\u0026amp; bash NewReinstall.sh è¿è¡Œåï¼Œä¼šè·å–å…¬ç½‘ IPã€ç½‘å…³å’Œå­ç½‘æ©ç ï¼Œç¡®è®¤ä¸€è‡´åï¼ŒæŒ‰ä¸‹ Y å›è½¦ä¸‹ä¸€æ­¥ï¼š\nå…¬ç½‘ IP ã€ç½‘å…³åŠå­ç½‘æ©ç å¯åœ¨ VPS æ§åˆ¶é¢æ¿è¿›è¡ŒæŸ¥çœ‹ï¼Œè‹¥ä¸ä¸€è‡´ï¼Œå¯è¾“å…¥ N è¿›è¡Œè‡ªå®šä¹‰\nç„¶åè¿›è¡Œç³»ç»Ÿé€‰æ‹©ï¼Œ41åˆ1çš„ç³»ç»Ÿä¸€é”® DD é€‰æ‹©ç•Œé¢ï¼Œè¾“å…¥ 99 åˆ™ä½¿ç”¨è‡ªå®šä¹‰é•œåƒï¼š\nè‹¥è¾“å…¥ 9-16 å®‰è£…åŸç‰ˆç³»ç»Ÿï¼Œå¯è‡ªå®šä¹‰å¯†ç ï¼Œå¯†ç è¦æ±‚8-16ä½ï¼Œä»¥è‹±æ–‡å­—æ¯æˆ–æ•°å­—å¼€å¤´ï¼Œå¯ä»¥æ˜¯å¤§å°å†™è‹±æ–‡å­—æ¯ã€æ•°å­—åŠ7ä¸ªç‰¹æ®Šå­—ç¬¦.!$@#\u0026amp;%çš„ä»»æ„ç»„åˆï¼Œç„¶åè®¾ç½®ç«¯å£ç¡®è®¤ä¿¡æ¯åï¼Œå³å¯è¿›è¡Œå®‰è£…ï¼š\næ³¨æ„\nè°·æ­Œäº‘åŸç‰ˆç³»ç»ŸåŸºç¡€ä¸Š DD ä¼šå‡ºç°è‡ªåŠ¨è·å–çš„å­ç½‘æ©ç ä¸º255.255.255.255ï¼Œå¦‚å‡ºç°è¿™ç§æƒ…å†µéœ€è¦æ‰‹å·¥è¾“å…¥æ”¹æ­£ä¸ºæ­£ç¡®çš„å¦‚255.255.255.0ï¼Œå¦åˆ™ä¼šå®‰è£…å®Œæˆä¸»æœºå¯èƒ½ä¼šç¦»çº¿ã€‚\né˜¿é‡Œäº‘å› ä½¿ç”¨äº†ç‰¹æ®Šçš„é©±åŠ¨ï¼ŒDD å®‰è£… Windows ç³»ç»Ÿé€‰æ‹©é˜¿é‡Œäº‘ä¸“ç”¨ç‰ˆã€‚\nOracle Cloudï¼ˆç”²éª¨æ–‡äº‘ï¼‰å¯é€‰æ‹©æ”¯æŒ UEFI çš„é•œåƒï¼Œæ³¨æ„åŸºç¡€ç³»ç»Ÿæœ€å¥½é€‰æ‹© Ubuntuï¼Œå¦‚åŸç³»ç»Ÿæ˜¯ CentOS å¯èƒ½æ— æ³•æˆåŠŸï¼Œæ³¨æ„å¦‚æ˜¯ ARM æœºå™¨æ³¨æ„é€‰æ‹©åŒæ—¶æ”¯æŒ ARM64 å’Œ UEFI çš„é•œåƒã€‚\n41åˆä¸€ç³»ç»Ÿå¯†ç ï¼š\n1ã€CentOS 7.7 (å·²å…³é—­é˜²ç«å¢™åŠ SELinuxï¼Œé»˜è®¤å¯†ç  Pwd@CentOS) 2ã€CentOS 7 (é»˜è®¤å¯†ç  cxthhhhh.com) 3ã€CentOS 7 (æ”¯æŒ ARM64ã€UEFIï¼Œé»˜è®¤å¯†ç  cxthhhhh.com) 4ã€CentOS 8 (é»˜è®¤å¯†ç  cxthhhhh.com) 5ã€Rocky 8 (é»˜è®¤å¯†ç  cxthhhhh.com) 6ã€Rocky 8 (æ”¯æŒ UEFIï¼Œé»˜è®¤å¯†ç  cxthhhhh.com) 7ã€Rocky 8 (æ”¯æŒ ARM64ã€UEFIï¼Œé»˜è®¤å¯†ç  cxthhhhh.com) 8ã€CentOS 9 (é»˜è®¤å¯†ç  cxthhhhh.com) 9ã€CentOS 6 (å®˜æ–¹æºåŸç‰ˆï¼Œé»˜è®¤å¯†ç  Minijer.com) 10ã€Debian 11 (å®˜æ–¹æºåŸç‰ˆï¼Œé»˜è®¤å¯†ç  Minijer.com) 11ã€Debian 10 (å®˜æ–¹æºåŸç‰ˆï¼Œé»˜è®¤å¯†ç  Minijer.com) 12ã€Debian 9 (å®˜æ–¹æºåŸç‰ˆï¼Œé»˜è®¤å¯†ç  Minijer.com) 13ã€Debian 8 (å®˜æ–¹æºåŸç‰ˆï¼Œé»˜è®¤å¯†ç  Minijer.com) 14ã€Ubuntu 20.04 (å®˜æ–¹æºåŸç‰ˆï¼Œé»˜è®¤å¯†ç  Minijer.com) 15ã€Ubuntu 18.04 (å®˜æ–¹æºåŸç‰ˆï¼Œé»˜è®¤å¯†ç  Minijer.com) 16ã€Ubuntu 16.04 (å®˜æ–¹æºåŸç‰ˆï¼Œé»˜è®¤å¯†ç  Minijer.com) 17ã€Windows Server 2022 (é»˜è®¤å¯†ç  cxthhhhh.com) 18ã€Windows Server 2022 (æ”¯æŒ UEFIï¼Œé»˜è®¤å¯†ç  cxthhhhh.com) 19ã€Windows Server 2019 (é»˜è®¤å¯†ç  cxthhhhh.com) 20ã€Windows Server 2016 (é»˜è®¤å¯†ç  cxthhhhh.com) 21ã€Windows Server 2012 (é»˜è®¤å¯†ç  cxthhhhh.com) 22ã€Windows Server 2008 (é»˜è®¤å¯†ç  cxthhhhh.com) 23ã€Windows Server 2003 (é»˜è®¤å¯†ç  cxthhhhh.com) 24ã€Windows 10 LTSC (é»˜è®¤å¯†ç  Teddysun.com) 25ã€Windows 10 LTSC (æ”¯æŒ UEFIï¼Œé»˜è®¤å¯†ç  Teddysun.com) 26ã€Windows 7 x86 Lite (é»˜è®¤å¯†ç  nat.ee) 27ã€Windows 7 x86 Lite (é˜¿é‡Œäº‘ä¸“ç”¨ï¼Œé»˜è®¤å¯†ç  nat.ee) 28ã€Windows 7 x64 Lite (é»˜è®¤å¯†ç  nat.ee) 29ã€Windows 7 x64 Lite (æ”¯æŒ UEFIï¼Œé»˜è®¤å¯†ç  nat.ee) 30ã€Windows 10 LTSC Lite (é»˜è®¤å¯†ç  nat.ee) 31ã€Windows 10 LTSC Lite (é˜¿é‡Œäº‘ä¸“ç”¨ï¼Œé»˜è®¤å¯†ç  nat.ee) 32ã€Windows 10 LTSC Lite (æ”¯æŒ UEFIï¼Œé»˜è®¤å¯†ç  nat.ee) 33ã€Windows Server 2003 Lite (C ç›˜é»˜è®¤10Gï¼Œé»˜è®¤å¯†ç  WinSrv2003x86-Chinese) 34ã€Windows Server 2008 Lite (é»˜è®¤å¯†ç  nat.ee) 35ã€Windows Server 2008 Lite (æ”¯æŒ UEFIï¼Œé»˜è®¤å¯†ç  nat.ee) 36ã€Windows Server 2012 Lite (é»˜è®¤å¯†ç  nat.ee) 37ã€Windows Server 2012 Lite (æ”¯æŒ UEFIï¼Œé»˜è®¤å¯†ç nat.ee) 38ã€Windows Server 2016 Lite (é»˜è®¤å¯†ç  nat.ee) 39ã€Windows Server 2016 Lite (æ”¯æŒ UEFIï¼Œé»˜è®¤å¯†ç  nat.ee) 40ã€Windows Server 2022 Lite (é»˜è®¤å¯†ç  nat.ee) 41ã€Windows Server 2022 Lite (æ”¯æŒ UEFIï¼Œé»˜è®¤å¯†ç  nat.ee) 99ã€è‡ªå®šä¹‰é•œåƒ æ³¨æ„äº‹é¡¹ ç³»ç»Ÿåç§°åå¸¦ Lite çš„å‡ä¸ºç²¾ç®€ç‰ˆï¼Œæ²¡æœ‰çš„æ˜¯å®Œæ•´ç‰ˆ\n[X64-Legacy-cxthhhhh] ä»£è¡¨ç³»ç»Ÿä¸º AMD64 ä½ï¼Œæ”¯æŒä¼ ç»Ÿ BIOS å¯åŠ¨ï¼Œcxthhhhh å®šåˆ¶çš„ç³»ç»Ÿé•œåƒ\nARM64 ä»£è¡¨ç³»ç»Ÿæ”¯æŒ ARM64 ä½\nUEFI ä»£è¡¨ç³»ç»Ÿæ”¯æŒæœ€æ–°çš„ UEFI å¯åŠ¨ï¼Œå¦‚ç”²éª¨æ–‡å…¨éƒ¨éƒ½æ˜¯è¿™ç§\naliyun ä»£è¡¨é˜¿é‡Œäº‘ä¸“ç”¨ç³»ç»Ÿé•œåƒ\ncxthhhhhã€teddysunã€nat.ee å‡ä¸ºä¸‰ä½åˆ¶ä½œç³»ç»Ÿé•œåƒçš„å¤§ä½¬ä»£ç§°\nç³»ç»Ÿå¯†ç ä¼šåœ¨é€‰æ‹©ç›¸åº”åºå·åæç¤ºï¼Œè¯·æ³¨æ„è®°å½•\nç³»ç»Ÿå®‰è£…è¿‡ç¨‹ä¼šè‡ªåŠ¨æ–­å¼€ SSH è¿æ¥ï¼Œå±äºæ­£å¸¸ç°è±¡ï¼›ç­‰å¾…å®‰è£…å®Œæˆåå³å¯è¿›è¡Œé‡è¿\nå‚è€ƒèµ„æ–™ ä¸€é”® DD è„šæœ¬ Github é¡¹ç›®åœ°å€ ä¸€é”® DD è„šæœ¬ç½‘å€ ","date":"2022-12-01T10:53:36+08:00","permalink":"/archives/dd_sh/","title":"ä¸€é”® DD è‡ªåŠ¨é‡è£…è„šæœ¬"},{"content":"å‰è¨€ å‰å‡ å¤©ä½¿ç”¨ Oneinstack æ·»åŠ ç½‘ç«™è¿›è¡Œä¸´æ—¶æµ‹è¯•ï¼Œåœ¨è‡ªåŠ¨ç­¾å‘ SSL æ—¶å‘ç°è¯ä¹¦ç­¾å‘å¤±è´¥ï¼›æ‰¾äº†å¾ˆä¹…å°è¯•äº†å¾ˆå¤šè§£å†³æ–¹æ³•ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ä½œç”¨ã€‚ã€‚ã€‚ç„¶åæƒ³æœ‰æ²¡æœ‰å¯èƒ½æ˜¯å› ä¸ºåœ¨åŒä¸€ IP å¤šæ¬¡ç”³è¯· SSL è¯ä¹¦ç„¶åè¢«é™åˆ¶äº†ï¼›ä½†æ˜¯æˆ‘å¹¶æ²¡æœ‰è¿›è¡Œå¤šæ¬¡ç”³è¯·ã€‚ã€‚ã€‚ä¸ç®¡æ€ä¹ˆæ ·è¿˜æ˜¯æ›´æ¢ä¸€ä¸‹ CA æœºæ„çœ‹çœ‹èƒ½ä¸èƒ½è§£å†³ï¼Œæ²¡æƒ³ç«Ÿç„¶æˆåŠŸäº†ï¼›è™½ç„¶æ²¡æœ‰æ‰¾åˆ°é—®é¢˜çš„åŸå› ï¼Œä½†æœ€ç»ˆè¿˜æ˜¯è§£å†³äº†ã€‚é‚åœ¨æ­¤è¿›è¡Œä¸€ä¸ªè®°å½•ã€‚\næŒ‡å®š CA æœºæ„ æœåŠ¡å™¨ç¯å¢ƒ æˆ‘çš„æœåŠ¡å™¨ä½¿ç”¨çš„æ˜¯ Debian 10/11 ï¼ŒWeb æœåŠ¡ä½¿ç”¨çš„æ˜¯ Nginx/Caddy ï¼›LNMP ç¯å¢ƒç”± Oneinstack è‡ªåŠ¨å®‰è£…\nNginx ç”±äº Oneinstack é›†æˆäº† acme.sh ï¼Œæ‰€ä»¥ç›´æ¥æ›´æ¢ acme.sh çš„é»˜è®¤ CA å³å¯ï¼ˆæˆ‘ä¹‹å‰çš„æ˜¯ Let\u0026rsquo;s Encrypt ï¼Œç°åœ¨æ¢æˆ ZeroSSL ï¼‰ï¼š\ncd ~/.acme.sh acme.sh --set-default-ca --server zerossl CA æœºæ„ï¼š\nCA æœºæ„ æœ‰æ•ˆæœŸ ECC åŸŸåæ•° é€šé…ç¬¦ IPV4 IPV6 Let\u0026rsquo;s Encrypt 90 Yes 100 Yes No No ZeroSSL 90 Yes 100 Yes No No Google 90 Yes 100 Yes No No Buypass 180 Yes 5 Paid No No SSL.com 90 Yes 2 Paid No No HiCA 180 Paid 10 (1é€šé…ç¬¦) Yes Yes Yes LNMP ä¸€é”®å®‰è£…åŒ…çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ä¸Šè¿°æ–¹å¼æŒ‡å®šé»˜è®¤ CA ï¼Œä¹Ÿå¯ä»¥åœ¨æ·»åŠ ç½‘ç«™æ—¶æ‰‹åŠ¨é€‰æ‹© CA\nCaddy Caddy æ¯”è¾ƒç®€å•ï¼Œç”±äºå®ƒæ˜¯è‡ªåŠ¨å¼€å¯ HTTPS çš„ã€‚åœ¨ç¼–è¾‘ Caddyfile æ·»åŠ ç½‘ç«™æ—¶ï¼Œåªéœ€è¦å¡«ä¸ŠåŸŸåï¼Œå®ƒå°±ä¼šè‡ªåŠ¨ç­¾å‘è¯ä¹¦ï¼š\ndomain.com { } æˆ–è€…ä½ ä¹Ÿå¯ä»¥è®¾ç½® tls é‚®ç®±ï¼ŒCaddy ä¼šåœ¨ç­¾å‘è¯ä¹¦é‡åˆ°é—®é¢˜æ—¶è‡ªåŠ¨æ›´æ¢ CAï¼š\ndomain.com { tls your@email.com } å¦‚æœä½ éœ€è¦æŒ‡å®š CA æœºæ„ä¸º ZeroSSLï¼Œä½ å¯ä»¥è¿›è¡Œå…¨å±€è®¾ç½®ï¼š\n{ acme_ca https://acme.zerossl.com/v2/DV90 email your@email.com } domain.com { } æˆ–è€…å•ç‹¬å¯¹æŸä¸ªç½‘ç«™è¿›è¡Œè®¾ç½®ï¼š\ndomain.com { tls your@email.com { ca https://acme.zerossl.com/v2/DV90 } } å¦‚æœè¦æŒ‡å®š CA ä¸º Letâ€™s Encryptï¼Œåªéœ€è¦å°† https://acme.zerossl.com/v2/DV90 æ›´æ¢ä¸º https://acme-v02.api.letsencrypt.org/directory å³å¯\n","date":"2022-11-24T09:32:18+08:00","permalink":"/archives/setca/","title":"æŒ‡å®šç­¾å‘ SSL CA æœºæ„"},{"content":"å‰è¨€ è¿™ä¸¤å¤©é—²ç€æ²¡äº‹ï¼Œå°†æ‰‹å¤´ä¸Šé—²ç½®çš„ä¸€å° 512M å°å†…å­˜æœåŠ¡å™¨æ‹¿å‡ºæ¥æŠ˜è…¾ï¼Œç¼–è¯‘å®‰è£… MariaDB çš„æ—¶å€™ç”±äºå†…å­˜ä¸è¶³å¯¼è‡´ç¼–è¯‘å¤±è´¥ã€‚ç”±äºæˆ‘æ˜¯ä¸ªå°ç™½ï¼Œä¸”ä¸€ç›´æ˜¯ä½¿ç”¨çš„ 2/4G æœåŠ¡å™¨ï¼Œä»¥å‰ä»æ¥æ²¡æœ‰æ³¨æ„è¿‡è¿™ä¸ªï¼›ç›´åˆ°ç°åœ¨é‡åˆ°è¿™æ ·çš„é—®é¢˜ã€‚ã€‚ã€‚\nSwap åˆ†åŒº åˆ«åï¼šäº¤æ¢åˆ†åŒºã€‚ Swap åˆ†åŒºåœ¨ç³»ç»Ÿçš„ç‰©ç†å†…å­˜ä¸å¤Ÿç”¨çš„æ—¶å€™ï¼ŒæŠŠç¡¬ç›˜å†…å­˜ä¸­çš„ä¸€éƒ¨åˆ†ç©ºé—´é‡Šæ”¾å‡ºæ¥ï¼Œä»¥ä¾›å½“å‰è¿è¡Œçš„ç¨‹åºä½¿ç”¨ã€‚é‚£äº›è¢«é‡Šæ”¾çš„ç©ºé—´å¯èƒ½æ¥è‡ªä¸€äº›å¾ˆé•¿æ—¶é—´æ²¡æœ‰ä»€ä¹ˆæ“ä½œçš„ç¨‹åºï¼Œè¿™äº›è¢«é‡Šæ”¾çš„ç©ºé—´è¢«ä¸´æ—¶ä¿å­˜åˆ° Swap åˆ†åŒºä¸­ï¼Œç­‰åˆ°é‚£äº›ç¨‹åºè¦è¿è¡Œæ—¶ï¼Œå†ä» Swap åˆ†åŒºä¸­æ¢å¤ä¿å­˜çš„æ•°æ®åˆ°å†…å­˜ä¸­ã€‚\nè®¾ç½®æ­¥éª¤ ä¸€èˆ¬æ¥è¯´ï¼Œå¾ˆå¤šæœåŠ¡å™¨å¼€é€šçš„æ—¶å€™å°±è‡ªå¸¦äº† Swap åˆ†åŒºï¼Œåœ¨æ—¥å¸¸ä½¿ç”¨ä¸‹å¹¶ä¸éœ€è¦å¯¹å…¶è¿›è¡Œé¢å¤–çš„æ“ä½œï¼›ä½†æ˜¯æœ‰æ—¶å€™è¿˜æ˜¯è¦è§†æƒ…å†µå¯¹ Swap åˆ†åŒºè¿›è¡Œé€‚å½“çš„å¢å‡ï¼›ä¸‹é¢æ¥çœ‹çœ‹ Swap åˆ†åŒºçš„è®¾ç½® (è¿™é‡Œæˆ‘ä»¥æˆ‘ 4G å†…å­˜æœåŠ¡å™¨ä½œä¸ºæ¼”ç¤ºï¼Œè¯·æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹æ•°æ®) ï¼š\næŸ¥çœ‹åˆ†åŒº é€šè¿‡ free -h å‘½ä»¤æŸ¥çœ‹ free -h # è¾“å‡º total used free shared buff/cache available Mem: 3.6Gi 123Mi 3.3Gi 1.0Mi 182Mi 3.3Gi Swap: 0B 0B 0B é€šè¿‡ä»¥ä¸Šå‘½ä»¤å¯ä»¥çœ‹åˆ°å½“å‰å†…å­˜åŠ Swap åˆ†åŒºä½¿ç”¨çŠ¶æ€ï¼Œå¦‚æœ Swap åˆ†åŒºå’Œæˆ‘è¿™é‡Œä¸€æ ·æ˜¾ç¤º 0B 0B 0B åˆ™ä»£è¡¨å¹¶æ²¡æœ‰å¼€å¯ Swap åˆ†åŒºã€‚\né€šè¿‡ swapon --show å‘½ä»¤æŸ¥çœ‹ swapon --show è‹¥å¼€å¯äº† Swap åˆ†åŒºï¼Œåˆ™ä¼šæ˜¾ç¤º Swap åˆ†åŒºçŠ¶æ€ï¼›è‹¥æ²¡æœ‰å¼€å¯ Swap åˆ†åŒºï¼Œåˆ™ä¸ä¼šè¿”å›æ•°æ®ã€‚\nåˆ›å»ºåˆ†åŒº äº¤æ¢åˆ†åŒºçš„å¤§å°åˆ†é… æŸ¥æ‰¾äº†ä¸€ä¸‹èµ„æ–™ï¼Œå‘ç°ä¼—è¯´çº·çº­ã€‚ã€‚ã€‚æœ€åå†³å®šé‡‡ç”¨å¦‚ä¸‹æ–¹æ¡ˆï¼š\nç‰©ç†å†…å­˜ å»ºè®® Swap åˆ†åŒºå¤§å° \u0026lt; 4GB 2å€å†…å­˜ï¼Œä¸è¶…è¿‡4G 4-8G ç­‰äºå†…å­˜å¤§å° 8-64G 8G 64-256G 16G åˆ›å»ºäº¤æ¢åˆ†åŒº ä½¿ç”¨ fallocate å‘½ä»¤åˆ›å»ºç”¨äºäº¤æ¢çš„æ–‡ä»¶ fallocate -l 4G /swapfile å¦‚æœæŠ¥é”™å¯ä»¥ä½¿ç”¨ dd å‘½ä»¤ï¼š\ndd if=/dev/zero of=/swapfile bs=1M count=4096 è®¾ç½®æƒé™ chmod 600 /swapfile è®¾ç½®äº¤æ¢åˆ†åŒº mkswap /swapfile # è¾“å‡º Setting up swapspace version 1, size = 4 GiB (4294963200 bytes) no label, UUID=e3edf2fd-7259-4d00-98be-5afc604c1271 æˆåŠŸåˆ™è¿”å›å¦‚ä¸Šä¿¡æ¯ã€‚\nå¯ç”¨åˆ†åŒº swapon /swapfile éªŒè¯åˆ†åŒº swapon --show # è¾“å‡º NAME TYPE SIZE USED PRIO /swapfile file 4G 0B -2 å¼€å¯æˆåŠŸåˆ™è¿”å› Swap åˆ†åŒºçŠ¶æ€\nå¼€æœºå¯åŠ¨åŠåˆ†é…æ§åˆ¶ è®¾ç½®å¼€æœºå¯åŠ¨ ç¼–è¾‘ /etc/fstab æ–‡ä»¶æ·»åŠ è¿™ä¸€è¡Œï¼š vim /etc/fstab # æ·»åŠ å¦‚ä¸‹: /swapfile swap swap defaults 0 0 æˆ–æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ç›´æ¥å†™å…¥ï¼š echo \u0026#34;/swapfile swap swap defaults 0 0\u0026#34; \u0026gt;\u0026gt;/etc/fstab Swap åˆ†åŒºåˆ†é…æ§åˆ¶ Swappiness Swappiness æ˜¯ä¸€ä¸ª Linux å†…æ ¸å±æ€§ï¼Œç”¨äºå®šä¹‰ç³»ç»Ÿä½¿ç”¨äº¤æ¢ç©ºé—´çš„é¢‘ç‡ã€‚ Swappiness å¯ä»¥å…·æœ‰0åˆ°100ä¹‹é—´çš„å€¼ã€‚è¾ƒä½çš„å€¼å°†ä½¿å†…æ ¸å°½å¯èƒ½é¿å…äº¤æ¢ï¼Œè€Œè¾ƒé«˜çš„å€¼å°†ä½¿å†…æ ¸æ›´ç§¯æåœ°ä½¿ç”¨äº¤æ¢ç©ºé—´ï¼›é»˜è®¤çš„ swappiness å€¼ä¸º60.å¯ä»¥é€šè¿‡é”®å…¥ä»¥ä¸‹å‘½ä»¤æ¥æ£€æŸ¥å½“å‰çš„ swappiness å€¼ï¼š\ncat /proc/sys/vm/swappiness # è¾“å‡º 60 å¯¹äºæ¡Œé¢ç«¯ï¼Œå¯ä»¥ä½¿ç”¨60çš„ swappiness å€¼ï¼›ä½†å¯¹äºç”Ÿäº§æœåŠ¡å™¨ï¼Œå¯èƒ½éœ€è¦è®¾ç½®è¾ƒä½çš„å€¼ï¼Œæ¯”å¦‚æˆ‘è®¾ç½®ä¸º10ï¼š\nä¸´æ—¶è®¾ç½®ï¼š sysctl vm.swappiness=10 è¦ä½¿ä¹‹é‡å¯åä¿æŒä¸å˜ï¼Œå¯ä»¥é™„åŠ åˆ° /etc/sysctl.conf æ–‡ä»¶ï¼š vim /etc/sysctl.conf # åœ¨æœ€åæ·»åŠ å¦‚ä¸‹ vm.swappiness=10 æˆ–è€…ï¼š\necho \u0026#34;vm.swappiness=10\u0026#34; \u0026gt;\u0026gt;/etc/sysctl.conf åˆ é™¤åŠè°ƒæ•´å¤§å° å¦‚æœéœ€è¦å¯¹äº¤æ¢åˆ†åŒºè¿›è¡Œåˆ é™¤ï¼Œå¯ä»¥æŒ‰ç…§ä¸‹åˆ—æ­¥éª¤ï¼š\nåœç”¨äº¤æ¢åˆ†åŒº swapoff /swapfile åœ¨ /etc/fstab æ–‡ä»¶ä¸­åˆ é™¤äº¤æ¢æ–‡ä»¶æ¡ç›®ï¼š vim /etc/fstab # åˆ é™¤æˆ–æ³¨é‡Šä¸‹é¢ä¸€è¡Œï¼š /swapfile swap swap defaults 0 0 åˆ é™¤ swapfile æ–‡ä»¶ rm /swapfile è‹¥éœ€è¦ä¿®æ”¹åˆ†åŒºå¤§å°ï¼Œå¯å…ˆåœç”¨äº¤æ¢åˆ†åŒºï¼Œç„¶åç›´æ¥åˆ é™¤ swapfile æ–‡ä»¶å¹¶é‡æ–°åˆ›å»ºã€‚\næ€»ç»“ ä»¥ä¸Šå°±æ˜¯æœ¬ç¯‡çš„å…¨éƒ¨å†…å®¹ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ã€‚\nå¯¹äº Linuxï¼Œæ— è®ºæ˜¯å¤šå¤§å†…å­˜ï¼Œè¿˜æ˜¯è¦è®¾ç«‹ Swap äº¤æ¢åˆ†åŒºï¼Œè¿™æ ·æœ‰åˆ©äºåœ¨å†…å­˜è€—å°½æ—¶åŠæ—¶å¯ç”¨ Swap ç©ºé—´ã€‚å¦å¤–ï¼Œå¯ä»¥è§†æƒ…å†µå¯¹ Swap åˆ†åŒºå¤§å°è¿›è¡Œä¸´æ—¶è°ƒæ•´ï¼Œæ¯”å¦‚æˆ‘å‰æ–‡æ‰€è¯´ç”¨ 512M å†…å­˜æœåŠ¡å™¨ç¼–è¯‘å®‰è£…é«˜ç‰ˆæœ¬ MariaDB ï¼Œé‚£ä¹ˆæˆ‘å¯ä»¥å…ˆå°† Swap åˆ†åŒºä¸´æ—¶è®¾ç½®ä¸º 2G ï¼Œç¼–è¯‘å®‰è£…å®Œæˆåå†è°ƒæ•´ã€‚\n","date":"2022-11-11T19:15:56+08:00","permalink":"/archives/setswap/","title":"Linux æœåŠ¡å™¨è®¾ç½® Swap åˆ†åŒº"},{"content":"å‰è¨€ åœ¨ä¹‹å‰çš„ Hugo åšå®¢ç³»åˆ—æ–‡ç« æœ‰æåˆ°è¿‡ä¸€äº›åŸºæœ¬çš„ Git é…ç½®å’Œæ“ä½œï¼Œä¸€èˆ¬æ¥è¯´æˆ‘ä»¬å†™ Hugo åšå®¢åªéœ€è¦é…ç½®å…¨å±€è´¦å·ä»¥åŠå•ä¸ªä»“åº“å³å¯ã€‚ä½†å‡¡äº‹çš†æœ‰ä¾‹å¤–ï¼Œå¦‚æœä½ éœ€è¦å¤šä¸ª Git ç”¨æˆ·ï¼Œæˆ–è€…è¯´éœ€è¦é…ç½®å¤šä¸ªä¸åŒçš„ä»“åº“ï¼Œé‚£ä¹ˆåº”è¯¥æ€ä¹ˆè®¾ç½®å‘¢ï¼Ÿç°åœ¨æˆ‘ä»¬å°±æ¥çœ‹çœ‹ã€‚\né…ç½®è®¾ç½® å¤šä»“åº“è®¾ç½® å¦‚æœåªä½¿ç”¨å•ä¸ª Github/Gitee è´¦æˆ·æ¥ç®¡ç†å¤šä¸ªä»“åº“çš„è¯ï¼Œåªéœ€è¦é’ˆå¯¹æ¯ä¸ªæœ¬åœ°ä»“åº“è®¾ç½®è¿œç¨‹ä»“åº“ Remote å³å¯ã€‚ä¾‹å¦‚ï¼Œæˆ‘åœ¨ Github ä¸Šé¢æœ‰ä¸¤ä¸ªé¡¹ç›®ï¼Œä¸€ä¸ªåä¸º demo ï¼Œå¦ä¸€ä¸ªåä¸º example ï¼š\ndemo ä»“åº“ï¼š mkdir /path/to/demo # åˆ›å»ºä»“åº“æ–‡ä»¶å¤¹ cd /path/to/demo # è¿›å…¥è¯¥ä»“åº“ç›®å½• git init # æŒ‡å®š git ä»“åº“å¹¶åˆå§‹åŒ– git remote add origin git@github.com:user/demo.git # æ·»åŠ è¿œç¨‹ä»“åº“åœ°å€ example ä»“åº“ï¼š mkdir /path/to/example # åˆ›å»ºä»“åº“æ–‡ä»¶å¤¹ cd /path/to/example # è¿›å…¥è¯¥ä»“åº“ç›®å½• git init # æŒ‡å®š git ä»“åº“å¹¶åˆå§‹åŒ– git remote add origin git@github.com:user/example.git # æ·»åŠ è¿œç¨‹ä»“åº“åœ°å€ åƒè¿™æ ·å•è´¦æˆ·ï¼Œå¤šä»“åº“çš„ï¼Œåªéœ€è¦ä¸ºæ¯ä¸ªä»“åº“è®¾ç½®è¿œç¨‹ä»“åº“ Remote å³å¯ã€‚\nå¤šè´¦æˆ·è®¾ç½® å¦‚æœä½ éœ€è¦ç®¡ç†å¤šä¸ª Git ç”¨æˆ·ï¼Œåº”è¯¥æ€ä¹ˆæ“ä½œï¼Ÿç»§ç»­çœ‹ï¼š\nåˆ›å»ºå¯†é’¥å¯¹ è­¬å¦‚ï¼Œæˆ‘æœ‰ä¸€ä¸ª Github è´¦å·ï¼Œä¸€ä¸ª Gitee è´¦å·ï¼Œå®ƒä»¬éœ€è¦åˆ†å¼€æ“ä½œï¼›é¦–å…ˆæ‰“å¼€ Git bash è¿›å…¥ ~/.ssh ç›®å½•ä¸ºå®ƒä»¬åˆ†åˆ«åˆ›å»ºå¯†é’¥å¯¹ï¼š\né¦–å…ˆåˆ›å»º Github å¯†é’¥å¯¹ï¼š\ncd ~/.ssh ssh-keygen -t rsa -C \u0026#34;email\u0026#34; -f \u0026#34;github\u0026#34; # email æ›´æ¢ä¸ºä½ çš„ Github é‚®ç®±ï¼Œ-f å‚æ•°ä¸ºæ–‡ä»¶åï¼Œå¯è‡ªè¡Œè®¾ç½® cat github.pub # æŸ¥çœ‹å…¬é’¥å†…å®¹ å¤åˆ¶å…¬é’¥å†…å®¹ï¼Œç„¶åæ‰“å¼€ Gituhb æ·»åŠ åˆšæ‰ç”Ÿæˆçš„å…¬é’¥åˆ° SSH Key\næ¥ç€æ˜¯ Giteeï¼š\nssh-keygen -t rsa -C \u0026#34;email\u0026#34; -f \u0026#34;gitee\u0026#34; # email æ›´æ¢ä¸ºä½ çš„ Gitee é‚®ç®±ï¼Œ-f å‚æ•°ä¸ºæ–‡ä»¶åï¼Œå¯è‡ªè¡Œ cat gitee.pub # æŸ¥çœ‹å…¬é’¥å†…å®¹ åŒæ ·ï¼Œå¤åˆ¶å…¬é’¥å†…å®¹ï¼Œæ·»åŠ åˆ° Gitee çš„ SSH å…¬é’¥\nç„¶åæ·»åŠ ç§é’¥å¹¶è¿›è¡Œæµ‹è¯•\nssh-add ~/.ssh/github ssh-add ~/.ssh/gitee ssh -T git@github.com ssh -T git@gitee.com æˆåŠŸåˆ™ä¼šè¿”å›æ¬¢è¿ä½ çš„ç”¨æˆ·åä¿¡æ¯ã€‚\nåˆ›å»ºé…ç½®æ–‡ä»¶ åˆ›å»ºå®Œå¯†é’¥å¯¹åï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶æ¥åˆ†é…ç§é’¥ä»¥åŠä¸»æœº\nvim config # æˆ–è€…ç›´æ¥ç”¨ VS Code ç¼–è¾‘ config é…ç½®æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š\n# Github Host github.com HostName github.com User username # usernameæ”¹æˆä½ çš„ Github ç”¨æˆ·å IdentityFile ~/.ssh/github # ç§é’¥ä½ç½® # Gitee Host gitee.com HostName gitee.com User username # usernameæ”¹æˆä½ çš„ Gitee ç”¨æˆ·å IdentityFile ~/.ssh/gitee # ç§é’¥ä½ç½® ç”¨æˆ·åŠ Remote é…ç½® ç”±äºæ‹¥æœ‰å¤šä¸ª Git ç”¨æˆ·ï¼Œå°±ä¸èƒ½ä½¿ç”¨å…¨å±€é…ç½®äº†ï¼›è€Œæ˜¯åº”è¯¥å¯¹ä»“åº“è¿›è¡Œå•ç‹¬çš„ç”¨æˆ·é…ç½®ï¼Œæ‰€ä»¥è¦å…ˆå–æ¶ˆå…¨å±€ç”¨æˆ·è®¾ç½®ï¼š\ngit config --global unset user.name username git config --global unset user.email email æ¥ç€å¯¹æœ¬åœ°ä»“åº“åˆ†åˆ«è¿›è¡Œå•ç‹¬é…ç½®ï¼Œå‡å®šæˆ‘ Github é¡¹ç›®çš„æœ¬åœ°ä»“åº“æ–‡ä»¶å¤¹ä¸º github ï¼š\ncd /path/to/github # è¿›å…¥ä»“åº“ç›®å½• git config --local user.name username # ä¸ºè¯¥ä»“åº“è®¾ç½®ç”¨æˆ· git config --local user.email email # ä¸ºè¯¥ä»“åº“è®¾ç½®é‚®ç®± git remote remove origin # ç§»é™¤ä¹‹å‰çš„è¿œç¨‹ä»“åº“åœ°å€ git remote add origin git@github.com:username/repositories.git # æ·»åŠ è¿œç¨‹ä»“åº“åœ°å€ è¿™é‡Œæ³¨æ„ä¸‹æ–°çš„ remote æ ¼å¼ï¼Œå› ä¸ºä¹‹å‰è®¾ç½®äº† config æ–‡ä»¶ï¼Œæ‰€ä»¥ç›¸å¯¹çš„åœ°å€ä¸ºï¼šgit@(config ä¸­çš„ Host):ç”¨æˆ·å/ä»“åº“å.git å³ï¼šgit@github.com:uesrname/repositories.git\nç„¶åæŒ‰ç…§åŒæ ·çš„æ–¹æ³•ä¸º Gitee è®¾ç½®å³å¯ã€‚\næ‰©å±•é…ç½® é™¤äº†ä¸º Git åˆ†é…ä¸»æœºå’Œç§é’¥å¤–ï¼Œä¹Ÿå¯ä»¥ä¸ºè‡ªå·±çš„æœåŠ¡å™¨è¿›è¡Œè®¾ç½®ï¼Œé¦–å…ˆä¸ºæœåŠ¡å™¨è®¾ç½®å¯†é’¥ç™»é™†ï¼Œå¯ä»¥å‚è€ƒ è¿™é‡Œ ï¼›ç„¶åå°†å¯†é’¥å¯¹ä¸‹è½½åˆ°æœ¬åœ° ~/.ssh ç›®å½•ä¸‹ï¼Œç„¶åé‡å‘½åå¹¶ç¼–è¾‘ config æ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š\n# Github Host github.com HostName github.com User username # usernameæ”¹æˆä½ çš„ Github ç”¨æˆ·å IdentityFile ~/.ssh/github # ç§é’¥ä½ç½® # Gitee Host gitee.com HostName gitee.com User username # usernameæ”¹æˆä½ çš„ Github ç”¨æˆ·å IdentityFile ~/.ssh/gitee # ç§é’¥ä½ç½® # Tencent Cloud Host tencent HostName xx.xx.xx.xx # æœåŠ¡å™¨ IP User root Port 22 IdentityFile ~/.ssh/tencent # ç§é’¥ä½ç½® ä¹‹åå°±å¯ä»¥é€šè¿‡ ssh tencent è¿›è¡Œè¿œç¨‹æœåŠ¡å™¨çš„ç™»é™†äº†ã€‚\nä»£ç†è®¾ç½® ç”±äº Github æœåŠ¡å™¨åœ¨æµ·å¤–ï¼Œä»¥åŠæŸäº›ä¸å¯æ§å› ç´ ï¼Œå¯¼è‡´åœ¨æ¨é€åŠæ‹‰å–ä»£ç æ—¶è€æ˜¯å¤±è´¥ï¼›æˆ‘ä»¬å¯ä»¥ä¸ºåœ¨ config é…ç½®æ–‡ä»¶ä¸­ä¸º Github æ·»åŠ ä»£ç†è®¿é—®ã€‚æ‰“å¼€ config æ–‡ä»¶è¿›è¡Œç¼–è¾‘ï¼š\nä½¿ç”¨å‰è¯·ç¡®ä¿ä½ æ‹¥æœ‰ â€œåº”ç”¨â€\n# Github Host github.com HostName github.com ProxyCommand connect -S 127.0.0.1:10808 %h %p User username IdentityFile ~/.ssh/github éœ€è¦æ³¨æ„ ProxyCommand connect -S 127.0.0.1:10808 %h %p è¿™è¡Œï¼š\n-S ä»£è¡¨ Socksï¼Œ-H ä»£è¡¨ HTTP\nå¦‚æœä½ æŒ‰ç…§æˆ‘ä¹‹å‰çš„æ–‡ç« æ¶è®¾çš„ â€œåº”ç”¨â€ ï¼Œåˆ™ 127.0.0.1:10808 æ˜¯ Socks çš„ç«¯å£ï¼ŒHTTP çš„ç«¯å£ä¸º 10809\nè¿™æ ·å°±å¯ä»¥é€šè¿‡ä»£ç†æ¥è¿›è¡Œ Github çš„æ¨é€/æ‹‰å–æ“ä½œï¼Œå†ä¹Ÿä¸ç”¨æ‹…å¿ƒè¿æ¥è¶…æ—¶å’Œè¿æ¥å¤±è´¥å•¦ã€‚\næ€»ç»“ ä»¥ä¸Šå°±æ˜¯ Git å¤šç”¨æˆ·ã€ä»“åº“é…ç½®åŠä½¿ç”¨ä»£ç†çš„å…¨éƒ¨è¿‡ç¨‹å•¦ï¼Œå¸Œæœ›èƒ½ç»™å¤§å®¶å¸¦æ¥ä¸€å®šçš„å¸®åŠ©ã€‚æœ‰ä¸ªé—®é¢˜å°±æ˜¯æˆ‘åœ¨åˆ›å»º config é…ç½®æ–‡ä»¶åæ— æ³•é€šè¿‡ PS (Power Shell) è¿›è¡Œ SSH è¿æ¥ï¼›è¿æ¥å°±æŠ¥é”™ Bad owner or permissions ï¼›ç½‘ä¸Šä¹Ÿæ‰¾äº†è§£å†³æ–¹æ¡ˆï¼Œä½†æ˜¯éƒ½æ²¡æœ‰ç”¨ã€‚ç°åœ¨ä¸€ç›´æ˜¯ä½¿ç”¨ Terminal æ‰“å¼€ Git bash è¿›è¡Œ SSH è¿æ¥ï¼Œä»¥åæœ‰äº†å¥½çš„è§£å†³æ–¹æ¡ˆä¼šå’Œå¤§å®¶è¿›è¡Œåˆ†äº«ï¼›ä¹Ÿå¸Œæœ›èƒ½æœ‰æ‡‚çš„å¤§ä½¬ç»™å‡ºä¸€ç‚¹å»ºè®¾æ€§çš„æ„è§ï¼Œååˆ†æ„Ÿè°¢ğŸ™\n","date":"2022-11-06T11:56:29+08:00","permalink":"/archives/git_config/","title":"Git å¤šç”¨æˆ·åŠä»“åº“é…ç½®"},{"content":"å‰è¨€ ç”±äºæœ€è¿‘è…¾è®¯äº‘åŒ11ä¼˜æƒ æ´»åŠ¨ï¼Œè‡ªå·±è´­ä¹°äº†ä¸€å°è…¾è®¯äº‘çš„è½»é‡åº”ç”¨æœåŠ¡å™¨ (è€å®è¯´è¿˜æ˜¯æŒºå®æƒ çš„-ã€‚-) åŠ ä¸Šè‡ªå·±æŒ‰æºä¸ä½æŠ˜è…¾çš„å¿ƒï¼Œè¿™æ¬¡ä¸€æ”¹ä»¥å‰ä¸€ç›´ä½¿ç”¨çš„ Debian è€Œé€‰æ‹©äº† CentOS ï¼›è¿™æ¬¡çš„æœåŠ¡å™¨ç³»ç»Ÿæˆ‘é€‰æ‹©çš„æ˜¯ CentOS7 ï¼ŒLNMP å®‰è£…æ–¹å¼åˆ™æ˜¯ Oneinstack å’Œ LNMP ä¸€é”®å®‰è£…åŒ…éƒ½è¿›è¡Œäº†å°è¯•ã€‚Debian ä¸‹ï¼Œå®ƒä»¬éƒ½æ˜¯å®Œç¾å®‰è£…ã€‚ä½†æ˜¯ Centos7 ä¸‹ï¼Œåœ¨å®‰è£…è¿‡ç¨‹ä¸­ Oneinstack å’Œ LNMP ä¸€é”®å®‰è£…åŒ…éƒ½ç¢°åˆ°äº† MariaDB/MySQL æ— æ³•å®‰è£…çš„æƒ…å†µï¼Œç”±äºæˆ‘æ˜¯ä¸€ä¸ª Linux å°ç™½ï¼Œå¹³å¸¸åªé ä»ç½‘ä¸Šå­¦ä¹ ï¼ŒçŸ¥è¯†é‡ä¸è¶³ï¼›æ‰€ä»¥åœ¨æ­¤è®°å½•ä¸‹è¿™æ¬¡è§£å†³è¿‡ç¨‹ï¼Œä»¥ä¾¿æ—¥åè¿›è¡ŒæŸ¥é˜…ã€‚\nè§£å†³è¿‡ç¨‹ æŠ¥é”™ å’Œå¾€å¸¸ä¸€æ ·ï¼ŒæœåŠ¡å™¨å¼€é€šåï¼Œæˆ‘é€šè¿‡ yum è¿›è¡Œäº†ä¸€äº›åŸºæœ¬çš„ update ã€autoremove ã€clean ç­‰æ“ä½œï¼Œç„¶ååˆ›å»º Screen çª—å£ï¼Œè¾“å…¥ LNMP ä¸€é”®åŒ…å‘½ä»¤å°±å¼€å§‹å®‰è£…äº†ï¼Œåˆ°æœ€åå´å‘ç° MariaDB å®‰è£…å¤±è´¥ï¼›ä¸€å¼€å§‹ä¹Ÿä¸çŸ¥é“å•¥æƒ…å†µï¼Œä»¥ä¸ºæ˜¯æˆ‘é€‰çš„æºç ç¼–è¯‘æ–¹å¼æœ‰é—®é¢˜ï¼Œåé¢è¯•äº†äºŒè¿›åˆ¶å®‰è£…ä¾ç„¶å¦‚æ­¤ï¼š\nå°è¯• åé¢æˆ‘åœ¨ç½‘ä¸ŠæŸ¥äº†å¾ˆä¹…ï¼Œä»–ä»¬è¯´æ˜¯ Centos è‡ªå¸¦äº† RPM åŒ…ä¸‹çš„ MariaDB ï¼›æ–°å®‰è£…ä¼šæœ‰å†²çªï¼Œæ‰€ä»¥è¦è¿›è¡Œå¸è½½ï¼Œäºæ˜¯æˆ‘é€šè¿‡ rpm å‘½ä»¤è¿›è¡Œå¸è½½ï¼š\né¡ºå¸¦ä¸€æï¼Œè¿™æœç´¢ä½“éªŒçœŸçš„æ˜¯ã€‚ã€‚ã€‚ä¸èƒ½è¯´æ˜¯å·®å¼ºäººæ„å§ï¼Œä¹Ÿåªèƒ½è¯´æ˜¯ä¸€è¨€éš¾å°½äº†ã€‚ã€‚ã€‚\nrpm -qa|grep mariadb rpm -e mariadb-lib å‘ç°å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œäºæ˜¯åŠ ä¸Š nodeps å‚æ•°ï¼š\nrpm -e --nodeps mariadb-lib æ¥ç€æ»¡æ€€æœŸå¾…çš„åˆè¿›è¡Œå®‰è£…ï¼Œæœ€åè¿˜æ˜¯æŠ¥é”™-ã€‚-\né”™è¯¯æ—¥å¿— è¿˜æ˜¯ç¡¬ç€å¤´çš®æ¥çœ‹é”™è¯¯æ—¥å¿—å§ï¼Œæˆ‘å°† /root/lnmp-install.log å®‰è£…æ—¥å¿—ä¸‹è½½ä¸‹æ¥è¿›è¡ŒæŸ¥çœ‹ã€‚è™½ç„¶è¯´å¾ˆé•¿ï¼Œå’±ä¹Ÿçœ‹ä¸å¤ªæ‡‚ã€‚ã€‚ã€‚æœ€åè¿˜æ˜¯æ‰¾åˆ°äº†ä¸€äº›ç ´ç»½ã€‚ã€‚ã€‚å‘ç°åº”è¯¥æ˜¯ Cmake ç‰ˆæœ¬ä½äº†ï¼š\nå¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œè¦æ±‚ 3.0.0 ç‰ˆæœ¬æˆ–è€…æ›´é«˜ï¼Œè€Œæˆ‘çš„ç‰ˆæœ¬ä¸º 2.8.12.2 ï¼Œäºæ˜¯æˆ‘è¿”å› SSH ä½¿ç”¨ yum update cmake æ›´æ–°ä¹‹åå‘ç°è¿˜æ˜¯ 2.8.12.2 ç‰ˆæœ¬ï¼Œäºæ˜¯é€‰æ‹©ä¸‹è½½æœ€æ–°ç‰ˆæœ¬è¿›è¡Œç¼–è¯‘ã€‚\nä¸‹è½½ç¼–è¯‘ Cmake æ‰“å¼€ ä¸‹è½½åˆ—è¡¨ æ–°ä¸‹è½½åˆ—è¡¨ æ‰¾åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œç„¶åå¤åˆ¶é“¾æ¥ï¼Œå›åˆ° SSH\n# å¸è½½Cmake yum remove -y cmake # åˆ›å»ºæ–‡ä»¶å¤¹ mkdir /opt/cmake # è¿›å…¥ç›®å½• cd /opt/cmake # ä¸‹è½½å‹ç¼©åŒ… wget https://github.com/Kitware/CMake/releases/download/v3.28.3/cmake-3.28.3.tar.gz # è§£å‹ tar -zxvf cmake-3.28.3.tar.gz # å®‰è£…ä¾èµ– yum install -y gcc gcc-c++ openssl-devel # è¿›å…¥ç›®å½• cd cmake-3.28.3 # è®¾ç½®ç¼–è¯‘ç›®å½• ./configure --prefix=/usr/local/cmake # å®‰è£… make \u0026amp;\u0026amp; make install # åˆ›å»ºé“¾æ¥ ln -s /usr/local/cmake/bin/cmake /usr/bin/cmake # æŸ¥çœ‹ç‰ˆæœ¬ cmake -version æ·»åŠ ç¯å¢ƒå˜é‡ vim ~/.bashrc ä¿®æ”¹ ~/.bashrc æ–‡ä»¶ï¼Œåœ¨æœ€åæ·»åŠ ï¼š\nexport PATH=/usr/local/cmake/bin:$PATH ç„¶ååˆ·æ–°ä¸€ä¸‹å˜é‡ç¯å¢ƒï¼š\nsource ~/.bashrc é‡æ–°å®‰è£…æ•°æ®åº“ ä¸€é€šæ“ä½œä¸‹æ¥ï¼ŒCmake å·²ç»æ˜¯æœ€æ–°ç‰ˆæœ¬äº†ï¼Œç„¶åè¿›å…¥åˆ° ~/lnmp1.9 ä¹Ÿå°±æ˜¯ LNMP ä¸€é”®åŒ…è§£å‹ç›®å½•ä¸‹è¿›è¡Œæ“ä½œï¼š\n./install.sh db ç„¶åé€‰æ‹©éœ€è¦å®‰è£…çš„æ•°æ®åº“åŠç‰ˆæœ¬ï¼Œæ¥ä¸‹æ¥ç­‰å¾…å®‰è£…å®Œæˆï¼š\nOK æ‰“å¼€æµè§ˆå™¨è¾“å…¥ IP åœ°å€è¿›è¡Œè®¿é—®ï¼Œè¿˜æ˜¯ç†Ÿæ‚‰çš„é»˜è®¤é¡µé¢ï¼š\nç„¶åç‚¹å‡» phpMyAdmin ç™»é™†è¿›å»ï¼ŒOK å®Œç¾ï¼\næ·»åŠ å¿½ç•¥ï¼ˆå¯é€‰ï¼‰ ä¸ºé˜²æ­¢è¯¯æ“ä½œæˆ–è¿è¡Œè‡ªåŠ¨åŒ–è„šæœ¬æƒ…å†µå¯¼è‡´è¢«è¦†ç›–ï¼Œå¯ä»¥å°† cmake æ·»åŠ å¿½ç•¥ï¼Œç¼–è¾‘ /etc/yum.conf\nvim /etc/yum.conf åœ¨æœ«å°¾æ·»åŠ ä¸Šï¼š\nexclude=cmake* å¦å¤–éœ€è¦æ³¨æ„è¿è¡Œè‡ªåŠ¨åŒ–è„šæœ¬å‰æŸ¥çœ‹ä¸€ä¸‹æ˜¯å¦ä¼šå¯¹é…ç½®æ–‡ä»¶è¿›è¡Œç¼–è¾‘ï¼Œè‹¥å­˜åœ¨åˆ™éœ€è¦ä¿®æ”¹è„šæœ¬ã€‚\næ€»ç»“ ä»¥ä¸Šå°±æ˜¯æˆ‘åœ¨ä½¿ç”¨ CentOS å®‰è£… LNMP ç¯å¢ƒæ—¶ MariaDB/MySQL å®‰è£…å¤±è´¥çš„æƒ…å†µï¼Œå’±ä¹Ÿä¸çŸ¥é“æ˜¯ä¸ªä¾‹è¿˜æ˜¯å°±æˆ‘è¿™ä¸ªå°ç™½è¿™æ ·ã€‚ã€‚ã€‚åœ¨æ­¤è¿›è¡Œä¸€ä¸ªè®°å½•ã€‚å¸Œæœ›èƒ½å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ã€‚æœ€åé¡ºå¸¦æä¸€ä¸‹ï¼Œæˆ‘å’‹å°±æƒ³åˆ°å»æŠ˜è…¾ CentOS äº†ï¼›ä¸€ç›´åœ¨ç”¨çš„Debian å®ƒä¸é¦™å˜›ã€‚ã€‚ã€‚\n","date":"2022-11-05T17:18:10+08:00","permalink":"/archives/centos_sql_error/","title":"CentOS7 ä¸‹ MariaDB å®‰è£…å¤±è´¥è§£å†³æ–¹æ³•"},{"content":"å‰è¨€ ä¸€èˆ¬æ¥è¯´ï¼Œå¤§å®¶ä¼šæœ‰ä¸€äº›æƒ³æ³•æˆ–è€…çªå¦‚å…¶æ¥çš„çµæ„Ÿéœ€è¦è¿›è¡Œè®°å½•ï¼›é‚£ä¹ˆæˆ‘ä»¬ä¼šé€‰æ‹©å°†å®ƒä»¬è®°å½•åœ¨æ‰‹æœºä¾¿ç­¾ã€æ–‡æœ¬ç¼–è¾‘å™¨æˆ–è€…ç›´æ¥ç”¨ç¬”å†™ä¸‹æ¥ï¼›ç­‰æœ€åå†æ¢³ç†æˆæ–‡ã€‚æ­£å¸¸æƒ…å†µä¸‹æˆ‘ä»¬éƒ½æ˜¯åœ¨ç”µè„‘å‰è¿›è¡Œå†™ä½œï¼Œä½†æ˜¯æœ‰æ—¶å€™ä¸æ–¹ä¾¿åœ¨ç”µè„‘å‰è¿›è¡Œå†™ä½œï¼›é‚£åº”è¯¥æ€ä¹ˆåŠï¼Ÿä»Šå¤©å°±æ¥çœ‹ä¸‹æˆ‘çš„æ—¥å¸¸å†™ä½œæ–¹å¼ã€‚\nçœ‹è¿‡å‰é¢æ–‡ç« çš„åº”è¯¥çŸ¥é“ï¼Œæˆ‘è‡ªå·±æ˜¯å°† Hugo åšå®¢æºç é€šè¿‡ Git æ¨é€åˆ° Github è¿œç¨‹ä»“åº“ç„¶åç”± Github Actions è‡ªåŠ¨éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šé¢ï¼Œæ‰€ä»¥æˆ‘å†™æ–‡ç« çš„æµç¨‹å°±æ˜¯é€šè¿‡ Git åŒæ­¥è¿œç¨‹ä»“åº“ï¼Œå†™ä½œå®Œæˆåå†æ¨é€åˆ°è¿œç¨‹ä»“åº“é€šè¿‡ Github Actions è‡ªåŠ¨éƒ¨ç½²å°±å¯ä»¥äº†ã€‚é‚£ä¹ˆç°åœ¨å°±ä¸€èµ·æ¥çœ‹ä¸‹è¿™ä¸ªè¿‡ç¨‹çš„å®ç°ã€‚\næˆ‘çš„è¯ï¼Œå¹³å¸¸ä½¿ç”¨çš„å®¢æˆ·ç«¯ä¸ºï¼šå®¶é‡Œç”µè„‘ (WindowsX2) ã€å…¬å¸ç”µè„‘ (Windows) ã€ç¬”è®°æœ¬ (Linux)ã€æ‰‹æœº (Android)ï¼›ç®€åŒ–ä¸€ç‚¹å°±æ˜¯ Windowsã€Linuxã€Androidã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°±æ˜¯ Win å’Œ Android äº†ã€‚è¦å®ç°åœ¨å®‰å“ä½¿ç”¨ Git çš„è¯ï¼Œæˆ‘ä»¬å°±éœ€è¦å®‰è£…ä¸€æ¬¾ç¥çº§è½¯ä»¶ Termux\nä»‹ç»åŠå®‰è£… Termux Termux å®˜ç½‘ Github é¡¹ç›®åœ°å€ Termux æ˜¯ä¸€æ¬¾ Android ç»ˆç«¯æ¨¡æ‹Ÿå™¨å’Œ Linux ç¯å¢ƒåº”ç”¨ç¨‹åºï¼Œæ— éœ€ root æˆ–è®¾ç½®å³å¯ç›´æ¥è¿è¡Œã€‚ è‡ªåŠ¨å®‰è£…æœ€å°çš„åŸºæœ¬ç³»ç»Ÿ - å¯ä»¥ä½¿ç”¨ APT æˆ–å…¶ä»–åŒ…ç®¡ç†å™¨ã€‚\nä½ å¯ä»¥é€šè¿‡ F-Droid æˆ–è€… Github è¿›è¡Œä¸‹è½½ï¼Œä¸‹è½½å®Œæˆä¹‹åè¿›è¡Œæ›´æ¢æ¸…åæºï¼Œå®‰è£… Git ï¼Œåˆ›å»ºç›®å½•è½¯é“¾æ¥ï¼Œå®‰è£… Hugo å³å¯ã€‚\næ— æ³•ä¸‹è½½æˆ–è€…ä¸‹è½½æ…¢å¯ä»¥æ‰¾å›½å†…ä¸‹è½½åœ°å€ï¼Œæˆ–è€…é€šè¿‡ â€œåº”ç”¨â€ è¿›è¡Œä¸‹è½½ã€‚\nTermux å®‰è£…ä½¿ç”¨åŸºäºå›½å…‰å¤§ä½¬çš„ Termux é«˜çº§ç»ˆç«¯å®‰è£…ä½¿ç”¨é…ç½®æ•™ç¨‹ ï¼›å†™çš„éå¸¸å…¨ï¼Œå¼ºçƒˆæ¨èè§‚çœ‹ï¼ï¼ï¼\næ›´æ¢æ¸…åæº æ‰“å¼€ Termux è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š\nsed -i \u0026#39;s@^\\(deb.*stable main\\)$@#\\1\\ndeb https://mirrors.tuna.tsinghua.edu.cn/termux/termux-packages-24 stable main@\u0026#39; $PREFIX/etc/apt/sources.list sed -i \u0026#39;s@^\\(deb.*games stable\\)$@#\\1\\ndeb https://mirrors.tuna.tsinghua.edu.cn/termux/game-packages-24 games stable@\u0026#39; $PREFIX/etc/apt/sources.list.d/game.list sed -i \u0026#39;s@^\\(deb.*science stable\\)$@#\\1\\ndeb https://mirrors.tuna.tsinghua.edu.cn/termux/science-packages-24 science stable@\u0026#39; $PREFIX/etc/apt/sources.list.d/science.list pkg update å®‰è£…åŸºç¡€å·¥å…·ï¼š\npkg update pkg install -y curl wget å®‰è£… Git è¿›è¡Œ Git å®‰è£…ï¼š\npkg update pkg install -y git åˆ›å»ºç›®å½•è½¯é“¾æ¥ ä¸ºäº†æ–¹ä¾¿ç®¡ç†ï¼Œæˆ‘ä»¬ä½¿ç”¨æ–‡ä»¶ç®¡ç†å™¨åœ¨æ‰‹æœºå­˜å‚¨æ ¹ç›®å½•ä¸‹åˆ›å»º termux æ–‡ä»¶å¤¹ï¼Œç„¶åè¿›è¡Œè½¯é“¾æ¥ï¼š\ntermux-setup-storage æ‰§è¡Œä»¥ä¸Šå‘½ä»¤ï¼Œä¼šå¼¹å‡ºæˆæƒçª—å£ï¼Œç¡®è®¤æˆæƒå Termux å°±å¯ä»¥è®¿é—® SD å¡æ–‡ä»¶ï¼Œç„¶åä¸ºåˆ›å»ºçš„ termux ç›®å½•åˆ›å»ºè½¯é“¾æ¥ï¼š\nln -s /data/data/com.termux/files/home/storage/shared/termux termux æ‰§è¡Œå®Œä¸Šè¿°å‘½ä»¤åï¼Œå°±ä¼šåœ¨ ~ ç›®å½•ä¸‹åˆ›å»º termux å¿«æ·æ–¹å¼ï¼Œæ­¤ç›®å½•æ˜¯é“¾æ¥åˆ°æˆ‘ä»¬åˆšæ‰åˆ›å»ºçš„ termux ç›®å½•ï¼Œæ–¹ä¾¿è¿›è¡Œç®¡ç†ã€‚\nå®‰è£… Hugo pkg update pkg install -y hugo ä¸Šè¿°æ“ä½œéƒ½å®Œæˆåï¼Œå°±å¯ä»¥åœ¨ Android ç«¯ä½¿ç”¨ Hugo äº†ã€‚\nGit é…ç½® å…¨å±€è´¦æˆ·é…ç½® åœ¨ä½¿ç”¨ Git ä¹‹å‰éœ€è¦è¿›è¡Œè´¦æˆ·é…ç½®ï¼Œè®© Github çŸ¥é“ä½ æ˜¯è°ï¼š\ngit config --global user.name username # usernameä¸ºä½ çš„ Github ç”¨æˆ·å git config --global user.email xx@email.com # XX@email.comä¸ºä½ æ³¨å†Œ Github çš„é‚®ç®± æ³¨æ„ï¼Œè¿™é‡Œæ˜¯å…¨å±€è®¾ç½®ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ æ‰€æœ‰çš„æœ¬åœ°ä»“åº“æ¨é€æ—¶éƒ½æ˜¯ä½¿ç”¨è¿™ä¸ªç”¨æˆ·å’Œé‚®ç®±\næ·»åŠ å¯†é’¥å¯¹ é”®å…¥å¦‚ä¸‹å‘½ä»¤åˆ›å»ºå¯†é’¥å¯¹ï¼š\nssh-keygen -t ed25519 -C \u0026#34;email\u0026#34; æ¥ä¸‹æ¥ä¸€è·¯å›è½¦å³å¯ã€‚\nå…¬é’¥æ·»åŠ è‡³ Github è¾“å…¥ cat ~/.ssh/id_ed25519.pub æŸ¥çœ‹å…¬é’¥å†…å®¹ï¼Œç„¶åå¤åˆ¶ï¼›æ‰“å¼€ Github ç‚¹å‡»ï¼š å³ä¸Šè§’å¤´åƒ - Settings - SSH and GPG keys - New SSH Key æŠŠåˆšæ‰å¤åˆ¶çš„å…¬é’¥ç²˜è´´åˆ° Key ä¸­ï¼Œå‘½åéšæ„ï¼Œç„¶åä¿å­˜ã€‚\nè¯¦ç»†å›¾æ–‡è¿‡ç¨‹å¯ä»¥å‚è€ƒ è¿™é‡Œ æœ¬åœ°ä»“åº“é…ç½® å› ä¸ºæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª Termux è½¯é“¾æ¥ï¼Œä¸ºäº†æ–¹ä¾¿ç®¡ç†ï¼Œæˆ‘å°† Hugo åšå®¢ä»“åº“æ”¾åœ¨æ­¤ç›®å½•ä¸­ï¼Œæ‰“å¼€ Termux è¿›å…¥åˆ° termux ç›®å½•ï¼Œåˆ›å»ºåšå®¢ç›®å½•ï¼Œå¹¶è®¾ç½®ä¸º Git é¡¹ç›®ä»“åº“ï¼š\ncd termux mkdir -p hugo/blog(é¡¹ç›®åï¼Œæˆ‘ä»¥ blog ä¸ºä¾‹) cd blog git init è¿™æ—¶å€™æ‰“å¼€æ–‡ä»¶ç®¡ç†å™¨ï¼Œè¿›å…¥ termux ç›®å½•ï¼Œå¯ä»¥çœ‹åˆ°é‡Œé¢å·²ç»åˆ›å»ºäº† hugo/blog ç›®å½•ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬çš„ Hugo åšå®¢ä»“åº“äº†ã€‚\nç”±äº Github ç°åœ¨é»˜è®¤çš„åˆ†æ”¯æ˜¯ main æ‰€ä»¥æˆ‘ä¹Ÿè®¾ç½®æœ¬åœ°åˆ†æ”¯ä¸º mainï¼š\ngit branch -m main è¿™ä¸ªæ—¶å€™å¯èƒ½ä¼šæç¤ºæ·»åŠ åˆ°å®‰å…¨ä»“åº“ï¼š\nInitialized empty Git repository in /storage/emulated/0/termux/hugo/blog/.git/ âœ blog git branch -m main fatal: detected dubious ownership in repository at \u0026#39;/storage/emulated/0/termux/hugo/blog/\u0026#39; To add an exception for this directory, call: git config --global --add safe.directory /storage/emulated/0/termux/hugo/blog æŒ‰ç…§æç¤ºè¾“å…¥å‘½ä»¤æ·»åŠ åˆ°å®‰å…¨ä»“åº“å³å¯ï¼š\ngit config --global --add safe.directory /storage/emulated/0/termux/hugo/blog æ·»åŠ å®Œæˆåå†æ›´æ¢åˆ†æ”¯åï¼š\ngit branch -m main æ·»åŠ è¿œç¨‹ä»“åº“ git remote add origin git@github.com:username/repositories.git # usernameæ¢æˆä½ çš„githubç”¨æˆ·åï¼Œrepositoriesæ›´æ¢ä¸ºä½ çš„ä»“åº“å æ‹‰å–è¿œç¨‹ä»“åº“ è¾“å…¥ä¸‹é¢å‘½ä»¤å°†è¿œç¨‹ä»“åº“çš„ä»£ç æ‹‰å–åˆ°æœ¬åœ°ï¼š\ngit pull origin main æ‹‰å–å®Œæˆä¹‹åï¼Œè¿˜éœ€è¦å°†æˆ‘ä»¬æ·»åŠ çš„ä¸»é¢˜ clone ä¸‹æ¥ï¼Œå› ä¸ºä¹‹å‰æ—¶é€šè¿‡ git submodule è¿›è¡Œé“¾æ¥çš„ï¼›æ¯”å¦‚æˆ‘åœ¨ç”¨çš„ zzo ä¸»é¢˜ï¼š\ngit clone https://github.com/zzossig/hugo-theme-zzo.git themes/zzo å®Œæˆä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ Android ç«¯è¿›è¡Œå†™ä½œäº†ã€‚\næœ¬åœ°é¢„è§ˆåŠæ¨é€ æœ¬åœ°é¢„è§ˆ åœ¨ Android ç«¯å†™ä½œå®Œæˆåï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ hugo server å‘½ä»¤è¿›è¡Œæœ¬åœ°é¢„è§ˆï¼Œä½†æ˜¯åœ¨ termux ä¸‹ä¸å¤ªä¸€æ ·ï¼Œç›´æ¥è¿è¡Œ hugo server ä¼šæŠ¥é”™ï¼Œæ‰€ä»¥è¦åŠ ä¸Šä¸€ä¸ª noBuildLock å‚æ•°ï¼š\nhugo server --noBuildLock é€šè¿‡ä¸Šè¿°å‘½ä»¤ï¼Œå³å¯åœ¨ Android ç«¯é€šè¿‡ localhost:1313 è¿›è¡Œæœ¬åœ°é¢„è§ˆï¼ŒåŒç†ï¼Œå¦‚æœä½ è¦é€šè¿‡ hugo ç”Ÿæˆé™æ€æ–‡ä»¶ï¼Œä¹Ÿæ˜¯éœ€è¦æ·»åŠ  noBuildLock å‚æ•°ã€‚\næ¨é€ åœ¨å†™ä½œå®ŒæˆåŠé¢„è§ˆæ— è¯¯åï¼Œå°±å¯ä»¥è¿›è¡Œæ¨é€åˆ°è¿œç¨‹ä»“åº“äº†ã€‚ä¸æ¡Œé¢ç«¯ä¸€æ ·ï¼Œé€šè¿‡ push è¿›è¡Œæ¨é€ï¼š\ngit add . git commit -m \u0026#34;xxxx\u0026#34; git push origin main æ¨é€å®Œæˆåï¼Œç­‰å¾… Github Actions è‡ªåŠ¨éƒ¨ç½²å®Œæˆåï¼Œå³å¯è¿›è¡Œè®¿é—®ã€‚\næ€»ç»“ ä»¥ä¸Šå°±æ˜¯æˆ‘åœ¨ä¸åŒå®¢æˆ·ç«¯é€šè¿‡ Git è¿›è¡ŒåŒæ­¥æ•°æ®ã€å†™ä½œçš„è¿‡ç¨‹äº†ï¼Œå¸Œæœ›èƒ½ç»™å¤§å®¶æä¾›ä¸€ä¸ªå‚è€ƒã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼šä¸€å®šè¦è®°å¾—ï¼Œåœ¨ä¸åŒçš„å®¢æˆ·ç«¯ä¸‹ï¼Œç¬¬ä¸€ä»¶äº‹æ˜¯é€šè¿‡ git pull å°†è¿œç¨‹ä»“åº“æ‹‰å–åŒæ­¥åˆ°æœ¬åœ°ä»“åº“ï¼Œç„¶åå†è¿›è¡Œå†™ä½œ\nå‚è€ƒèµ„æ–™ Termux é«˜çº§ç»ˆç«¯å®‰è£…ä½¿ç”¨é…ç½®æ•™ç¨‹ é€šè¿‡ SSH è¿æ¥åˆ° GitHub ","date":"2022-11-01T13:18:02+08:00","permalink":"/archives/how_to_write/","title":"æˆ‘å†™åšå®¢çš„æ–¹å¼"},{"content":"å‰è¨€ ä¹‹å‰è®²äº†é€šè¿‡ Vercel æ¥è¿›è¡Œ Waline æœåŠ¡ç«¯çš„éƒ¨ç½²ï¼Œè¿™æ˜¯æœ€ç®€å•ï¼Œä¹Ÿæ˜¯å®Œå…¨å…è´¹çš„æ–¹æ³•ï¼›ä½†æ˜¯å¯¹äºæ‹¥æœ‰è‡ªå·±æœåŠ¡å™¨çš„äººæ¥è¯´ï¼Œå¯èƒ½æ›´æƒ³è¦å°† Waline ç›´æ¥éƒ¨ç½²åˆ°è‡ªå·±çš„æœåŠ¡å™¨ä¸Šï¼›æ¯•ç«ŸæœåŠ¡å™¨æ‘†åœ¨é‚£ï¼Œä¸ç”¨ä¹Ÿæ˜¯æµªè´¹ï¼Œä½•ä¸å°† Waline æœåŠ¡ç«¯ä¹Ÿéƒ¨ç½²è‡ªå·±çš„æœåŠ¡å™¨ä¸Šä»¥æ–¹ä¾¿è¿›è¡Œç®¡ç†å‘¢ï¼Ÿå…¶å® Waline æä¾›äº†å¾ˆå¤šçš„éƒ¨ç½²æ–¹æ¡ˆï¼Œå¯ä»¥çœ‹ è¿™é‡Œ ï¼›å› ä¸ºæˆ‘ä¸€ç›´ä½¿ç”¨çš„ Caddy æ‰€ä»¥æˆ‘å°±ç”¨ Caddy+MariaDB/MySQL çš„æ–¹å¼æ¥æ­å»ºï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹è¸©å‘è¿‡ç¨‹ï¼›å½“ç„¶ä½ ä½¿ç”¨ Nginx/Apache åŠ ä¸Šå…¶ä»–æ•°æ®åº“çš„ç»„åˆä¹Ÿæ˜¯å¯ä»¥çš„ã€‚\néƒ¨ç½²è¿‡ç¨‹ å‡†å¤‡å·¥ä½œ åŸŸåè§£æè¿™å—å°±ä¸å¤šè®²äº†ï¼Œæå‰ç»‘å®šåˆ°ä½ çš„æœåŠ¡å™¨ IP ï¼›æœåŠ¡å™¨åŸºæœ¬é…ç½®ä¸ä¼˜åŒ–å¯ä»¥å‚è€ƒ è¿™é‡Œ ï¼›è‡³äº Web æœåŠ¡è¿™å—ï¼Œå¦‚æœä½ ä½¿ç”¨ Nginx/Apache+MariaDB/MySQL å¯ä»¥çœ‹ è¿™é‡Œ æ­å»ºå¥½ Web æœåŠ¡ä¸æ•°æ®åº“ã€‚\nå¦‚æœä½ æƒ³å’Œæˆ‘ä¸€æ ·ä½¿ç”¨ Caddy Server é‚£ä¹ˆä½ å¯ä»¥å‚è€ƒ è¿™é‡Œ å…ˆæ­å»º Caddy Server ï¼›ç„¶åæ¥å®‰è£…æ•°æ®åº“ï¼Œæˆ‘è¿™é‡Œä»¥ MariaDB/MySQL ä¸ºä¾‹ï¼š\napt update apt install mariadb-server -y å®‰è£…å®Œ MariaDB åï¼Œé”®å…¥ä»¥ä¸‹å‘½ä»¤æ¥è¿›è¡Œåˆå§‹åŒ–ï¼š\nmysql_secure_installation ç„¶åæ ¹æ®ä¸‹é¢æç¤ºè¿›è¡Œæ“ä½œï¼š\nmysql_secure_installation Enter current password for root (enter for none): # è¾“å…¥æ•°æ®åº“å¯†ç ï¼Œç”±äºå¹¶æœªè®¾ç½®ï¼Œæ‰€ä»¥ç›´æ¥å›è½¦ Set root password? [Y/n] y # æ˜¯å¦è®¾ç½®æ•°æ®åº“ root å¯†ç  New password: Re-enter new password: # è¾“å…¥ä¸¤æ¬¡æ•°æ®åº“ root å¯†ç  Remove anonymous users? [Y/n] y # æ˜¯å¦ç§»é™¤åŒ¿åç”¨æˆ· Disallow root login remotely? [Y/n] y # æ˜¯å¦ç¦ç”¨ root è¿œç¨‹ç™»é™† Remove test database and access to it? [Y/n] y # æ˜¯å¦ç§»é™¤æµ‹è¯•æ•°æ®åº“ Reload privilege tables now? [Y/n] y # æ˜¯å¦åˆå§‹åŒ–æ•°æ®åº“ All done! If you\u0026#39;ve completed all of the above steps, your MariaDB installation should now be secure. Thanks for using MariaDB! å¦‚æœä½ éœ€è¦ç”¨è½¯ä»¶è¿›è¡Œè¿œç¨‹ç®¡ç†æ•°æ®åº“ï¼Œé‚£ä¹ˆå°±ä¸è¦ç¦ç”¨è¿œç¨‹ç™»é™†ï¼Œå¹¶ä¸”éœ€è¦é€šè¿‡é˜²ç«å¢™æ¥å¼€æ”¾ 3306 ç«¯å£\nå®‰è£… Nodejs è¿™é‡Œè¦æ³¨æ„ï¼Œä¸è¦ç›´æ¥ä½¿ç”¨ apt install è¿›è¡Œå®‰è£…ï¼Œä¼šå¯¼è‡´åé¢æŠ¥é”™ï¼Œå…·ä½“åŸå› æˆ‘ä¹Ÿä¸çŸ¥é“ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡åŒ…ç®¡ç†å™¨ã€äºŒè¿›åˆ¶æ–‡ä»¶æˆ–è€…æºç ç¼–è¯‘è¿›è¡Œå®‰è£…ã€‚\nåŒ…ç®¡ç†å™¨å®‰è£… è¾“å…¥ä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…ï¼š\napt-get update apt-get install -y ca-certificates curl gnupg mkdir -p /etc/apt/keyrings curl -fsSL https://deb.nodesource.com/gpgkey/nodesource-repo.gpg.key | gpg --dearmor -o /etc/apt/keyrings/nodesource.gpg NODE_MAJOR=16 echo \u0026#34;deb [signed-by=/etc/apt/keyrings/nodesource.gpg] https://deb.nodesource.com/node_$NODE_MAJOR.x nodistro main\u0026#34; | tee /etc/apt/sources.list.d/nodesource.list apt-get update apt-get install nodejs -y å…¶ä¸­ NODE_MAJOR=16 å¯ä»¥è‡ªè¡Œé€‰æ‹©ç‰ˆæœ¬ï¼š\nNODE_MAJOR=16 NODE_MAJOR=18 NODE_MAJOR=20 NODE_MAJOR=21 å®‰è£…å®Œæˆåå¯é€šè¿‡ node-v ã€nmp versionã€npx -v æ£€éªŒå®‰è£…\nå¸è½½ï¼š\napt-get purge nodejs \u0026amp;\u0026amp;\\ rm -r /etc/apt/sources.list.d/nodesource.list \u0026amp;\u0026amp;\\ rm -r /etc/apt/keyrings/nodesource.gpg äºŒè¿›åˆ¶å®‰è£… ä» Nodejså®˜ç½‘ ä¸‹è½½äºŒè¿›åˆ¶åŒ…ï¼Œé€šè¿‡åˆ›å»ºè½¯é“¾æ¥è‡³ç³»ç»Ÿç”¨æˆ·åº”ç”¨ç¨‹åºç›®å½•æ¥ä½¿ç”¨ã€‚\næ‰“å¼€ Nodejs å®˜ç½‘ï¼Œç‚¹å‡» Downloads ç„¶åå³é”®å¤åˆ¶ Linux Binaries (x64) çš„ä¸‹è½½é“¾æ¥ï¼š\nç„¶åå›åˆ° SSH è½¯ä»¶ï¼Œä½¿ç”¨ wget å‘½ä»¤ï¼Œä¸‹è½½åˆ°ä»»æ„ä½ç½®å¹¶è¿›è¡Œè§£å‹ç„¶ååˆ é™¤å‹ç¼©åŒ…ï¼›æˆ‘è¿™é‡Œä»¥ /usr/local/src ä¸ºä¾‹ï¼š\ncd /usr/local/src # è¿›å…¥ç›®å½• wget https://nodejs.org/dist/v16.18.0/node-v16.18.0-linux-x64.tar.xz # ä¸‹è½½äºŒè¿›åˆ¶åŒ… tar -Jxvf node-v16.18.0-linux-x64.tar.xz # è§£å‹ mv node-v16.18.0-linux-x64 node # é‡å‘½åæ–‡ä»¶å¤¹ ç¼–è¾‘ ~/.bashrc è®¾ç½®ç¯å¢ƒå˜é‡ï¼ŒåŠ å…¥ï¼š\nexport PATH=/usr/local/src/node/bin:$PATH export CPATH=/usr/local/src/node/include:$CPATH export LD_LIBRARY_PATH=/usr/local/src/node/lib:$LD_LIBRARY_PATH åˆ·æ–°å˜é‡ç¯å¢ƒï¼š\nsource ~/.bashrc å®Œæˆåå¯é€šè¿‡ node -v ã€ npm version ã€ npx -v è¿›è¡ŒéªŒè¯ï¼Œè¿”å›ç‰ˆæœ¬å·åˆ™è¡¨ç¤ºæˆåŠŸã€‚\næºç ç¼–è¯‘å®‰è£… é¦–å…ˆå®‰è£…ä¾èµ–ï¼š\napt-get install python3 g++ make python3-pip æ‰“å¼€ Nodejså®˜ç½‘ ï¼Œå¤åˆ¶ Source Code æºç ä¸‹è½½åœ°å€ï¼Œæ¥ç€è¿›è¡Œæ“ä½œï¼š\ncd /usr/local/src wget https://nodejs.org/dist/v20.10.0/node-v20.10.0.tar.gz tar zxvf node-v20.10.0.tar.gz mv node-v20.10.0 node cd node ./configure --prefix=/usr/local/node screen -S node make \u0026amp;\u0026amp; make install å®‰è£…å®Œæˆä¹‹åä¸ºè½¯ä»¶è®¾ç½®ç¯å¢ƒå˜é‡ï¼š\nvim ~/.bashrc åœ¨æœ€åæ·»åŠ ï¼š\nexport PATH=/usr/local/node/bin:$PATH export CPATH=/usr/local/node/include:$CPATH export LD_LIBRARY_PATH=/usr/local/node/lib:$LD_LIBRARY_PATH å¯ä»¥ä¸ºè½¯ä»¶è®¾ç½®ä¸ªè½¯é“¾æ¥ï¼š\nln -s /usr/local/node/bin/node /usr/bin/node ln -s /usr/local/node/bin/npm /usr/bin/npm ln -s /usr/local/node/bin/npx /usr/bin/npx åˆ·æ–°å˜é‡ç¯å¢ƒï¼š\nsource ~/.bashrc æºç ç¼–è¯‘å®‰è£…æ¯”è¾ƒè´¹æ—¶ï¼Œå…·ä½“æ—¶é—´è§†æœºå™¨é…ç½®è€Œå®šï¼Œå¯é…Œæƒ…é€‰æ‹©å®‰è£…æ–¹å¼ã€‚\nå®‰è£… Waline æŒ‰ç…§å®˜æ–¹ç»™å‡ºçš„ç‹¬ç«‹éƒ¨ç½²ä¸­ç›´æ¥è¿è¡Œçš„æ–¹æ¡ˆï¼Œè¿›å…¥ä½ æƒ³è¦å®‰è£…çš„ä½ç½®ï¼Œå®‰è£…å¥½æ¨¡å—åç›´æ¥è¿è¡Œæ¨¡å—å†…çš„ vanilla.js æ–‡ä»¶ï¼š\ncd /usr/local/node/lib npm install -g @waline/vercel å›½å†…æœåŠ¡å™¨è¯·å…ˆå°† npm è®¾ç½®ä¸ºå›½å†…é•œåƒï¼ï¼ï¼\næ›´æ¢é•œåƒ ä¸´æ—¶æ›´æ¢ npm --registry https://registry.npmmirror.com install -g @waline/vercel æ°¸ä¹…æ›´æ¢ npm config set registry https://registry.npmmirror.com è¿˜åŸ npm é•œåƒ npm config set registry https://registry.npmjs.org/ ä¸‹è½½å®Œæˆåï¼Œå¯ä»¥è¯•ç€è¿è¡Œä¸€ä¸‹ï¼š\nnode node_modules/@waline/vercel/vanilla.js æˆåŠŸçš„è¯å¯ä»¥çœ‹åˆ°æç¤ºï¼š\næ­¤æ—¶ä½ å¯ä»¥é€šè¿‡ IP:8360 è¿›è¡Œè®¿é—®ï¼›ä¸è¦ç€æ€¥ï¼ŒæŒ‰æºä¸‹ä½ çš„å°æ¿€åŠ¨ï¼ŒæŒ‰ä¸‹ CTRL+C å…³é—­ï¼Œç„¶åè·Ÿç€æˆ‘ç»§ç»­è¿›è¡Œé…ç½®ã€‚\né…ç½®æ•°æ®åº“ åˆ°å®˜æ–¹æ–‡æ¡£çš„ å¤šæ•°æ®åº“æœåŠ¡æ”¯æŒ ä¸‹è½½æˆ‘ä»¬å¯¹åº”æ•°æ®åº“çš„æ•°æ®æ–‡ä»¶ï¼Œæˆ‘è¿™é‡Œç”¨çš„ MariaDB(MySQL) æ‰€ä»¥ä¸‹è½½ waline.sql ç„¶åè¿›è¡Œå¯¼å…¥æ•°æ®ï¼š\næ³¨æ„ï¼šå°†æºä»£ç ç›´æ¥å¤åˆ¶ç„¶åè‡ªå·±è¿›è¡Œç¼–è¾‘ä¸Šä¼ ï¼Œä¸è¦ç›´æ¥ä½¿ç”¨ wget è¿›è¡Œä¸‹è½½ã€‚\nmysql -uroot -p # ç™»é™†æ•°æ®åº“ Enter password: # è¾“å…¥å¯†ç  CREATE DATABASE waline; # åˆ›å»º waline æ•°æ®åº“ USE waline; # æŒ‡å®šæ•°æ®åº“ source /path/waline.sql # å¯¼å…¥æ–‡ä»¶ï¼Œ/pathæ”¹ä¸ºä½ çš„è·¯å¾„ quit # é€€å‡ºæ•°æ®åº“ åˆ›å»ºç”¨æˆ·åï¼Œå¯†ç å¹¶èµ‹äºˆ waline æ•°æ®åº“çš„æƒé™(å¯é€‰)\nmysql -uroot -p Enter password: CREATE USER \u0026#39;waline\u0026#39;@\u0026#39;%\u0026#39; IDENTIFIED BY \u0026#39;å¯†ç \u0026#39;; GRANT ALL PRIVILEGES ON waline.* TO \u0026#39;waline\u0026#39;@\u0026#39;%\u0026#39;; flush privileges; quit é…ç½® systemd æœåŠ¡ ä¸ºäº†æ–¹ä¾¿ Waline çš„æ­£å¸¸è¿è¡Œä¸ç®¡ç†ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯ systemd æœåŠ¡è¿›è¡Œç®¡ç†ï¼Œåˆ›å»ºæ–‡ä»¶å¹¶è¿›è¡Œç¼–è¾‘(æ‹¿ä¸å‡†çš„å¯ä»¥åœ¨æœ¬åœ°æ–°å»ºæ–‡ä»¶ï¼Œç¼–è¾‘ä¹‹åä¸Šä¼ )ï¼š\ncd /usr/lib/systemd/system/ vim waline.service æ¨¡æ¿å¦‚ä¸‹ï¼š\n[Unit] Description=Waline [Service] Type=simple ExecStart=[/path/to/node] [path/to/node_modules]/@waline/vercel/vanilla.js Restart=always Environment=PATH=/usr/bin:/usr/local/bin Environment=NODE_ENV=production Environment=MYSQL_DB=æ•°æ®åº“å Environment=MYSQL_USER=ç”¨æˆ·å Environment=MYSQL_PASSWORD=å¯†ç  WorkingDirectory=[/path/to/node_modules]/@waline/vercel [Install] WantedBy=multi-user.target å…¶ä¸­ï¼Œå ä½ç¬¦å†…å®¹å¦‚ä¸‹ï¼š\n[/path/to/node]ï¼šnode å¯æ‰§è¡Œæ–‡ä»¶ç»å¯¹è·¯å¾„ [path/to/node_modules]ï¼šé€šè¿‡ npm å®‰è£…æ¨¡å—ä½ç½® æˆ‘çš„é…ç½®å¦‚ä¸‹ï¼š\n[Unit] Description=Waline [Service] Type=simple ExecStart=/usr/bin/node /usr/local/node/lib/node_modules/@waline/vercel/vanilla.js Restart=always Environment=PATH=/usr/bin:/usr/local/bin Environment=NODE_ENV=production Environment=MYSQL_DB=æ•°æ®åº“å Environment=MYSQL_USER=ç”¨æˆ·å Environment=MYSQL_PASSWORD=å¯†ç  WorkingDirectory=/usr/local/node/lib/node_modules//@waline/vercel [Install] WantedBy=multi-user.target å¦‚æœä½ ä¹‹å‰æŒ‰ç…§æˆ‘çš„æ­¥éª¤æ¥å®‰è£… Node å’Œ Waline é‚£ä¹ˆç›´æ¥å°†è„šæœ¬å¤åˆ¶ç„¶åä¿®æ”¹å‚æ•°å³å¯ï¼Œå¦‚æœä½ çš„ä½ç½®å’Œæˆ‘ä¸ä¸€æ ·ï¼Œé‚£ä¹ˆå°±éœ€è¦å°† ExecStart å’Œ WorkingDirectory é¡¹ä¸­çš„è·¯å¾„æ¢æˆä½ è‡ªå·±çš„ã€‚ä¸ç¡®å®šå¯ä»¥ä½¿ç”¨å‘½ä»¤æŸ¥ä¸€ä¸‹ï¼š\nwhere is node # node ä½ç½® npm root -g # npm å…¨å±€å®‰è£…ä½ç½® åœ¨ [Service] é¡¹ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡ Environment ç›´æ¥æ·»åŠ  Waline æ’ä»¶çš„ç¯å¢ƒå˜é‡\nä¿å­˜/ä¸Šä¼ å®Œæ¯•åï¼Œè®© systemd é‡æ–°è½½å…¥å•å…ƒæ–‡ä»¶ï¼Œå¹¶å¯åŠ¨ Waline ï¼š\nsystemctl daemon-reload systemctl start waline æ­¤æ—¶å†è®¿é—® http://IP:8360 ï¼Œä½ å°±èƒ½çœ‹åˆ°è¯„è®ºé¡µé¢äº†ã€‚\nä¸€äº›å¸¸ç”¨çš„å‘½ä»¤ï¼š\nsystemctl stop waline # åœæ­¢æœåŠ¡ systemctl restart waline # é‡å¯æœåŠ¡ systemctl status waline # æœåŠ¡çŠ¶æ€ systemctl enable waline # æ·»åŠ å¼€æœºè‡ªå¯åŠ¨ åå‘ä»£ç†è®¾ç½® å¦‚æœä½ ä¸æƒ³é€šè¿‡ IP:8360 è¿›è¡Œè®¿é—®ï¼Œé‚£ä¹ˆå°±éœ€è¦è®¾ç½®åå‘ä»£ç†æ¥é€šè¿‡åŸŸåè¿›è¡Œè®¿é—®äº†è¿™é‡Œæä¾›ä¸¤ä¸ªé…ç½®ï¼š\nCaddy æˆ‘ä½¿ç”¨çš„æ˜¯ Caddy ï¼Œ Caddy åä»£éœ€è¦ä¿®æ”¹ /etc/caddy/Caddyfile æ–‡ä»¶ï¼š\ndomain.com { encode gzip reverse_proxy 127.0.0.1:8360 { header_up Host {host} header_up X-Real-IP {remote} header_up X-Forwarded-For {remote} header_up X-Forwarded-Proto https } file_server tls user@email.com } Nginx Nginx åå‘ä»£ç†å¦‚ä¸‹ï¼š\nlocation / { proxy_pass http://127.0.0.1:8360; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; proxy_set_header REMOTE-HOST $remote_addr; add_header X-Cache $upstream_cache_status; # cache add_header Cache-Control no-cache; expires 12h; } æ€»ç»“ ä»¥ä¸Šå°±æ˜¯æˆ‘é€šè¿‡ Caddy+MariaDB ç‹¬ç«‹éƒ¨ç½² Waline çš„è¿‡ç¨‹ï¼Œå¸Œæœ›èƒ½ç»™å¤§å®¶å¸¦æ¥å¸®åŠ©ã€‚åæœŸå¦‚æœéœ€è¦è®¾ç½®é‚®ä»¶é€šçŸ¥ç­‰åŠŸèƒ½å¯ä»¥åœ¨ waline.service æ–‡ä»¶ä¸­çš„ [Service] é¡¹ä¸‹ç›´æ¥æ·»åŠ  Environment= ç„¶åæ ¹æ®å®˜æ–¹ç»™å‡ºçš„ç¯å¢ƒå˜é‡è¿›è¡Œè®¾ç½®å³å¯ã€‚\nè‹¥ Waline åå°å‘ç°æœ‰æ›´æ–°æç¤ºï¼Œå¯é€šè¿‡ npm å¯¹ Waline è¿›è¡Œæ›´æ–°ï¼š\nnpm update @waline/vercel å‚è€ƒèµ„æ–™ Waline å®˜æ–¹æ–‡æ¡£ NodeSource - Node.js å®˜æ–¹äºŒè¿›åˆ¶å‘è¡Œç‰ˆ é€šè¿‡äºŒè¿›åˆ¶æ–‡ä»¶å®‰è£… Node.js Node åº”ç”¨çš„ Systemd å¯åŠ¨ ","date":"2022-10-20T10:50:47+08:00","permalink":"/archives/waline_deploy/","title":"Waline æœåŠ¡ç«¯ç‹¬ç«‹éƒ¨ç½²æ–¹æ¡ˆ"},{"content":"å‰è¨€ æˆ‘çš„åšå®¢ä½œä¸ºè‡ªå·±è®°å½•çš„åœ°æ–¹ï¼Œæ²¡æœ‰å»åš SEO ä¹Ÿæ²¡æœ‰å»è¿›è¡Œä¼˜åŒ–ï¼›å¯ä»¥è¯´å®Œå…¨æ²¡æœ‰å¿…è¦å»å¼€å¯è¯„è®ºï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆåˆæ·»åŠ äº†è¯„è®ºå‘¢ï¼Ÿæˆ‘è§‰å¾—ä¸‡ä¸€æœ‰äººçœ‹åˆ°äº†æˆ‘åšå®¢ä¸­çš„ä¸€äº›å†…å®¹ï¼Œæœ‰ä»€ä¹ˆæ²¡æœ‰äº†è§£çš„åœ°æ–¹ï¼Œæˆ–è€…è¯´æœ‰ä»€ä¹ˆåœ°æ–¹éœ€è¦è¿›è¡Œäº¤æµï¼Œéœ€è¦è¿›è¡Œç®€å•çš„è¯„è®ºè¯¥æ€ä¹ˆåŠï¼Ÿä¸ºäº†è¿™ä¸€ä¸¤å¥è¯ä¸å¯èƒ½å»åˆ°é‚®ç®±é‡Œè·Ÿä½ è¿›è¡Œæ·±åº¦äº¤æµï¼Œäºæ˜¯æœ€åè¿˜æ˜¯å†³å®šå¼€å¯è¯„è®ºåŠŸèƒ½ï¼Œå¹¶å†æ­¤è¿›è¡Œä¸€ä¸ªåˆ†äº«ã€‚\nè¯„è®ºç³»ç»Ÿé€‰æ‹© å¯¹äºè¯„è®ºç³»ç»Ÿï¼Œæˆ‘çš„æ„Ÿè§‰æ˜¯ä¸€å®šè¦ä¾¿æ·ï¼Œå¡«ä¸Šæ˜µç§°ï¼Œé‚®ä»¶ç­‰å°±å¯ä»¥è¿›è¡Œè¯„è®ºï¼Œä¸éœ€è¦è¿›è¡Œæ³¨å†Œç­‰ç¹çæ“ä½œï¼› Hugo ä¸­ä¹Ÿæœ‰è®¸å¤šè‡ªå¸¦çš„è¯„è®ºç³»ç»Ÿï¼Œä½†æ˜¯å¤§å¤šæ•°éƒ½æ˜¯æµ·å¤–çš„ï¼Œä½¿ç”¨èµ·æ¥å¾ˆä¸æ–¹ä¾¿ã€‚æœ€ç»ˆå†³å®šä½¿ç”¨åŸºäº Valine çš„ Waline ï¼›ä¸‹é¢å°±æ¥è®²ä¸€ä¸‹æˆ‘è‡ªå·±é…ç½®çš„è¿‡ç¨‹ã€‚\né€šç”¨é…ç½® æ³¨å†Œ LeanCloud LeanCloud å›½é™…ç‰ˆ æ¨èä½¿ç”¨å›½é™…ç‰ˆï¼Œå›½å†…ç‰ˆçš„è¯éœ€è¦ç»‘å®šå·²å¤‡æ¡ˆåŸŸåï¼Œæ¯”è¾ƒéº»çƒ¦ã€‚ã€‚ã€‚é¦–å…ˆ ç™»é™† æˆ– æ³¨å†Œ LeanCloudå›½é™…ç‰ˆ å¹¶è¿›å…¥ æ§åˆ¶å° è¿›å…¥æ§åˆ¶å°åï¼Œç‚¹å‡»åˆ›å»ºåº”ç”¨ï¼Œè¾“å…¥ä½ å–œæ¬¢çš„åº”ç”¨åç§°ï¼Œé€‰æ‹©å¼€å‘ç‰ˆï¼Œç„¶åç‚¹å‡»åˆ›å»ºï¼š\nè¿›å…¥åº”ç”¨ï¼Œé€‰æ‹©å·¦ä¸‹è§’çš„ è®¾ç½® \u0026gt; åº”ç”¨å‡­è¯ ã€‚ä½ å¯ä»¥çœ‹åˆ°ä½ çš„å„ç§å‡­è¯ï¼Œå…ˆæ”¾åœ¨è¿™é‡Œï¼Œåé¢ä¼šç”¨ä¸Šï¼š\nè¯„è®ºç³»ç»Ÿé…ç½® Valine é…ç½® ä¸€èˆ¬æ¥è¯´ Valine æ˜¯ Hugo ä¸»é¢˜é‡Œè‡ªå¸¦é›†æˆçš„ï¼Œå»ç¨å¾®é…ç½®ä¸‹å°±å¯ä»¥ä½¿ç”¨äº†ï¼›ä»¥æˆ‘æ­£åœ¨ä½¿ç”¨çš„ Zzo ä¸»é¢˜æ¼”ç¤ºã€‚æ‰“å¼€åšå®¢æ ¹ç›®å½•ï¼Œæ‰¾åˆ° config/_default æ‰“å¼€ params.toml é…ç½®æ–‡ä»¶ï¼Œç„¶åæŒ‰ç…§ä¸‹é¢æ³¨é‡Šè¿›è¡Œä¿®æ”¹ï¼š\næœ‰çš„ä¸»é¢˜å°±æ˜¯åœ¨æ ¹ç›®å½•çš„ config.toml ï¼Œéœ€è¦è‡ªå·±å»æŸ¥çœ‹ï¼›æ‰€æœ‰ä¿®æ”¹åº”è¯¥åŸºäºåšå®¢æ ¹ç›®å½•ï¼Œä¸è¦å»åŠ¨ä¸»é¢˜ä¸­çš„æ–‡ä»¶ï¼›æ¸²æŸ“æ—¶ä¼šå¯¹ä¸»é¢˜ç›®å½•çš„é…ç½®è¿›è¡Œè¦†ç›–ï¼Œå³ï¼šå°†ä¸»é¢˜ä¸­éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶å¤åˆ¶åˆ°åšå®¢æ ¹ç›®å½•å¯¹åº”ä½ç½®ï¼Œå†ä¿®æ”¹åšå®¢æ ¹ç›®å½•æ–‡ä»¶ã€‚\n# comment enableComment = true # å¼€å¯è¯„è®º disqus_shortname = \u0026#34;\u0026#34; commento = false # Valine. # You can get your appid and appkey from https://leancloud.cn # more info please open https://valine.js.org [valine] enable = true # å¼€å¯ Valine appId = \u0026#39;\u0026#39; # AppID ä¸º ä½ åœ¨ LeanCloud åº”ç”¨å‡­è¯ä¸­çš„ AppLD appKey = \u0026#39;\u0026#39; # AppKey ä¸º ä½ åœ¨ LeanCloud åº”ç”¨å‡­è¯ä¸­çš„ AppKey notify = false # verify = false # avatar = \u0026#39;mp\u0026#39; placeholder = \u0026#39;è¯´ç‚¹ä»€ä¹ˆå§...\u0026#39; visitor = false é…ç½®é¡¹åŠå‚æ•°å‚è€ƒï¼š é…ç½®é¡¹ ä¸€èˆ¬æ¥è¯´ï¼Œä¸»é¢˜çš„ Valine è¯„è®ºç³»ç»Ÿï¼Œç›´æ¥åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ç›¸åº”çš„å‚æ•°å¼€å¯å³å¯ã€‚å¦‚æœä¸æ˜¯è‡ªå¸¦çš„å¯ä»¥å¾€ä¸‹çœ‹ Waline çš„æ“ä½œã€‚\nWaline é…ç½® é€šè¿‡ Vercel éƒ¨ç½²æœåŠ¡ç«¯ è¿™ä¸€éƒ¨åˆ†å¯ä»¥ç›´æ¥çœ‹å®˜æ–¹ç»™å‡ºçš„æ•™ç¨‹ éƒ¨ç½² ( æœåŠ¡ç«¯ ) å¼•å…¥ Waline åŠé…ç½® æˆ‘æ­£åœ¨ç”¨çš„ Zzo ä¸»é¢˜æ˜¯ä¸è‡ªå¸¦ Waline çš„ï¼Œæ‰€ä»¥æˆ‘å°±è¦è¿›è¡Œå¼•å…¥ï¼›Zzo ä¸»é¢˜å…³äºè¯„è®ºç³»ç»Ÿçš„æ–‡ä»¶å¤¹ä¸æ–‡ä»¶åˆ†åˆ«ä¸ºï¼š\n~/themes/zzo/layouts/partials/comments ~/themes/zzo/layouts/partials/comments/comments.html ~/config/_default/params.toml å’Œä¸Šæ–‡ä¸€æ ·ï¼Œä¿®æ”¹ä¸»é¢˜çš„åŸåˆ™æ˜¯å°†ä¸»é¢˜ç›®å½•ä¸­çš„æ–‡ä»¶å¤åˆ¶åˆ°ä½ åšå®¢æ‰€åœ¨æ ¹ç›®å½•çš„ç›¸åŒä½ç½®è¿›è¡Œä¿®æ”¹ï¼Œä¸è¦å¯¹ä¸»é¢˜æ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶è¿›è¡Œç›´æ¥ä¿®æ”¹ï¼›è¿™æ ·åšçš„å¥½å¤„æ˜¯ä»¥åæ›´æ–°ä¸»é¢˜æ—¶ï¼Œä½ æ‰€åšçš„ä¿®æ”¹ä¸ä¼šè¢«è¦†ç›–ã€‚\né¦–å…ˆæ‰“å¼€ä¸»é¢˜æ–‡ä»¶å¤¹çš„ layouts/partials/comments æ‰¾åˆ° comments.html å’Œ valine.html å°†å…¶å¤åˆ¶åˆ°åšå®¢æ ¹ç›®å½•å¯¹åº”ä½ç½®ï¼Œå…ˆæ‰“å¼€ comment.html è¿›è¡Œç¼–è¾‘ï¼ŒæŒ‰ç…§ç›¸åŒçš„æ ¼å¼ï¼ŒåŠ ä¸Š Walineï¼š\n{{ if $.Param \u0026#34;enableComment\u0026#34; }} {{ if $.Param \u0026#34;disqus_shortname\u0026#34; }} {{ partial \u0026#34;comments/disqus.html\u0026#34; . }} {{ else if $.Param \u0026#34;commento\u0026#34; }} {{ partial \u0026#34;comments/commento.html\u0026#34; . }} {{ else if $.Param \u0026#34;valine.enable\u0026#34; }} {{ partial \u0026#34;comments/valine.html\u0026#34; . }} {{ else if $.Param \u0026#34;changyan.changyanAppid\u0026#34; }} {{ partial \u0026#34;comments/changyan.html\u0026#34; . }} {{ else if $.Param \u0026#34;livere.livereUID\u0026#34; }} {{ partial \u0026#34;comments/livere.html\u0026#34; . }} {{ else if $.Param \u0026#34;gitment.owner\u0026#34; }} {{ partial \u0026#34;comments/gitment.html\u0026#34; . }} {{ else if $.Param \u0026#34;gitalk.owner\u0026#34; }} {{ partial \u0026#34;comments/gitalk.html\u0026#34; . }} {{ else if $.Param \u0026#34;utterances.owner\u0026#34; }} {{ partial \u0026#34;comments/utterances.html\u0026#34; . }} {{ else if $.Param \u0026#34;isso.enable\u0026#34; }} {{ partial \u0026#34;comments/isso.html\u0026#34; . }} {{ else if $.Param \u0026#34;telegram.enable\u0026#34; }} {{ partial \u0026#34;comments/telegram.html\u0026#34; . }} + {{ else if $.Param \u0026#34;waline.enable\u0026#34; }} + {{ partial \u0026#34;comments/waline.html\u0026#34; . }} {{ end }} {{ end }} ç„¶åå†æ‰“å¼€ waline.html ï¼ŒæŒ‰ç…§å®˜æ–¹ç»™å‡ºçš„ ä» Valine è¿ç§» è¿›è¡Œå¼•å…¥ï¼š\n-\u0026lt;script src=\u0026#39;//unpkg.com/valine/dist/Valine.min.js\u0026#39;\u0026gt;\u0026lt;/script\u0026gt; +\u0026lt;script src=\u0026#39;//unpkg.com/@waline/client@v2/dist/waline.js\u0026#39;\u0026gt;\u0026lt;/script\u0026gt; +\u0026lt;link href=\u0026#39;//unpkg.com/@waline/client@v2/dist/waline.css\u0026#39; rel=\u0026#39;stylesheet\u0026#39; /\u0026gt; \u0026lt;script\u0026gt; - new Valine({ + Waline.init({ el: \u0026#39;#vcomments\u0026#39;, - appId: \u0026#39;Your appId\u0026#39;, - appKey: \u0026#39;Your appKey\u0026#39; + serverURL: \u0026#39;YOUR SERVER URL\u0026#39; }); \u0026lt;/script\u0026gt; åŸºæœ¬çš„å¼•å…¥å®Œæˆåï¼Œæ‰“å¼€ config/_default/params.toml æ·»åŠ  Waline å¹¶è®¾ç½®ï¼š\n[waline] enable = true ServerURL = \u0026#39;\u0026#39; # æœåŠ¡ç«¯ç½‘å€æ˜¯ä½ ç»™ Vercel æœåŠ¡ç«¯ç»‘å®šçš„åŸŸå å¦‚æœä½ æƒ³è¿›è¡Œä¸€äº›ä¸ªæ€§åŒ–çš„è®¾ç½®ï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹å®˜ç½‘ã€‚ä¸‹é¢æ˜¯æˆ‘è‡ªå·±çš„ä¸€ä¸ªç®€å•çš„é…ç½®ï¼š\n~/config/_default/params.tomlparams.toml\n[waline] enable = true ServerURL = \u0026#39;https://domain.com\u0026#39; Lang = \u0026#39;zh-CN\u0026#39; Meta = [\u0026#39;nick\u0026#39;, \u0026#39;mail\u0026#39;, \u0026#39;link\u0026#39;] RequiredMeta = [\u0026#39;nick\u0026#39;] Login = \u0026#39;disable\u0026#39; PageSize = \u0026#39;10\u0026#39; HighLighter = true ~/layouts/partials/comments/waline.html\n\u0026lt;div id=\u0026#34;vcomments\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;script src=\u0026#39;//unpkg.com/@waline/client@v2/dist/waline.js\u0026#39;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;link href=\u0026#39;//unpkg.com/@waline/client@v2/dist/waline.css\u0026#39; rel=\u0026#39;stylesheet\u0026#39; /\u0026gt; \u0026lt;script\u0026gt; Waline.init({ el: \u0026#39;#vcomments\u0026#39; , locale: { placeholder: \u0026#39;è¯·æ³¨æ„è¯„è®ºç¤¼ä»ªï¼Œå‘å¸ƒæ”»å‡»æ€§ã€æ— æ„ä¹‰å†…å®¹å°†ä¼šè§†ä¸ºåƒåœ¾è¯„è®ºè¿›è¡Œåˆ é™¤å¤„ç†ã€‚\u0026#39;, nick: \u0026#39;æ˜µç§°*\u0026#39; }, serverURL: \u0026#39;{{ .Site.Params.waline.ServerURL }}\u0026#39;, emoji: [ \u0026#39;//unpkg.com/@waline/emojis@1.1.0/alus\u0026#39;, \u0026#39;//unpkg.com/@waline/emojis@1.1.0/tieba\u0026#39; ], lang: \u0026#39;{{ .Site.Params.waline.Lang }}\u0026#39;, meta: {{ .Site.Params.waline.Meta }}, requiredMeta: {{ .Site.Params.waline.RequiredMeta }}, login: \u0026#39;{{ .Site.Params.waline.Login }}\u0026#39;, pageSize: \u0026#39;{{ .Site.Params.waline.PageSize }}\u0026#39;, highlighter: {{ .Site.Params.waline.Highlighter }} }); \u0026lt;/script\u0026gt; é…ç½®å®Œæˆä¹‹åä½ å°±å¯ä»¥åœ¨è¿è¡Œ hugo server åœ¨æœ¬åœ°è¿›è¡Œè¯„è®ºæµ‹è¯•äº†:\nè¯„è®ºç®¡ç† Waline å¸¦æœ‰åå°ï¼Œå¯ä»¥å®ç°å¯¹è¯„è®ºçš„ç®¡ç†ã€‚éƒ¨ç½²å®Œæˆåè®¿é—® \u0026lt;serverURL\u0026gt;/ui/register è¿›è¡Œæ³¨å†Œï¼Œç¬¬ä¸€ä¸ªæ³¨å†Œçš„è´¦æˆ·ä¼šè¢«è®¾å®šæˆç®¡ç†å‘˜ã€‚\nç™»å½•æˆåŠŸåå°±å¯ä»¥çœ‹åˆ°è¯„è®ºç®¡ç†çš„ç•Œé¢äº†ã€‚åœ¨è¿™é‡Œå¯ä»¥ä¿®æ”¹ã€æ ‡è®°æˆ–åˆ é™¤è¯„è®ºã€‚åœ¨è¯„è®ºçš„æ—¶å€™ï¼Œå¦‚æœé€‰æ‹©ç™»é™†è´¦æˆ·åè¿›è¡Œè¯„è®ºï¼Œä½ çš„è¯„è®ºæ˜µç§°åé¢ä¼šæ˜¾ç¤ºã€Œåšä¸»ã€å­—æ ·ã€‚å¦‚æœæ²¡æœ‰ç™»é™†åå°è¯„è®ºï¼Œä¸€æ ·æ˜¯ä¸ä¼šæ˜¾ç¤ºçš„ã€‚\næ€»ç»“ ä»¥ä¸Šå°±æ˜¯ Hugo åšå®¢æ·»åŠ è¯„è®ºç³»ç»Ÿçš„è¿‡ç¨‹ï¼Œå¸Œæœ›èƒ½ç»™å¤§å®¶åšä¸€ä¸ªå‚è€ƒï¼›è‡³äºä½¿ç”¨ä»€ä¹ˆè¯„è®ºç³»ç»Ÿä¹Ÿæ˜¯çœ‹è‡ªå·±çš„å–œå¥½å’Œé€‰æ‹©äº†ã€‚æ²¡æœ‰ä»€ä¹ˆæ˜¯æœ€å¥½çš„ï¼Œåªæœ‰æœ€é€‚åˆä½ è‡ªå·±çš„ã€‚åˆ°æ­¤ Hugo æ­å»ºåšå®¢çš„ä¸€ä¸ªå…¥é—¨æµç¨‹ä¹Ÿç®—æ˜¯ç»“æŸäº†ï¼Œä»¥åè‡ªå·±æŠ˜è…¾å¤šäº†ï¼Œæœ‰æ—¶é—´äº†ï¼›ä¹Ÿä¼šè¿›è¡Œæ›´è¿›ä¸€æ­¥çš„å‘æ˜å’Œåˆ†äº«ã€‚\nå‚è€ƒèµ„æ–™ LeanCloud å›½é™…ç‰ˆ Valine å®˜ç½‘ Vrecel å®˜ç½‘ Waline å®˜ç½‘ ","date":"2022-10-15T10:50:47+08:00","permalink":"/archives/hugo_comment/","title":"ä¸º Hugo åšå®¢å¼€å¯è¯„è®ºç³»ç»Ÿ"},{"content":"å‰è¨€ ä¹‹å‰åœ¨ ã€Šä½¿ç”¨ Github Actions è‡ªåŠ¨åŒ–éƒ¨ç½² Hugo åšå®¢ã€‹ ä¸€æ–‡ä¸­æˆ‘è®²äº†é€šè¿‡ Github Actions è‡ªåŠ¨éƒ¨ç½² Hugo åšå®¢åˆ° Github Pages ï¼› Github Pages å…è´¹è€Œä¸”æ— éœ€è€ƒè™‘æˆæœ¬åŠç»´æŠ¤ï¼›ä½†æ˜¯ Github æ¯•ç«Ÿæ˜¯åœ¨æµ·å¤–ï¼Œè®¿é—®æœ‰é—®é¢˜ï¼Œè¿˜æ—¶å¸¸æŠ½é£ï¼›è®¿é—®ä½“éªŒç®—ä¸ä¸Šå·®å¼ºäººæ„å§ï¼Œä¹Ÿåªèƒ½è¯´æ˜¯å¤§å¤±æ‰€æœ›äº†ã€‚é‚£æ€æ ·ç®€å•åˆä½æˆæœ¬è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ (æ¯•ç«Ÿç™½å«–æ‰æ˜¯ç¡¬é“ç†) ç°åœ¨å°±æ¥çœ‹ä¸€ä¸‹ä»Šå¤©çš„ä¸»è§’ï¼š\nVercel å®˜ç½‘ Vercel æä¾›åˆ›æ–°è€…åœ¨çµæ„Ÿç¬é—´åˆ›é€ æ‰€éœ€çš„é€Ÿåº¦å’Œå¯é æ€§ - æ¥è‡ªå®˜æ–¹ä¸»é¡µã€‚\nNetlify å®˜ç½‘ ç”¨ä½ å–œæ¬¢çš„å·¥å…·ï¼Œè½»æ¾åœ°åœ¨å…¨çƒèŒƒå›´å†…è‡ªåŠ¨åŒ–æ„å»ºä½ çš„ç½‘ç«™ - æ¥è‡ªå®˜æ–¹ä¸»é¡µã€‚\nVercel å’Œ Netlify éƒ½å±äºé¡µé¢æ‰˜ç®¡æœåŠ¡ï¼Œä¸éœ€è¦è¿›è¡Œå¤æ‚çš„é…ç½®ï¼›å¯ä»¥ä¸€é”®éƒ¨ç½²ä¸æ„å»ºä½ çš„ç½‘ç«™ã€‚Vercel å’Œ Netlify ä¸»è¦é¢å‘çš„æ˜¯ Web ç«¯çš„å¼€å‘è€…ï¼Œç”¨äºå¸®åŠ©ä»–ä»¬å¿«é€Ÿæ­å»ºè‡ªå·±çš„ Web ç«¯ä¸šåŠ¡ï¼Œå¯ä»¥å®Œå…¨å®ç°å‰ç«¯ä¸šåŠ¡çš„ç‹¬ç«‹è¿ç»´ã€‚å®ƒä»¬éƒ½æ‹¥æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š\nå…è¿ç»´ï¼šä¸éœ€è¦ç®¡ç†æœåŠ¡å™¨ä¸»æœºæˆ–è€…æœåŠ¡å™¨è¿›ç¨‹ã€‚ å¼¹æ€§ä¼¸ç¼©ï¼šæ ¹æ®è´Ÿè½½è¿›è¡Œè‡ªåŠ¨è§„æ¨¡ä¼¸ç¼©ä¸è‡ªåŠ¨é…ç½®ã€‚ æŒ‰éœ€ä»˜è´¹ï¼šæ ¹æ®ä½¿ç”¨æƒ…å†µå†³å®šå®é™…æˆæœ¬ã€‚ é«˜å¯ç”¨ï¼šå…·å¤‡éšå«çš„é«˜å¯ç”¨æ€§ã€‚ ä½¿ç”¨ä¸éƒ¨å± è¿™é‡Œæˆ‘ä»¥ Vercel ä¸ºä¾‹ï¼Œå› ä¸ºä»–ä»¬ä¸¤å®¶æ“ä½œéƒ½å·®ä¸å¤šï¼Œé¦–å…ˆæ‰“å¼€ Vercel å®˜ç½‘ï¼Œç‚¹å‡»å³ä¸Šè§’ Sign Up - Continue with GitHub ä½¿ç”¨ Github è¿›è¡Œç™»é™†ï¼š\nä¹‹åè®©ä½ è¿›è¡Œæˆæƒï¼Œç‚¹å‡»ç¡®è®¤æˆæƒå³å¯ï¼š\nè¿›å…¥ç®¡ç†é¢æ¿åï¼Œç‚¹å‡» Create a New Project æ¥åˆ›å»ºæ–°é¡¹ç›®ï¼Œç„¶åé€‰æ‹© Countinue with GitHub å¯¼å…¥ Github çš„ä»“åº“ï¼š\nåˆ°è¿™ä¼šè®©ä½ é€‰æ‹©ä»“åº“ï¼Œä½ å¯ä»¥é€‰æ‹©è¯»å–æ‰€æœ‰ä»“åº“ï¼Œæˆ–è€…æŒ‡å®šè¯»å–æŸä¸€ä¸ªä»“åº“ (è¿™é‡Œæˆ‘å°±é€‰æ‹©è¯»å–æˆ‘ Hugo åšå®¢çš„ä»“åº“) ï¼Œç„¶å Installï¼š\nä¹‹åä¼šå›åˆ°ç®¡ç†é¢æ¿ï¼Œç‚¹å‡» Improt å¯¼å…¥ä½ åˆšæ‰é€‰æ‹©çš„ä»“åº“ï¼›ç„¶åå°±ä¼šè¿›å…¥éƒ¨ç½²é…ç½®é¡µé¢ï¼Œä¸€èˆ¬æ¥è®²æ˜¯ä¼šè‡ªåŠ¨è¯†åˆ«ä½ ä»“åº“çš„ç¨‹åºï¼Œç„¶åè‡ªåŠ¨é€‰æ‹©å¥½éƒ¨ç½²é…ç½®ã€‚å¦‚æœæ²¡æœ‰çš„è¯å¯ä»¥è‡ªå·±è®¾ç½®ï¼›è®°å¾—åœ¨ç¯å¢ƒå˜é‡æ·»åŠ ä¸€ä¸ª HUGO_VERSION è®°å½•å€¼ä¸º Hugo æœ€æ–°ç‰ˆæœ¬å·ï¼Œä»¥é˜²æœ‰çš„ä¸»é¢˜å¯¹ç‰ˆæœ¬æœ‰è¦æ±‚ä»è€Œå¯¼è‡´éƒ¨ç½²å¤±è´¥ï¼›è®¾ç½®å®Œåå°±å¯ä»¥ç›´æ¥ç‚¹å‡» Deploy è¿›è¡Œéƒ¨ç½²äº†ï¼š\nç­‰å¾…éƒ¨ç½²ï¼Œçœ‹åˆ°å®Œç»“æ’’èŠ±å°±ä»£è¡¨å·²ç»éƒ¨ç½²å®Œæˆäº†ï¼š\nç„¶åç‚¹å‡» Continue to Dashboard è¿›å…¥ç®¡ç†é¢æ¿ï¼Œå†ç‚¹å‡» Settings - Domains ä¸ºä½ çš„ç½‘ç«™æ·»åŠ ä¸€ä¸ªåŸŸåï¼›è¾“å…¥ä½ è‡ªå·±çš„åŸŸååç‚¹å‡» Add å³å¯æ·»åŠ ï¼š\nå› ä¸º Vercel åˆ†é…çš„äºŒçº§åŸŸåæ˜¯è¢« DNS æ±¡æŸ“äº†çš„ï¼Œæ‰€ä»¥é€šè¿‡äºŒçº§ Vercel åˆ†é…çš„åŸŸåæ˜¯è®¿é—®ä¸äº†çš„\nåœ¨æ·»åŠ åŸŸåä¹‹åä¼šæç¤ºä½ è®¾ç½® CNAME è§£æè‡³ cname.vercel-dns.com ï¼Œè¿™æ—¶å€™åˆ°ä½ åŸŸåçš„ç®¡ç†å•†æˆ–è€… DNS æä¾›å•†å¤„æ·»åŠ  CNAME è§£æå³å¯ï¼š\nè®¾ç½®å®Œæˆåç­‰å¾…åŸŸåè§£æï¼Œ Vercel ä¼šè‡ªåŠ¨æ·»åŠ  SSL è¯ä¹¦ï¼Œå¹¶ä¸”è®¾ç½® HTTPS è®¿é—®ã€‚\nè‡³äºæ‰˜ç®¡åˆ° Netlify çš„éƒ¨ç½²è¿‡ç¨‹å’Œ Vercel æ˜¯å¤§åŒå°å¼‚çš„ï¼Œçœ‹ä½ æ€ä¹ˆé€‰æ‹©ï¼ŒåŒºåˆ«å°±åªåœ¨äº Vercel çš„äºŒçº§åŸŸåä¸èƒ½è¿›è¡Œè®¿é—®ï¼Œéœ€è¦æ·»åŠ è‡ªå·±çš„åŸŸåè€Œå·²ã€‚\næ€»ç»“ è‡³æ­¤ Hugo åšå®¢æ‰˜ç®¡åˆ° Vercel/Netlify è¿›è¡Œè‡ªåŠ¨éƒ¨ç½²å®Œæˆï¼›é€šè¿‡æµ‹è¯•ï¼Œå¯ä»¥çœ‹åˆ°è®¿é—®é€Ÿåº¦å¯¹æ¯” Github Pages è¿˜æ˜¯æ‹¥æœ‰ä¸å°çš„æå‡çš„ (å·¦è¾¹ä¸º Vercel å³è¾¹ä¸º Github Pages)ï¼š\nåœ¨ Github ä»“åº“å¯¼å…¥åˆ° Vercel/Netlify ä¹‹åï¼Œä½ æ¯ä¸€æ¬¡æäº¤ä»£ç åˆ° Hugo åšå®¢ä»“åº“ï¼Œè¿™è¾¹éƒ½ä¼šè‡ªåŠ¨è¿›è¡Œéƒ¨ç½²åŠå‘å¸ƒï¼Œç›¸å½“äº Github Actions è‡ªåŠ¨éƒ¨ç½²å¹¶å‘å¸ƒåˆ° Github Pages æ˜¯ä¸€æ ·çš„ï¼Œä¸éœ€è¦è¿›è¡Œé¢å¤–æ“ä½œï¼Œéå¸¸æ–¹ä¾¿ã€‚\nå‚è€ƒèµ„æ–™ Vercel å®˜ç½‘ Netlify å®˜ç½‘ Hugo å®˜æ–¹æ–‡æ¡£ - Host On Netlify ","date":"2022-09-18T14:02:55+08:00","permalink":"/archives/hugo_deploy/","title":"Hugo åšå®¢éƒ¨ç½²è‡³æ‰˜ç®¡æœåŠ¡æå‡è®¿é—®ä½“éªŒ"},{"content":"å‰è¨€ ä¹‹å‰åœ¨ ã€Šä½¿ç”¨ Hugo æ­å»ºä¸ªäººåšå®¢åŠéƒ¨ç½²ã€‹ ä¸€æ–‡ä¸­, æˆ‘è®²äº†é€šè¿‡ Hugo æ¥æ­å»ºä¸ªäººåšå®¢, å¹¶éƒ¨ç½²åˆ° Github Pages æ¥å®ç°ä¸€ä¸ªåœ¨çº¿è®¿é—®.ä½†æ˜¯è¿™æ ·æ‰‹åŠ¨éƒ¨ç½²ä¸€å¼€å§‹è¿˜è§‰å¾—æ¯”è¾ƒæ–°å¥‡æœ‰è¶£, æ—¶é—´ä¸€é•¿çš„è¯éš¾å…ä¼šè§‰å¾—æœ‰äº›éº»çƒ¦, ä¸€æœ‰ä»€ä¹ˆæ”¹åŠ¨å°±è¦å…¨éƒ¨é‡æ–°éƒ¨ç½², é‚£ä¹ˆæœ¬æ–‡å°±å°†è®²ä¸€ä¸‹é€šè¿‡ Github Actions æ¥å®ç°å°†æˆ‘ä»¬çš„ Hugo åšå®¢è‡ªåŠ¨éƒ¨ç½²åˆ° Github Pages æˆ–è€…æˆ‘ä»¬è‡ªå·±çš„äº‘æœåŠ¡å™¨ä¸Š, ç°åœ¨å°±ä¸€èµ·æ¥çœ‹ä¸€ä¸‹.\næ³¨æ„: æœ¬æ–‡æ‰€æœ‰æ“ä½œçš„å‰ææ¡ä»¶æ˜¯åœ¨ ã€Šä½¿ç”¨ Hugo æ­å»ºä¸ªäººåšå®¢åŠéƒ¨ç½²ã€‹ ä¸€æ–‡çš„åŸºç¡€ä¸Š, å¯ä»¥å…ˆè¡ŒæŸ¥é˜….\nä»‹ç»ä¸å‡†å¤‡ Github Actions æ˜¯ä»€ä¹ˆ GitHub Actions æ˜¯ä¸€ç§æŒç»­é›†æˆå’ŒæŒç»­äº¤ä»˜ (CI/CD) å¹³å°, å¯ç”¨äºè‡ªåŠ¨æ‰§è¡Œç”Ÿæˆã€æµ‹è¯•å’Œéƒ¨ç½²ç®¡é“.ä½ å¯ä»¥åˆ›å»ºå·¥ä½œæµæ¥æ„å»ºå’Œæµ‹è¯•å­˜å‚¨åº“çš„æ¯ä¸ªæ‹‰å–è¯·æ±‚, æˆ–å°†åˆå¹¶çš„æ‹‰å–è¯·æ±‚éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ. GitHub æä¾› Linuxã€Windows å’Œ macOS è™šæ‹Ÿæœºæ¥è¿è¡Œä½ çš„å·¥ä½œæµç¨‹, æˆ–è€…ä½ å¯ä»¥åœ¨è‡ªå·±çš„æ•°æ®ä¸­å¿ƒæˆ–äº‘åŸºç¡€æ¶æ„ä¸­æ‰˜ç®¡è‡ªå·±çš„è‡ªæ‰˜ç®¡è¿è¡Œå™¨.\nå‡†å¤‡å·¥ä½œ ä»¥æœ¬æ–‡æè¿°æ‰€è¯´, é€šè¿‡ Github æä¾›çš„ Actions æœåŠ¡å°† Hugo åšå®¢è‡ªåŠ¨éƒ¨ç½²åˆ°Github Pages å’Œäº‘æœåŠ¡å™¨, é‚£å°±éœ€è¦ä»¥ä¸‹å‡†å¤‡:\nå­˜æ”¾ Hugo åšå®¢é¡¹ç›®çš„ä»“åº“, è¯¥ä»“åº“æ‹¥æœ‰ç”¨äºç”Ÿæˆåšå®¢çš„ Markdown æ–‡ä»¶, ç”Ÿæˆé™æ€åšå®¢çš„é…ç½®æ–‡ä»¶ã€ä¸»é¢˜ç­‰ç­‰; ä¹Ÿå°±æ˜¯ç›¸å½“äºæˆ‘ä»¬æœ¬åœ°åšå®¢çš„æ ¹ç›®å½•, è¯¥ä»“åº“å¯ä»¥è®¾ä¸ºç§æœ‰. å­˜æ”¾ Hugo åšå®¢ç”Ÿæˆçš„é™æ€æ–‡ä»¶ä»“åº“, ç”¨äº Github Pages è¿›è¡Œè®¿é—®; ä»“åº“åä¸º username.github.io , è¯¥ä»“åº“ä¸ºå¼€æº. æœåŠ¡å™¨æˆ–è€…è™šæ‹Ÿä¸»æœº, æ˜¯ä½ è‡ªå·±è´­ä¹°çš„, åŒæ ·ç”¨äºå­˜æ”¾ Hugo åšå®¢ç”Ÿæˆçš„é™æ€æ–‡ä»¶. ä¸‹é¢ä¸€æ­¥æ­¥æ¥è¿›è¡Œæ“ä½œ.\né…ç½® Github Actions åˆ›å»ºé…ç½®æ–‡ä»¶ é¦–å…ˆ, åœ¨æœ¬åœ°åšå®¢ä»“åº“æ ¹ç›®å½•ä¸‹, åˆ›å»º .github/workflows/depoly.yaml æ–‡ä»¶å depoly éšæ„, è¿™ä¸ªå°±æ˜¯ Github Actions é…ç½®æ–‡ä»¶, ç„¶åæ‰“å¼€ VS Code è¿›è¡Œç¼–è¾‘; å¤åˆ¶ä¸‹é¢çš„å†…å®¹, ç²˜è´´è¿›å», ç„¶åæ ¹æ®æ³¨é‡Šè¿›è¡Œä¿®æ”¹; æ“ä½œå®Œæˆååˆ é™¤æ³¨é‡Šå¹¶ä¿å­˜:\nname: Deploy on: push: branches: - main # è§¦å‘æ¡ä»¶, åœ¨ push åˆ° main åˆ†æ”¯å workflow_dispatch: # è§¦å‘æ¡ä»¶, åœ¨ Github ä»“åº“ Action å·¥å…·æ‰‹åŠ¨è°ƒç”¨ jobs: # ä»»åŠ¡ build-and-deploy: runs-on: ubuntu-latest # æŒ‡å®šè™šæ‹Ÿæœºç¯å¢ƒä¸º Ubuntu æ–°ç‰ˆ steps: - name: Checkout # æ‹‰å–ä»£ç  uses: actions/checkout@v2 # ä½¿ç”¨å…¶ä»–ç”¨æˆ·é…ç½® with: submodules: true # åŒ…å«å­æ¨¡å—,ä¹Ÿå°±æ˜¯é“¾æ¥çš„ä¸»é¢˜ fetch-depth: 0 - name: Setup Hugo # å®‰è£… Hugo uses: peaceiris/actions-hugo@v2 # ä½¿ç”¨å…¶ä»–ç”¨æˆ·é…ç½® with: hugo-version: latest # Hugo ç‰ˆæœ¬é€‰æ‹© extended: true - name: Build Hugo # ç”Ÿæˆåšå®¢é™æ€æ–‡ä»¶ run: hugo --minify - name: Deploy GhPages # éƒ¨ç½²åˆ° Github Pages uses: peaceiris/actions-gh-pages@v3 # ä½¿ç”¨å…¶ä»–ç”¨æˆ·é…ç½® with: personal_token: ${{ secrets.PERSONAL_TOKEN }} # Personal Token external_repository: username/username.github.io # Github Pages ä»“åº“å, username æ¢æˆä½ çš„ publish_branch: main publish_dir: ./public commit_message: ${{ github.event.head_commit.message }} - name: Deploy To VPS # éƒ¨ç½²åˆ°ä¸ªäººæœåŠ¡å™¨ uses: cross-the-world/scp-pipeline@master with: host: ${{ secrets.DC_HOST }} # Actions Secrets Token user: ${{ secrets.DC_USER }} # Actions Secrets Token pass: ${{ secrets.DC_PASS }} # Actions Secrets Token port: ${{ secrets.DC_PORT }} # Actions Secrets Token connect_timeout: 10s local: \u0026#39;./public/*\u0026#39; remote: /var/www/html/ # ç½‘ç«™æ ¹ç›®å½• å¦‚æœä½ ä¸éœ€è¦éƒ¨ç½²åˆ°ä¸ªäººæœåŠ¡å™¨ï¼Œå¯ä»¥å°†æœ€åä¸€ä¸ª Action (éƒ¨ç½²åˆ°ä¸ªäººæœåŠ¡å™¨) åˆ é™¤\näººçœ‹éº»äº†? æ²¡å…³ç³», æˆ‘ä»¬åªè¦æ˜ç™½å°‘æ•°å‡ ä¸ªåœ°æ–¹å³å¯, æˆ‘æ¥æ…¢æ…¢æ¢³ç†:\non å­—æ®µæŒ‡å®šè§¦å‘å·¥ä½œæµçš„æ¡ä»¶, é€šå¸¸æ˜¯æŸäº›äº‹ä»¶, å¦‚ï¼š on: push # æŒ‡å®š push äº‹ä»¶å¯ä»¥è§¦å‘ jobså­—æ®µè¡¨ç¤ºéœ€è¦æ‰§è¡Œçš„ä»»åŠ¡\nsteps å­—æ®µè¡¨ç¤ºä»»åŠ¡æµç¨‹, æˆ‘ä»¬è¿™ä¸ªé…ç½®æµç¨‹ä¸º:\nsteps: - name: Setup Hugo - name: Build Hugo - name: Depoly GhPages - name: Depoly TO VPS steps å­—æ®µä¸‹çš„ name , use , with åŠ èµ·æ¥å°±æ˜¯ä¸€ä¸ª Action\nname è¡¨ç¤ºä¸€ä¸ª Action çš„åç§°\nuse è¡¨ç¤ºä½¿ç”¨æŸä¸ªåˆ«äººå†™å¥½çš„æ’ä»¶\nwith è¡¨ç¤ºä¼ é€’ç»™æ’ä»¶çš„å‚æ•°\nåˆ›å»º Token é‡ç‚¹æ¥äº†, ç°åœ¨é…ç½®æ–‡ä»¶å·²ç»ç¼–è¾‘å¥½äº†, æˆ‘ä»¬éœ€è¦åˆ›å»ºç›¸å¯¹åº”çš„ Token æ¥ç»™ Actions ä½¿ç”¨\nPersonal Token æ‰“å¼€ Github ç‚¹å‡» å³ä¸Šè§’å¤´åƒ - Settings - Developer setting - Personal access tokens - Generate new token åˆ›å»ºä¸€ä¸ª Token, è®°å¾—è¦å‹¾é€‰ repo å’Œ workflow æƒé™:\nç”Ÿæˆåå¤åˆ¶ Token æ³¨æ„: Token åªä¼šå‡ºç°ä¸€æ¬¡\nå¤åˆ¶åæ‰“å¼€å­˜æ”¾ Hugo åšå®¢çš„ä»“åº“, ç‚¹å‡» Settings - Secrets - Actions - New repository secret è¾“å…¥åˆšæ‰å¤åˆ¶çš„ Token , åå­—ä¸º PERSONAL_TOKEN\nå¦‚æœä½ ä¸éœ€è¦å°†åšå®¢é™æ€æ–‡ä»¶éƒ¨ç½²åˆ°ä¸ªäººæœåŠ¡å™¨, é‚£ä¹ˆåˆ°è¿™é‡Œå°±ç»“æŸäº†. ä¸‹é¢æ¥è®²ä¸‹éƒ¨ç½²åˆ°ä¸ªäººæœåŠ¡å™¨çš„è®¾ç½®\nActions Secrets Token åœ¨ Actions é…ç½®æ–‡ä»¶ä¸­, æœ€åä¸€ä¸ªæµç¨‹æ˜¯éƒ¨ç½²åˆ°ä¸ªäººæœåŠ¡å™¨, é‚£ä¹ˆè¿™é‡Œæœ‰å‡ ä¸ªé€‰é¡¹ä¹Ÿæ˜¯éœ€è¦åˆ›å»º Token çš„, åˆ†åˆ«ä¸ºï¼š\nhost ä½ çš„æœåŠ¡å™¨ IP user ç™»é™†ç”¨æˆ·å pass ç™»é™†å¯†ç  port SSH ç«¯å£ï¼Œé»˜è®¤ä¸º 22, å¦‚æœä¿®æ”¹äº†ç«¯å£ï¼Œæˆ–è€…ä¾›åº”å•†æœ‰æŒ‡å®šç«¯å£ï¼Œå¡«å…¥æŒ‡å®šç«¯å£å³å¯ ä»¥ host ä¸ºä¾‹, åœ¨å­˜æ”¾ Hugo åšå®¢çš„ä»“åº“, ç‚¹å‡» Settings - Secrets - Actions - New repository secret è¾“å…¥ Token Name ä¸º DC_HOST , Secret ä¸ºä½ çš„æœåŠ¡å™¨ IP åœ°å€, å¯¹åº”é…ç½®æ–‡ä»¶ä¸­çš„ ${{ secrets.DC_HOST }} é¡¹\nä¹‹ååˆ†åˆ«åˆ›å»ºç›¸å¯¹åº”çš„ Token ,ç„¶åä¿®æ”¹æœ€åä¸€è¡Œ remote ç½‘ç«™æ ¹ç›®å½•å³å¯ã€‚\næ¨é€åŠæ›´æ–° å…¨éƒ¨é…ç½®å®Œæˆä¹‹å, æˆ‘ä»¬å°±å¯ä»¥å°†é…ç½®æ–‡ä»¶è¿›è¡Œæ¨é€äº†, å°†æˆ‘ä»¬çš„æœ¬åœ°åšå®¢ä»“åº“æ¨é€åˆ°åˆ›å»ºå¥½çš„ç§å¯†ä»“åº“ä¸­:\ngit init # åˆå§‹åŒ–ä»“åº“ git branch -M main # è®¾ç½®åˆ†æ”¯ä¸ºmain git add . # æ·»åŠ å…¨éƒ¨æ–‡ä»¶ git commit -m \u0026#34;Hugo åšå®¢ä»“åº“ç¬¬ä¸€æ¬¡æäº¤\u0026#34; # æ·»åŠ æäº¤ä¿¡æ¯ git remote add origin git@github.com:username/name.git # æ·»åŠ è¿œç¨‹ä»“åº“, æ ¼å¼ä¸º: ç”¨æˆ·å/ä»“åº“å .git git push origin main # æ¨é€ æ¨é€å®Œæˆåï¼Œç­‰å¾…ä¸€ä¼šç„¶åæ‰“å¼€ Hugo ä»“åº“çš„ Actions æˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°å·¥ä½œæµå·²ç»å®Œæˆ:\nå†æ‰“å¼€å­˜æ”¾é™æ€æ–‡ä»¶çš„ä»“åº“, å¯ä»¥çœ‹åˆ°é™æ€æ–‡ä»¶å·²ç»è‡ªåŠ¨éƒ¨ç½²å®Œæ¯•å¹¶ä¸”ç”Ÿæˆ Github Pages äº†:\nå‚è€ƒèµ„æ–™ Actions å®˜æ–¹æ–‡æ¡£ Actions å…¥é—¨æ•™ç¨‹ Actions æ’ä»¶å¸‚åœº æ€»ç»“ ä»¥ä¸Šå°±æ˜¯é€šè¿‡ Github Actions å®ç°çš„ Hugo åšå®¢è‡ªåŠ¨éƒ¨ç½²ç³»ç»Ÿ, ä»¥ååªéœ€è¦åœ¨æœ¬åœ°å†™å¥½æ–‡ç« , ç„¶å Push åˆ° Github çš„ Hugo åšå®¢ä»“åº“ä¸­å°±å¯ä»¥è‡ªåŠ¨è¿›è¡Œé™æ€æ–‡ä»¶ç”Ÿæˆå’Œéƒ¨ç½²å•¦,å¯ä»¥è¯´æ˜¯æ–¹ä¾¿åˆå¥½ç”¨. æœ€é‡è¦å®ƒè¿˜æ˜¯å…è´¹çš„, è¿™æ ·å†™åšå®¢çš„æ–¹å¼æ˜¯å¦å¤Ÿä¼˜é›…å‘¢?\n","date":"2022-07-16T13:25:48+08:00","permalink":"/archives/hugo_actions/","title":"ä½¿ç”¨ Github Actions è‡ªåŠ¨åŒ–éƒ¨ç½² Hugo åšå®¢"},{"content":"å‰è¨€ å¾ˆæ—©å¼€å§‹å°±æ¥è§¦åˆ°ä¸ªäººåšå®¢è¿™å—äº†ï¼Œä¸€å¼€å§‹æ˜¯åˆ°å¤„æ³›æ»¥çš„ YH ã€ BY åˆ†é”€ï¼›å„ç§å…è´¹ä¸»æœºï¼Œå†åˆ°åæ¥è‡ªå·±ä¹°è™šæ‹Ÿä¸»æœºã€VPS è¿›è¡Œä¸ªäººåšå®¢çš„ä½¿ç”¨ï¼›ç”±äºæˆ‘æ‡’å¾—å¤‡æ¡ˆï¼Œäºæ˜¯ä¸€ç›´ç”¨çš„æ˜¯æµ·å¤–çš„æœåŠ¡å™¨ï¼›ä½†æ˜¯æµ·å¤–æœåŠ¡å™¨ä¹Ÿæœ‰é—®é¢˜ï¼Œå°±æ˜¯è®¿é—®ä½“éªŒç›¸è¾ƒäºå›½å†…è¿˜æ˜¯æ¯”è¾ƒå·®çš„ã€‚ WordPress çš„è¯ï¼Œå¯¹æˆ‘ä¸ªäººè€Œè¨€æ„Ÿè§‰æ¯”è¾ƒè‡ƒè‚¿ï¼Œæ‰€ä»¥åé¢åˆç”¨äº† Typecho ï¼›åˆ°æœ€åå·¥ä½œã€ç”Ÿæ´»ç­‰è¯¸å¤šçäº‹å¯¼è‡´æ²¡æœ‰å¤ªå¤šçš„æ—¶é—´å»è¿›è¡Œæ‰“ç†ï¼Œè€Œä¸”æœåŠ¡å™¨çš„é•¿æœŸç»´æŠ¤ä¹Ÿæ˜¯ä¸€ç¬”ä¸å°çš„å¼€æ”¯ã€‚\nåˆ°åé¢æˆ‘å‘ç°äº† Hugo + GitHub Pages è¿™ä¸€æ–¹æ¡ˆï¼Œæ—¢å¯ä»¥è¿›è¡Œæ‰˜ç®¡ï¼ŒèŠ‚çœäº†è®¸å¤šç»´æŠ¤å¿ƒåŠ›ï¼Œåˆèƒ½éšæ—¶è¿›è¡Œå†™ä½œï¼›è™½ç„¶åœ¨éƒ¨ç½²ä¸æ­å»ºä¸Šéœ€è¦è¿›è¡Œä¸€äº›é…ç½®ï¼Œä½†æ˜¯åç»­æ›´æ–°å’Œç»´æŠ¤è¿˜æ˜¯æ¯”è¾ƒæ–¹ä¾¿çš„ã€‚å› æ­¤ï¼Œåœ¨è¿™é‡Œå°†åšå®¢ç³»ç»Ÿæ­å»ºåŠéƒ¨ç½²è¿›è¡Œè®°å½•ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ã€‚\nåšå®¢ç¨‹åºé€‰æ‹© ç›®å‰å·²ç»æœ‰å¾ˆå¤šæ¯”è¾ƒæˆç†Ÿçš„åšå®¢å¹³å°ï¼Œå¦‚å‰æ–‡æ‰€æåˆ°çš„ WordPressï¼Œè™½ç„¶åŠŸèƒ½å¼ºå¤§ï¼Œä½†å¯¹äºä¸ªäººåšå®¢ç«™ç‚¹æ¥è¯´æœ‰äº›å¤ªè‡ƒè‚¿äº†ï¼Œæˆ‘è®¤ä¸ºä¸ªäººåšå®¢å°±æ˜¯è‡ªå·±åœ¨ä¸Šé¢å†™ä¸€äº›ä¸œè¥¿ï¼Œè¿›è¡Œä¸€ä¸ªåˆ†äº«ä¸è®°å½•ï¼›è½»å·§ä¸€ç‚¹ä¼šæ¯”è¾ƒå¥½ã€‚è€Œ Typecho ç­‰è½»é‡çº§åšå®¢ç¨‹åºå°±æŒºç¬¦åˆæˆ‘çš„å£å‘³ï¼Œä½†æ˜¯å¦‚å‰æ–‡æ‰€è¯´ï¼Œæˆ‘å¹¶æ²¡æœ‰å¤ªå¤šçš„æ—¶é—´å»è¿›è¡Œæ‰“ç†å’Œç»´æŠ¤ï¼›ç»è¿‡ä¸€æ®µæ—¶é—´çš„å¯»æ‰¾ä¸è°ƒç ”ï¼Œæˆ‘æœ€ç»ˆé€‰æ‹©äº† Hugo è¿™ä¸ªé«˜æ•ˆçš„é™æ€ç½‘ç«™ç”Ÿæˆå™¨ã€‚\nå…³äº Hugo Hugo å®˜ç½‘ Hugo - ä¸–ç•Œä¸Šæœ€å¿«çš„ç½‘ç«™æ„å»ºæ¡†æ¶ï¼ŒHugo æ˜¯æœ€æµè¡Œçš„å¼€æºé™æ€ç«™ç‚¹ç”Ÿæˆå™¨ä¹‹ä¸€ã€‚ å‡­å€Ÿå…¶æƒŠäººçš„é€Ÿåº¦å’Œçµæ´»æ€§ï¼ŒHugo è®©æ„å»ºç½‘ç«™å†æ¬¡å˜å¾—æœ‰è¶£ã€‚ï¼ˆæ¥è‡ªå®˜ç½‘ä»‹ç»ï¼‰\nHugo æ˜¯ç”¨ Golang ç¼–å†™çš„ç½‘ç«™æ„å»ºç¨‹åºï¼Œé‡‡ç”¨ Markdown è¿›è¡Œæ–‡ç« ç¼–è¾‘ï¼Œè‡ªåŠ¨ç”Ÿæˆé™æ€ç«™ç‚¹æ–‡ä»¶ï¼Œæ”¯æŒä¸°å¯Œçš„ä¸»é¢˜é…ç½®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ js åµŒå…¥åƒæ˜¯è¯„è®ºç³»ç»Ÿç­‰æ’ä»¶ï¼Œé«˜åº¦å®šåˆ¶åŒ–ã€‚é™¤äº† Hugo å¤–ï¼Œ è¿˜æœ‰ Jekyllã€Hexoã€VuePressã€Gitbookã€Docsify ç­‰é€‰æ‹©ï¼Œå®ç°å’Œä½¿ç”¨éƒ½å·®ä¸å¤šï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„åå¥½è¿›è¡Œé€‰æ‹©ã€‚\nå®‰è£…ä¸éƒ¨å± å®‰è£… Hugo åŠç›¸å…³ç¨‹åº å®‰è£… Hugo Windows ç”¨æˆ·ä½¿ç”¨ Chocolatey å®‰è£…\nchoco install hugo -confirm ä¸æƒ³ä½¿ç”¨ Chocolatey ç®¡ç†åŒ…çš„è¯ä¹Ÿå¯ä»¥ç›´æ¥åˆ°å®˜ç½‘ä¸‹è½½ç¨‹åºåˆ°æœ¬åœ°ç›®å½•ï¼Œç„¶åæ·»åŠ ç¯å¢ƒå˜é‡\nMacOS ç”¨æˆ·ä½¿ç”¨ Homebrew å®‰è£…\nbrew install hugo å®‰è£…å®Œæˆåé€šè¿‡ hugo version è¿›è¡ŒéªŒè¯å®‰è£…\nå®‰è£… Git Git å®˜ç½‘ ä¸‹è½½å®ŒæˆåæŒ‰ç…§é»˜è®¤é…ç½®ï¼Œä¸€è·¯ä¸‹ä¸€æ­¥å³å¯å®Œæˆå®‰è£…ã€‚\nå®‰è£… VS Code VS Code å®˜ç½‘ ä¸‹è½½é€‚åˆè‡ªå·±ç³»ç»Ÿçš„ç‰ˆæœ¬ï¼Œç„¶åä¸€è·¯é»˜è®¤é…ç½®å®‰è£…å³å¯ã€‚\nVS Code æ’ä»¶æ¨èï¼š\nMarkdown All in One Markdown å†™ä½œåˆ©å™¨\nChinese Language Pack for Visual Studio Code VS Code æ±‰åŒ–æ’ä»¶\nAuto Rename Tag æ¶‰åŠä¿®æ”¹ä»£ç æ—¶å¾ˆå¥½ç”¨\nåˆ›å»º Hugo ç½‘ç«™åŠé…ç½® åˆ›å»ºç½‘ç«™ æˆ‘è¿™é‡Œçš„æ“ä½œå‡åœ¨ Windows ç³»ç»Ÿä¸‹ï¼Œå…¶ä»–ç³»ç»Ÿæ­¥éª¤éƒ½ä¸€æ ·ã€‚\næ‰“å¼€ Git Bash è¿›å…¥åˆ°éœ€è¦æ”¾ç½®ç½‘ç«™çš„ç›®å½•ï¼Œå³å¯é€šè¿‡ hugo new site å‘½ä»¤è¿›è¡Œåˆ›å»ºç½‘ç«™äº†ï¼š\ncd /e # è¿›å…¥Eç›˜ mkdir hugo # åˆ›å»º hugo æ–‡ä»¶å¤¹ cd hugo # è¿›å…¥hugoæ–‡ä»¶å¤¹ hugo new site name # åˆ›å»ºæ–°ç½‘ç«™ï¼Œnameå¯ä»¥è‡ªè¡Œè®¾ç½® é…ç½®ä¸»é¢˜ å½“é€šè¿‡ä¸Šæ–‡å‘½ä»¤åˆ›å»ºæˆ‘ä»¬çš„ç«™ç‚¹åï¼Œéœ€è¦è¿›è¡Œä¸»é¢˜é…ç½®ï¼ŒHugo æ‹¥æœ‰ä¸°å¯Œçš„ä¸»é¢˜ï¼Œå¯ä»¥é€šè¿‡å®˜ç½‘ Themes èœå•é€‰æ‹©è‡ªå·±å–œæ¬¢çš„é£æ ¼ï¼ŒæŸ¥çœ‹é¢„è§ˆæ•ˆæœï¼Œé€‰æ‹©åå¯ä»¥è¿›å…¥ä¸»é¢˜é¡¹ç›®ä»“åº“ï¼Œä¸€èˆ¬éƒ½ä¼šæœ‰å¾ˆè¯¦ç»†çš„å®‰è£…åŠé…ç½®è¯´æ˜ã€‚ä¸‹é¢æˆ‘å°±ä»¥ m10c è¿™ä¸ªä¸»é¢˜ä¸ºä¾‹ï¼Œæ¼”ç¤ºä¸€ä¸‹é…ç½®æµç¨‹ã€‚\nå…³è”ä¸»é¢˜ä»“åº“ æˆ‘ä»¬å¯ä»¥å°†ä¸»é¢˜ä»“åº“ç›´æ¥ git clone ä¸‹æ¥è¿›è¡Œä½¿ç”¨ï¼Œä½†è¿™ç§æ–¹å¼æœ‰ä¸€äº›å¼Šç«¯ï¼Œå½“ä¹‹åè‡ªå·±å¯¹ä¸»é¢˜è¿›è¡Œä¿®æ”¹åï¼Œå¯èƒ½ä¼šä¸åŸä¸»é¢˜äº§ç”Ÿä¸€äº›å†²çªï¼Œä¸æ–¹ä¾¿ç‰ˆæœ¬ç®¡ç†ä¸åç»­æ›´æ–°ã€‚æˆ‘é‡‡ç”¨çš„æ˜¯ git submodule æ–¹å¼è¿›è¡Œä»“åº“é“¾æ¥ï¼Œè¿™æ ·åç»­å¯ä»¥å¯¹ä¸»é¢˜çš„ä¿®æ”¹è¿›è¡Œå•ç‹¬ç»´æŠ¤ã€‚\ncd name git init git submodule add https://github.com/vaga/hugo-theme-m10c.git themes/m10c æ›´æ–°ä¸»é¢˜ å¦‚æœéœ€è¦åŒæ­¥ä¸»é¢˜ä»“åº“çš„æœ€æ–°ä¿®æ”¹ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\ngit submodule update --remote åˆå§‹åŒ–ä¸»é¢˜é…ç½® æ¯ä¸ªä¸»é¢˜ä¸€èˆ¬éƒ½ä¼šæä¾›ä¸€äº›å®ä¾‹é…ç½®ä¸åˆå§‹é¡µé¢ï¼Œå¼€å§‹ä½¿ç”¨ä¸»é¢˜æ—¶å¯ä»¥å°†å…¶ exampleSite/ æ¼”ç¤ºç«™ç‚¹ç›®å½•ä¸‹çš„æ–‡ä»¶å¤åˆ¶åˆ°ç«™ç‚¹ç›®å½•ä¸‹ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œè°ƒæ•´é…ç½®ã€‚\ncp -rf themes/m10c/exampleSite/* ./ åˆå§‹åŒ–ä¸»é¢˜åŸºç¡€é…ç½®åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ config.toml æ–‡ä»¶ä¸­è¿›è¡Œç«™ç‚¹ç»†èŠ‚é…ç½®ï¼Œå°†åšå®¢ç«™ç‚¹é…ç½®æ–‡ä»¶ä¸­çš„ baseURL æ”¹ä¸ºè‡ªå·±çš„åŸŸåï¼Œæˆ–è€…ç›´æ¥è®¾ç½®ä¸º / ï¼›å…¶ä½™å…·ä½“é…ç½®é¡¹å‚è€ƒå„ä¸»é¢˜è¯´æ˜æ–‡æ¡£ï¼Œæˆ–è€…ä½œè€…ä¸»é¢˜ä»“åº“ä¸­çš„è¯¦ç»†è¯´æ˜ã€‚\nè°ƒè¯•ä¸»é¢˜ å®Œæˆä¸€äº›åŸºæœ¬çš„ç«™ç‚¹é…ç½®åï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ hugo server å‘½ä»¤è¿›è¡Œæœ¬åœ°å®æ—¶é¢„è§ˆï¼š\nè¿è¡ŒæœåŠ¡åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æµè§ˆå™¨ http://localhost:1313 åœ°å€è®¿é—®æˆ‘ä»¬çš„æœ¬åœ°é¢„è§ˆç½‘é¡µï¼š\nå‘å¸ƒæ–°æ–‡ç«  ä¸Šè¿°æ“ä½œéƒ½å®Œæˆåï¼Œå°±å¯ä»¥è¿›è¡Œæ–°æ–‡ç« çš„å‘å¸ƒäº†ï¼Œé€šè¿‡ hugo new å‘½ä»¤å³å¯è¿›è¡Œå‘å¸ƒæ–°æ–‡ç« \nhugo new posts/start.md å‘å¸ƒæ–°æ–‡ç« åï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ VS Code è¿›è¡Œç¼–è¾‘äº†ã€‚\néƒ¨ç½²ç½‘ç«™ Git Pages è®¾ç½® å¼€é€š Github Pages ä»“åº“ Github Pages é¡¹ç›®ä»“åº“éœ€è¦ç¬¦åˆ username.github.io çš„ç‰¹æ®Šå‘½åæ ¼å¼ï¼Œè¿™æ ·åšå®¢ç«™ç‚¹æ‰èƒ½æ­£å¸¸è®¿é—® GitHub Pages ç”Ÿæˆçš„ç½‘ç«™æœåŠ¡ã€‚\nç”Ÿæˆé™æ€æ–‡ä»¶ é…ç½®å®Œä¸»é¢˜ï¼Œå¹¶å‘å¸ƒæ–°æ–‡ç« ä¹‹åï¼Œå°±å¯ä»¥é€šè¿‡ hugo å‘½ä»¤æ¥ç”Ÿæˆé™æ€ç½‘é¡µæ–‡ä»¶\nhugo å‘å¸ƒç«™ç‚¹ Hugo é»˜è®¤ä¼šå°†ç”Ÿæˆçš„é™æ€ç½‘é¡µæ–‡ä»¶å­˜æ”¾åœ¨ public ç›®å½•ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å°† public ç›®å½•åˆå§‹åŒ–ä¸ºæœ¬åœ°ä»“åº“ï¼Œå¹¶å…³è”æˆ‘ä»¬çš„ Github è¿œç¨‹ä»“åº“æ¥æ¨é€æˆ‘ä»¬çš„ç½‘é¡µé™æ€æ–‡ä»¶ã€‚\ncd public git init git add . git branch -M main # å¥½åƒç°åœ¨å®˜æ–¹é»˜è®¤æ˜¯mainåˆ†æ”¯ git commit -m \u0026#34;åšå®¢ç¬¬ä¸€æ¬¡æäº¤\u0026#34; æäº¤åˆ°æœ¬åœ°ä»“åº“åï¼Œå°±å¯ä»¥å¼€å§‹æ¨é€åˆ° Github è¿œç¨‹ä»“åº“äº†ï¼›åœ¨æ­¤ä¹‹å‰è¦å…ˆè¿›è¡Œä¸€äº›è®¾ç½®ï¼š\næ·»åŠ å¯†é’¥ è¿™ä¸ªå¯†é’¥æ˜¯ç”¨æ¥å®‰å…¨è¿æ¥ Github è¿œç¨‹ä»“åº“çš„ï¼Œä½¿ç”¨ Https æ–¹å¼è¿æ¥å¯èƒ½ä¼šå‡ºç°å„ç§é—®é¢˜ï¼Œè¾“å…¥ä¸‹é¢å‘½ä»¤ç”Ÿæˆå¯†é’¥ï¼Œç„¶åæŒ‰ä¸‹å‡ æ¬¡å›è½¦å³å¯ï¼š\nssh-keygen -t ed25519 -C \u0026#34;ä½ çš„Githubé‚®ç®±\u0026#34; ç”Ÿæˆå®Œæ¯•åè¾“å…¥ cat ~/.ssh/id_ed25519.pub æŸ¥çœ‹å…¬é’¥å†…å®¹ï¼š\nå¤åˆ¶å±•ç¤ºå‡ºæ¥çš„å…¬é’¥ï¼Œç„¶åæ‰“å¼€ Github ç‚¹å‡» å³ä¸Šè§’å¤´åƒ - Settings - SSH and GPG keys - New SSH Key æŠŠåˆšæ‰å¤åˆ¶çš„å…¬é’¥ç²˜è´´åˆ° Key ä¸­ï¼Œå‘½åéšæ„ï¼Œç„¶åä¿å­˜ï¼š\nç„¶åå›åˆ° Git Bash æ·»åŠ è¿œç¨‹ä»“åº“\ngit remote add origin git@github.com:username/username.github.io.git # usernameæ¢æˆä½ çš„githubç”¨æˆ·å git push origin main ä¹‹åä¼šæç¤ºä½ æ˜¯å¦å°† github.com æ·»åŠ åˆ°ä¸»æœºåˆ—è¡¨ï¼Œè¾“å…¥ yes å›è½¦å³å¯\næ¨é€å®Œæˆåï¼Œç¨ç­‰å‡ åˆ†é’Ÿå³å¯é€šè¿‡ Github Pages åŸŸå username.github.io æ¥è®¿é—®æˆ‘ä»¬çš„åšå®¢ç«™ç‚¹äº†ã€‚\nç»‘å®šåŸŸå æ¨é€å®Œæ¯•åå°±å¯ä»¥ç»‘å®šè‡ªå·±çš„åŸŸåäº†ï¼Œç»‘å®šåŸŸåå‰ï¼Œå…ˆåˆ°ä½ çš„åŸŸåæœåŠ¡å•†æˆ–è€… DNS æä¾›å•†å¤„æ·»åŠ  CNAME è®°å½•è§£æåˆ° username.github.io ä¹Ÿå°±æ˜¯ä½ çš„ Github Pages ä»“åº“å (æˆ‘è¿™é‡Œæ˜¯ CloudFlare ) ï¼š\nè¿›å…¥ Github Pages ä»“åº“ï¼Œç‚¹å‡» Settings - Pages æ‰¾åˆ° Custom domain è¾“å…¥ä½ è‡ªå·±çš„åŸŸåï¼Œç­‰å¾…éªŒè¯ DNS åå¼€å¯ HTTPS ï¼š\næ€»ç»“ ä»¥ä¸Šå°±æ˜¯ä½¿ç”¨ Hugo ä¸ Github Pages æ­å»ºä¸ªäººåšå®¢çš„ä¸€ä¸ªç®€å•è¿‡ç¨‹ï¼›åç»­è¿˜ä¼šè¿›è¡Œæ›´åŠ è¯¦ç»†çš„è§£è¯»ä¸è¯´æ˜ï¼Œå¸Œæœ›èƒ½å¤Ÿå¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ã€‚\n","date":"2022-05-03T10:50:47+08:00","permalink":"/archives/hugo/","title":"ä½¿ç”¨ Hugo æ­å»ºä¸ªäººåšå®¢åŠéƒ¨ç½²"},{"content":"å‰è¨€ ä»¥å‰ä¸€ç›´ä½¿ç”¨çš„æ˜¯ Hugo+Github+Netlifyï¼›å³ä¸Šä¼ æœ¬åœ°ç½‘ç«™é¡¹ç›®åˆ° Github ç„¶åé€šè¿‡ Netlify è¿›è¡Œè‡ªåŠ¨éƒ¨ç½²ä»¥åŠå‘å¸ƒç½‘ç«™ã€‚ä¸€å¼€å§‹è¿˜å¥½ï¼Œä½†æ˜¯åˆ°åé¢å°±æ„Ÿè§‰æ¯”è¾ƒéº»çƒ¦äº†ï¼›æ¯æ¬¡æ›´æ–°æ–‡ç« æˆ–è€…åæœŸæ–‡ç« æœ‰ä¿®æ”¹çš„è¯å°±éœ€è¦é‡æ–°ä¸Šä¼ éƒ¨ç½²ï¼›æ‰€ä»¥åé¢å°±æ”¹æˆäº† LNMP+Typecho ã€‚è€Œæœ€è¿‘åˆå¼€å§‹æŠ˜è…¾èµ·äº† Caddyï¼Œè™½ç„¶è¯´ Caddy é…ç½®ç®€å•ï¼Œå¼€ç®±å³ç”¨ï¼Œä½†ç°åœ¨ä¸€èˆ¬éƒ½æ˜¯ CaddyV2 ï¼›è€Œç½‘ä¸Šçš„æ•™ç¨‹ä¸é…ç½®å¤§å¤šéƒ½æ˜¯ CaddyV1 æ‰€ä»¥åœ¨è¿™é‡Œè¿›è¡Œä¸€ä¸ªè®°å½•ï¼Œé¿å…ä»¥åè¸©å‘ã€‚\nå®‰è£…åŠé…ç½® å®‰è£…Caddy æˆ‘ä½¿ç”¨çš„æ˜¯ Debian 10 ç³»ç»Ÿ\napt install -y debian-keyring debian-archive-keyring apt-transport-https curl -1sLf \u0026#39;https://dl.cloudsmith.io/public/caddy/stable/gpg.key\u0026#39; | gpg --dearmor -o /usr/share/keyrings/caddy-stable-archive-keyring.gpg curl -1sLf \u0026#39;https://dl.cloudsmith.io/public/caddy/stable/debian.deb.txt\u0026#39; | tee /etc/apt/sources.list.d/caddy-stable.list apt update apt install caddy å®‰è£… PHP+MySQL è¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯ Oneinstack è‡ªåŠ¨å®‰è£…ï¼Œå‚è€ƒï¼šä¸€é”®å®‰è£… LNMP åŠå¼€è®¾ç«™ç‚¹ å®‰è£…æ–¹å¼ä¸é™ï¼Œä»¥è‡ªå·±ä¸ºå‡†ï¼Œæˆ‘åªæ˜¯ä¹ æƒ¯ç”¨ Oneinstack è‡ªåŠ¨å®‰è£…\napt è½¯ä»¶åŒ…å®‰è£…ï¼š\napt update apt install -y php php-fpm mysql(mariadb-server) MySQL æˆ–è€… MariaDB éƒ½è¡Œï¼Œçœ‹ä¸ªäººé€‰æ‹©è¿›è¡Œå®‰è£…ï¼Œä¸¤ä¸ªå·®åˆ«ä¸å¤§ (2022-10-27æ›´æ–° apt è½¯ä»¶åŒ…å®‰è£…)\nCaddy é…ç½® ä¿®æ”¹ Caddyfile é…ç½®ï¼Œæ‹¿ä¸å‡†çš„å¯ä»¥ä¸‹è½½ä¸‹æ¥è¿›è¡Œç¼–è¾‘ï¼Œç„¶åå†ä¸Šä¼ ï¼Œæ–‡ä»¶è·¯å¾„ä¸º /etc/caddy/Caddyfile\nvim /etc/caddy/Caddyfile æˆ‘çš„é…ç½®å¦‚ä¸‹ï¼š\nexample.com { root * /var/www/xx # ç½‘ç«™æ ¹ç›®å½• @key1 { not file path_regexp key1 \u0026#39;(.*)\u0026#39; } rewrite @key1 /index.php{re.key1.1} # Typecho ä¼ªé™æ€ï¼Œå»ºè®®å®‰è£…å®Œç¨‹åºåå†™å…¥ encode gzip # å¼€å¯ gzip handle_errors { rewrite * /{err.status_code}.html file_server } # é”™è¯¯é¡µé¢ php_fastcgi unix//dev/shm/php-cgi.sock # ä½¿ç”¨ unix socket é€šä¿¡ file_server tls mail@example.com # è®¾ç½® TLS } è¿™é‡Œçš„ unix socket è·¯å¾„ä¸º Oneinstack è‡ªåŠ¨å®‰è£…æ–¹å¼çš„è·¯å¾„ï¼Œè‹¥ä½¿ç”¨ apt å®‰è£…æ–¹å¼çš„è¯ä½äº /run/phpx.x/php-fpm.sock ä¼ªé™æ€å¯ä»¥åœ¨ç½‘ä¸ŠæŸ¥æ‰¾å¯¹åº”ç¨‹åºçš„ä¼ªé™æ€è§„åˆ™ï¼Œç„¶åé€šè¿‡ ä¼ªé™æ€è½¬æ¢å·¥å…· è¿›è¡Œè½¬æ¢ï¼Œä¼ªé™æ€è§„åˆ™å»ºè®®ç­‰ä¸Šä¼ å¹¶å®‰è£…å®Œç¨‹åºåå†å†™å…¥åˆ°é…ç½®ä¸­\né…ç½®å®Œæˆåä½¿ç”¨ caddy adapt å‘½ä»¤è¿›è¡Œæ£€æŸ¥ï¼š\ncaddy adapt --config /etc/caddy/Caddyfile ç¡®è®¤æ— æŠ¥é”™åï¼Œé‡è½½ Caddyfile ï¼š\ncaddy reload --config /etc/caddy/Caddyfile é‡å¯ Caddy å¹¶æ·»åŠ è‡ªå¯åŠ¨\nsystemctl restart caddy systemctl enable caddy å†™åœ¨æœ€å Caddy ä½œä¸º Golang ç¼–å†™çš„ç¨‹åºï¼Œç®€å•æ˜“ç”¨ï¼Œä½†æ˜¯æ€§èƒ½æ–¹é¢æ˜¯ç¨è½åäº Nginx çš„ï¼Œä½†æ˜¯å¯¹äºå°ç«™æ¥è¯´ï¼Œè¿™ä¸€ç‚¹ç‚¹çš„å·®è·æ˜¯å¯ä»¥å¿½ç•¥ä¸è®¡çš„ã€‚\nPHP å’Œ MySQL å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½æ¥å®‰è£…ï¼Œæˆ–è€…é€‰æ‹© Mariadbã€SQLite ç­‰ç­‰éƒ½æ˜¯å¯ä»¥çš„ã€‚\n","date":"2022-03-05T17:14:41+08:00","permalink":"/archives/lcmp/","title":"ä½¿ç”¨ Caddy+MySQL+PHP æ¶è®¾ LCMP"},{"content":"å‰è¨€ LNMPä¸€é”®å®‰è£…åŒ…æ˜¯ä»€ä¹ˆ LNMPä¸€é”®å®‰è£…åŒ…æ˜¯ä¸€ä¸ªç”¨ Linux Shell ç¼–å†™çš„å¯ä»¥ä¸º Linux VPS æˆ–ç‹¬ç«‹ä¸»æœºå®‰è£… LNMP(Nginx/MySQL/PHP)ã€LNMPA(Nginx/MySQL/PHP/Apache)ã€LAMP(Apache/MySQL/PHP) ç”Ÿäº§ç¯å¢ƒçš„ Shell ç¨‹åºã€‚\næˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦å®ƒ? ç¼–è¯‘å®‰è£…éœ€è¦è¾“å…¥å¤§é‡çš„å‘½ä»¤ï¼Œå¦‚æœæ˜¯é…ç½®ç”Ÿäº§ç¯å¢ƒéœ€è¦è€—è´¹å¤§é‡çš„æ—¶é—´ã€‚ ä¸ä¼š Linux çš„ç«™é•¿æˆ– Linux æ–°æ‰‹æƒ³ä½¿ç”¨ Linux ä½œä¸ºç”Ÿäº§ç¯å¢ƒâ€¦â€¦\nå®ƒæœ‰ä»€ä¹ˆä¼˜åŠ¿å’ŒåŠŸèƒ½? æ— éœ€ä¸€ä¸ªä¸€ä¸ªçš„è¾“å…¥å‘½ä»¤ï¼Œæ— éœ€å€¼å®ˆï¼Œç¼–è¯‘å®‰è£…ä¼˜åŒ–ç¼–è¯‘å‚æ•°ï¼Œæé«˜æ€§èƒ½ï¼Œè§£å†³ä¸å¿…è¦çš„è½¯ä»¶é—´ä¾èµ–ï¼Œç‰¹åˆ«é’ˆå¯¹é…ç½®è‡ªåŠ¨ä¼˜åŒ–ã€‚\nå®‰è£…æ•™ç¨‹ è¯´æ˜ LNMP ä¸€é”®å®‰è£…åŒ…å®˜ç½‘ æ³¨æ„äº‹é¡¹\néœ€è¦ 5GB ä»¥ä¸Šå¯ç”¨ç©ºé—´ï¼ŒMySQL 5.7,MariaDB 10 è‡³å°‘ 9GB å‰©ä½™ç©ºé—´, MySQL8.0 æœ€æ–°ç‰ˆè‡³å°‘ 25GB ä»¥ä¸Š.\néœ€è¦ 128MB ä»¥ä¸Šå†…å­˜( 128MB å°å†…å­˜ VPS , Xen éœ€æœ‰ SWAP,OpenVZ è‡³å°‘è¦æœ‰ 128MB ä»¥ä¸Šçš„ vSWAP æˆ–çªå‘å†…å­˜)ï¼Œæ³¨æ„å°å†…å­˜è¯·å‹¿ä½¿ç”¨ 64 ä½ç³»ç»Ÿï¼\nå®‰è£… MySQL 5.6 æˆ– 5.7 åŠ MariaDB 10 å¿…é¡» 1G ä»¥ä¸Šå†…å­˜ï¼Œæ›´é«˜ç‰ˆæœ¬è‡³å°‘è¦ 2G å†…å­˜!ã€‚ å®‰è£… PHP 7 åŠä»¥ä¸Šç‰ˆæœ¬å¿…é¡» 1G ä»¥ä¸Šå†…å­˜!ã€‚\nä¸è¦åœ¨éå¸¸æ–°çš„ Linux å‘è¡Œç‰ˆä¸Šå®‰è£…æ—§çš„ PHP/MySQL ç‰ˆæœ¬ï¼ŒåŒç†ä¸è¦åœ¨æ—§çš„ Linux å‘è¡Œç‰ˆä¸Šå®‰è£…éå¸¸æ–°çš„PHP/MySQL ç‰ˆæœ¬ã€‚\nCentOS 6ã€8 è¯·ç”¨ lnmp 1.9+ ç‰ˆæœ¬è¿›è¡Œå®‰è£…ï¼\nUbuntu 18+,Debian 9+,Mint 19+,Deepin 15.7+ åŠæ‰€æœ‰æ–°çš„ Linux å‘è¡Œç‰ˆåªèƒ½ä½¿ç”¨ 1.7+ è¿›è¡Œå®‰è£…ï¼\nPHP 7.1.* ä»¥ä¸‹ç‰ˆæœ¬ä¸æ”¯æŒ Ubuntu 19+ã€Debian 10+ ç­‰ç­‰éå¸¸æ–°çš„ Linux å‘è¡Œç‰ˆï¼\né˜¿é‡Œäº‘ Ubuntu 14.04 ç³»ç»Ÿæ¨¡ç‰ˆæœ‰é—®é¢˜ä¸è¦ç”¨ï¼ï¼ï¼\nPHP 7.4 å‡çº§æˆ–å®‰è£…å¿…é¡» CentOS 7+,Debian 8+,Ubuntu 16.04+ ä¸”å¿…é¡»ä½¿ç”¨ 1.7+ ï¼ï¼ï¼\nMySQL 8.0.23 ä»¥ä¸‹ç‰ˆæœ¬å‡çº§æˆ–å®‰è£…å¿…é¡» CentOS 8+,Debian 9+,Ubuntu 16.04+ ä¸”å¿…é¡»ä½¿ç”¨ 1.7+ ï¼ï¼ï¼\nMySQL 8.0.24 ä»¥ä¸Šç‰ˆæœ¬å‡çº§æˆ–å®‰è£…å¿…é¡» Debian 11+,Ubuntu 20.04+,Fedora 33+ ä¸”å¿…é¡»ä½¿ç”¨ 1.8+ ï¼ï¼ï¼\nå®‰è£…æ­¥éª¤ ä½¿ç”¨ SSH å·¥å…·ç™»å½• VPS æˆ–æœåŠ¡å™¨ ä¸ºé˜²æ­¢æœ¬åœ°ç½‘ç»œå˜åŒ–ç­‰ä¸ç¡®å®šå› ç´ å¯¼è‡´å®‰è£…ç»ˆæ­¢ï¼Œå…ˆé”®å…¥å‘½ä»¤åˆ›å»ºä¸€ä¸ªä½œä¸šçª—å£ï¼š\nscreen -S lnmp å¦‚æœæç¤º screen: command not found å‘½ä»¤ä¸å­˜åœ¨å¯ä»¥æ‰§è¡Œï¼š yum install screen æˆ– apt-get install screen å®‰è£…\nä¸‹è½½å¹¶å®‰è£… LNMP ä¸€é”®å®‰è£…åŒ… wget http://soft.vpser.net/lnmp/lnmp1.9.tar.gz -cO lnmp1.9.tar.gz \u0026amp;\u0026amp; tar zxf lnmp1.9.tar.gz \u0026amp;\u0026amp; cd lnmp1.9 \u0026amp;\u0026amp; ./install.sh lnmp å¦‚éœ€è¦å®‰è£… LNMPA æˆ– LAMP ï¼Œå°† ./install.sh åé¢çš„å‚æ•° lnmp æ›¿æ¢ä¸º lnmpa æˆ– lamp å³å¯ã€‚åŒæ—¶ä¹Ÿæ”¯æŒå•ç‹¬å®‰è£… Nginx æˆ–æ•°æ®åº“ï¼Œå‘½ä»¤ä¸º ./install.sh nginx æˆ– ./install.sh db å¦‚éœ€æ›´æ”¹ç½‘ç«™å’Œæ•°æ®åº“ç›®å½•ã€è‡ªå®šä¹‰ Nginx å‚æ•°ã€ PHP å‚æ•°æ¨¡å—æ˜¯å¦å®‰è£…ã€å¼€å¯ lua ç­‰éœ€åœ¨è¿è¡Œ ./install.sh å‘½ä»¤å‰ä¿®æ”¹å®‰è£…åŒ…ç›®å½•ä¸‹çš„ lnmp.conf æ–‡ä»¶ï¼Œè¯¦ç»†å¯ä»¥æŸ¥çœ‹ lnmp.conf æ–‡ä»¶å‚æ•°è¯´æ˜ã€‚\nå®‰è£…æ­¥éª¤ è¿è¡Œä¸Šè¿°å‘½ä»¤åå³å¯å¼€å§‹å®‰è£…ï¼Œç›®å‰æä¾›äº†è¾ƒå¤šçš„ MySQLã€MariaDB ç‰ˆæœ¬å’Œä¸å®‰è£…æ•°æ®åº“çš„é€‰é¡¹ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ MySQL 5.6,5.7 åŠ MariaDB 10 å¿…é¡»åœ¨ 1G ä»¥ä¸Šå†…å­˜çš„æ›´é«˜é…ç½®ä¸Šæ‰èƒ½é€‰æ‹©ï¼\nè¾“å…¥å¯¹åº” MySQL æˆ– MariaDB ç‰ˆæœ¬å‰é¢çš„åºå·ï¼Œå›è½¦è¿›å…¥ä¸‹ä¸€æ­¥ï¼š\nå¦‚æœé€‰æ‹© MySQL 5.7ã€8.0 ä¸”æ˜¯ x86 æˆ– x86_64 æ¶æ„ä¼šæç¤ºï¼š Using Generic Binaries [y/n] è¿™ä¸€æ­¥æ˜¯æç¤ºæ˜¯å¦ä½¿ç”¨äºŒè¿›åˆ¶å®‰è£…ï¼Œè¾“å…¥ y ä¸ºä½¿ç”¨äºŒè¿›åˆ¶å®‰è£…ï¼Œè¾“å…¥ n ä¸ºä½¿ç”¨æºç ç¼–è¯‘å®‰è£…ã€‚\nè®¾ç½® MySQL çš„ root å¯†ç ï¼ˆç›´æ¥å›è½¦å°†ä¼šè®¾ç½®ä¸º lnmp.org#éšæœºæ•°å­—ï¼‰å¦‚æœè¾“å…¥æœ‰é”™è¯¯éœ€è¦åˆ é™¤æ—¶ï¼Œå¯ä»¥æŒ‰ä½ Ctrl å†æŒ‰ Backspace é”®è¿›è¡Œåˆ é™¤(ä¸ªåˆ«æƒ…å†µä¸‹æ˜¯åªéœ€æŒ‰ Backspace é”®)ã€‚è¾“å…¥åå›è½¦è¿›å…¥ä¸‹ä¸€æ­¥ï¼Œå¦‚å›¾ï¼š\nè¯¢é—®æ˜¯å¦éœ€è¦å¯ç”¨ MySQL InnoDBï¼ŒInnoDB å¼•æ“é»˜è®¤ä¸ºå¼€å¯ï¼Œä¸€èˆ¬å»ºè®®å¼€å¯ï¼Œç›´æ¥å›è½¦æˆ–è¾“å…¥ y ï¼Œå¦‚æœç¡®å®šç¡®å®ä¸éœ€è¦è¯¥å¼•æ“å¯ä»¥è¾“å…¥ n\nè¾“å…¥è¦é€‰æ‹©çš„ PHP ç‰ˆæœ¬çš„åºå·ï¼Œå›è½¦è¿›å…¥ä¸‹ä¸€æ­¥ï¼Œæ³¨æ„ï¼šé€‰æ‹© PHP 7+ ç‰ˆæœ¬æ—¶éœ€è¦è‡ªè¡Œç¡®è®¤ PHP ç‰ˆæœ¬æ˜¯å¦ä¸è‡ªå·±çš„ç¨‹åºå…¼å®¹ï¼š\né€‰æ‹©æ˜¯å¦å®‰è£…å†…å­˜ä¼˜åŒ–ï¼šå¯ä»¥é€‰æ‹©ä¸å®‰è£…ã€ Jemalloc æˆ– TCmalloc ï¼Œè¾“å…¥å¯¹åº”åºå·å›è½¦ï¼Œç›´æ¥å›è½¦ä¸ºé»˜è®¤ä¸ºä¸å®‰è£…ã€‚\nè¿›è¡Œå®Œä¸Šè¿°æ“ä½œåï¼Œä¼šæç¤º Press any key to install...or Press Ctrl+c to cancel ï¼ŒæŒ‰å›è½¦é”®ç¡®è®¤å¼€å§‹å®‰è£…ï¼›LNMP è„šæœ¬å°±ä¼šè‡ªåŠ¨å®‰è£…ç¼–è¯‘ Nginxã€MySQLã€PHPã€phpMyAdmin ç­‰è½¯ä»¶åŠç›¸å…³çš„ç»„ä»¶ã€‚\nå®‰è£…æ—¶é—´å¯èƒ½ä¼šå‡ ååˆ†é’Ÿåˆ°å‡ ä¸ªå°æ—¶ä¸ç­‰ï¼Œä¸»è¦æ˜¯æœºå™¨çš„é…ç½®ç½‘é€Ÿç­‰åŸå› ä¼šé€ æˆå½±å“ã€‚\nLNMP ä¸€é”®å®‰è£…åŒ…ç¼–è¯‘è¿‡ç¨‹éœ€è¦å¤§é‡çš„æ—¶é—´ï¼Œæ‰€ä»¥éœ€è¦è€å¿ƒç­‰å¾…ã€‚å¦‚æœç½‘ç»œæ‰çº¿ï¼Œå¯ä»¥é‡æ–°è¿æ¥ SSHï¼Œå†æ‰§è¡Œ screen -r lnmp å°±ä¼šçœ‹åˆ°ä½ çš„ lnmp å®‰è£…è¿›ç¨‹ï¼›å¦‚æœæ²¡æ¢å¤çª—å£ï¼Œå¯ä»¥è¾“å…¥ screen -ls åˆ—å‡ºçª—å£è¿›ç¨‹ï¼Œç„¶åè¾“å…¥ screen -D -r XX(è¿›ç¨‹ç¼–å·) è¿›è¡Œæ¢å¤ï¼š å®Œæˆå®‰è£… å®Œæˆå®‰è£…åï¼Œä¼šæ˜¾ç¤ºå¦‚ä¸‹ï¼š\n============================== Check install ============================== Checking ... Nginx: OK MySQL: OK PHP: OK PHP-FPM: OK Clean Web Server src directory... Nginxã€MySQLã€PHP éƒ½æ˜¯ runningï¼Œ80å’Œ3306ç«¯å£éƒ½å­˜åœ¨ï¼Œå¹¶æç¤ºå®‰è£…ä½¿ç”¨çš„æ—¶é—´åŠ Install lnmp V1.9 completed! enjoy it. çš„è¯ï¼Œè¯´æ˜å·²ç»å®‰è£…æˆåŠŸã€‚\nå®‰è£… PHP ç»„ä»¶ å®‰è£…å®Œ LNMP åå¯ä»¥æŒ‰è‡ªå·±çš„éœ€æ±‚å®‰è£… eAcceleratorã€xcacheã€memcachedã€imageMagickã€ionCubeã€redisã€opcacheã€‚è¿™å‡ ä¸ª PHP ç¼“å­˜ã€åŠ é€Ÿç±»çš„æ‰©å±•ä¸ä¸€å®šå¯¹æ¯ä¸ªäººéƒ½èƒ½ç”¨ï¼Œè‡ªå·±æŒ‰éœ€è¦å®‰è£…ï¼Œä¸ç”¨è£…å¤šä¸ªåŒç±»çš„æ‰©å±•ï¼Œå¯èƒ½ä¼šå¯¼è‡´å‡ºé”™ã€‚\nè¿™äº›æ‰©å±•å’Œç»„ä»¶å‡é‡‡ç”¨ ./addons.sh è¿›è¡Œå®‰è£…ï¼›åŸºæœ¬ç”¨æ³•è¯´æ˜ï¼š\n./addons.sh {install|uninstall} {eaccelerator|xcache|memcached|opcache|redis|imagemagick|ioncube} ä¾‹å¦‚å®‰è£…å¸¸ç”¨çš„ Memcachedã€Redisã€imageMagick å‘½ä»¤å¦‚ä¸‹ï¼š\n./addons.sh install memcached # å®‰è£… Memcached ./addons.sh install redis # å®‰è£… Redis ./addons.sh install imagemagick # å®‰è£… imageMagick ä»¥å®‰è£… Memcached ä¸ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä¸‹ï¼š\nå®‰è£…å®Œæˆæç¤ºï¼š\nStarting Memcached... Starting memcached: done ====== Memcached install completed ====== Memcached installed successfully, enjoy it! ç½‘ç«™ç®¡ç† æ·»åŠ /åˆ é™¤ç½‘ç«™(è™šæ‹Ÿä¸»æœº) è™šæ‹Ÿä¸»æœºç®¡ç†åŸºæœ¬å‘½ä»¤ä»‹ç»ï¼š\nlnmp vhost add # æ·»åŠ ç½‘ç«™ lnmp vhost list # ç½‘ç«™åˆ—è¡¨ lnmp vhost del # åˆ é™¤ç½‘ç«™ æ‰§è¡Œï¼šlnmp vhost add å¹¶æŒ‰ç…§ä¸‹é¢æ“ä½œæ·»åŠ ç½‘ç«™ï¼ˆç‚¹å‡»æ”¾å¤§ï¼‰ï¼š\næœ€åæŒ‰ä¸‹ä»»æ„é”®ï¼Œå³å¯å¼€å§‹æ·»åŠ ç½‘ç«™äº†ï¼Œæ·»åŠ å®Œæˆåæç¤ºå¦‚ä¸‹ï¼š\nç½‘ç«™æ¶è®¾å®Œæˆ\nä¸Šä¼ ç¨‹åº ç›´æ¥ä½¿ç”¨ SFTP è½¯ä»¶ç™»é™† root è´¦æˆ·è¿›è¡Œä¸Šä¼ ï¼Œä¸Šä¼ å®Œæˆåè®¾ç½®ç›¸å…³æƒé™å³å¯ã€‚\nä¸Šä¼ ç½‘ç«™åå»ºè®®æ‰§è¡Œï¼šchown www:www -R /path/to/dir å¯¹ç½‘ç«™ç›®å½•è¿›è¡Œæƒé™è®¾ç½®ï¼Œ/path/to/dir æ›¿æ¢ä¸ºä½ ç½‘ç«™ç›®å½•ã€‚\nå¦‚æœéœ€è¦å•ç‹¬çš„ FTP è´¦æˆ·è¿›è¡Œä¸Šä¼ ï¼Œé‚£ä¹ˆå°±å®‰è£… FTP æœåŠ¡å™¨ï¼Œå¹¶åˆ›å»º FTP ç”¨æˆ·è¿›è¡Œä¸Šä¼ \nå®‰è£… pureftpd è¿›å…¥ LNMP è§£å‹ç¼©åçš„æ–‡ä»¶å¤¹ï¼Œè¾“å…¥ ./pureftpd.sh ä¼šæç¤ºæŒ‰ä»»æ„é”®å®‰è£…ï¼š\næŒ‰ä¸‹ä»»æ„é”®ï¼Œç­‰å¾…å®‰è£…å®Œæˆï¼Œå‡ºç°å¦‚ä¸‹æç¤ºï¼š\nFTPå‘½ä»¤ lnmp ftp add # æ·»åŠ FTPç”¨æˆ· lnmp ftp del # åˆ é™¤FTPç”¨æˆ· lnmp ftp edit # ç¼–è¾‘FTPç”¨æˆ· æ€»ç»“ LNMP ä¸€é”®å®‰è£…åŒ…å’Œ Oneinstackä¹‹é—´å¤§å·®ä¸å·®ï¼Œåªæ˜¯ä¸€äº›ç»†èŠ‚ä¹‹é—´çš„ä¸åŒï¼›å¯ä»¥æŒ‰ç…§è‡ªå·±çš„å–œå¥½è¿›è¡Œé€‰æ‹©ï¼Œä½†å®ƒä»¬éƒ½æ›´é€‚åˆæœ‰ä¸€å®š Linux ä½¿ç”¨åŸºç¡€çš„äººï¼Œæ–°æ‰‹çš„è¯è¿˜æ˜¯æ›´å»ºè®®ä½¿ç”¨å¯è§†åŒ–é¢æ¿ã€‚\næœ€åè´´ä¸Š LNMP ä¸€é”®å®‰è£…åŒ…è¯¦ç»†çš„ä½¿ç”¨è¯´æ˜ï¼šLNMP ä¸€é”®å®‰è£…åŒ…å¸¸è§é—®é¢˜ ","date":"2022-02-25T17:14:41+08:00","permalink":"/archives/lnmporg/","title":"LNMP ä¸€é”®å®‰è£…åŒ…å¼€è®¾ç½‘ç«™"},{"content":"å‰è¨€ ä»€ä¹ˆæ˜¯ LNMP LNMPä»£è¡¨çš„å°±æ˜¯ï¼šLinux ç³»ç»Ÿä¸‹ Nginx+MySQL+PHP è¿™ç§ç½‘ç«™æœåŠ¡å™¨æ¶æ„ã€‚ Linux æ˜¯ä¸€ç±» Unix è®¡ç®—æœºæ“ä½œç³»ç»Ÿçš„ç»Ÿç§°ï¼Œæ˜¯ç›®å‰æœ€æµè¡Œçš„å…è´¹æ“ä½œç³»ç»Ÿã€‚ä»£è¡¨ç‰ˆæœ¬æœ‰ï¼šdebianã€centosã€ubuntuã€fedoraã€gentoo ç­‰ã€‚ Nginx æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ HTTP å’Œåå‘ä»£ç†æœåŠ¡å™¨ï¼Œä¹Ÿæ˜¯ä¸€ä¸ª IMAP/POP3/SMTP ä»£ç†æœåŠ¡å™¨ã€‚ Mysql æ˜¯ä¸€ä¸ªå°å‹å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿã€‚ PHP æ˜¯ä¸€ç§åœ¨æœåŠ¡å™¨ç«¯æ‰§è¡Œçš„åµŒå…¥ HTML æ–‡æ¡£çš„è„šæœ¬è¯­è¨€ã€‚ è¿™å››ç§è½¯ä»¶å‡ä¸ºå…è´¹å¼€æºè½¯ä»¶ï¼Œç»„åˆåˆ°ä¸€èµ·ï¼Œæˆä¸ºä¸€ä¸ªå…è´¹ã€é«˜æ•ˆã€æ‰©å±•æ€§å¼ºçš„ç½‘ç«™æœåŠ¡ç³»ç»Ÿã€‚\nå®‰è£… Oneinstack å®˜ç½‘ OneinStackåŒ…å«ä»¥ä¸‹ç»„åˆï¼š\nlnmpï¼ˆLinux + Nginx+ MySQL/MongoDB+ PHPï¼‰ lampï¼ˆLinux + Apache+ MySQL/MongoDB+ PHPï¼‰ lnmpaï¼ˆLinux + Nginx+ MySQL/MongoDB+ PHP+ Apacheï¼‰ï¼šNginx å¤„ç†é™æ€ï¼ŒApache å¤„ç†åŠ¨æ€ PHP lnmtï¼ˆLinux + Nginx+ MySQL/MongoDB+ Tomcatï¼‰ï¼šNginx å¤„ç†é™æ€ï¼ŒTomcatï¼ˆJDKï¼‰å¤„ç† JAVA lnppï¼ˆLinux + Nginx+ PostgreSQL+ PHPï¼‰ lappï¼ˆLinux + Apache+ PostgreSQL+ PHPï¼‰ lnmhï¼ˆLinux + Nginx+ MySQL+ HHVMï¼‰ å®‰è£…è¯´æ˜ ç‚¹å‡»é“¾æ¥è¿›å…¥ OneinStack å®˜ç½‘ï¼Œç‚¹å‡»è‡ªåŠ¨å®‰è£…ï¼›ç„¶åé€‰æ‹©è‡ªå·±æ‰€éœ€è¦çš„ç»„åˆï¼Œå¹¶è§†æƒ…å†µé€‰æ‹©ç»„ä»¶ï¼Œç„¶åå°±ä¼šç”Ÿæˆç›¸åº”çš„ä¸€é”®å®‰è£…å‘½ä»¤ï¼š\nä¸ºé˜²æ­¢æœ¬åœ°ç½‘ç»œå˜åŒ–ç­‰ä¸ç¡®å®šå› ç´ å¯¼è‡´å®‰è£…ç»ˆæ­¢ï¼Œå…ˆé”®å…¥å‘½ä»¤åˆ›å»ºä¸€ä¸ªä½œä¸šçª—å£ï¼š\nscreen -S lnmp è‹¥æŠ¥é”™å…ˆå®‰è£… screen ï¼š\napt-get install -y screen ç„¶åå¤åˆ¶ OneinStack ä¸€é”®å®‰è£…å‘½ä»¤ç²˜è´´è‡³ç»ˆç«¯ï¼Œæ¥ä¸‹æ¥å°±æ˜¯è€å¿ƒç­‰å¾…ï¼Œå®‰è£…æ—¶é—´è§†ä½ æ‰€é€‰ç»„ä»¶çš„å¤šå°‘ä»¥åŠæœåŠ¡å™¨é…ç½®è€Œå®šã€‚\nå®‰è£…å®Œæˆåæç¤ºå®‰è£…æ—¶é•¿å’Œç»„ä»¶è·¯å¾„ï¼š\n####################Congratulations######################## Total OneinStack Install Time: 28 minutes Nginx install dir: /usr/local/nginx Database install dir: /usr/local/mysql Database data dir: /data/mysql Database user: root Database password: oneinstack PHP install dir: /usr/local/php Opcache Control Panel URL: http://192.168.0.160/ocp.php Pure-FTPd install dir: /usr/local/pureftpd Create FTP virtual script: ./pureftpd_vhost.sh phpMyAdmin dir: /data/wwwroot/default/phpMyAdmin phpMyAdmin Control Panel URL: http://192.168.0.160/phpMyAdmin redis install dir: /usr/local/redis memcached install dir: /usr/local/memcached Index URL: http://192.168.0.160/ æ­¤æ—¶é”®å…¥ reboot å‘½ä»¤ï¼Œé‡å¯ VPSã€‚\nè‡³æ­¤ LNMP ç¯å¢ƒå®‰è£…å®Œæˆã€‚\nå¼€è®¾ç«™ç‚¹ å®‰è£…æ£€æŸ¥ é¦–å…ˆæ‰“å¼€æµè§ˆå™¨ï¼Œè¿›å…¥ Oneinstack çš„é»˜è®¤é¦–é¡µï¼Œå³æœåŠ¡å™¨ IP åœ°å€ï¼Œå°±å¯ä»¥çœ‹åˆ°é»˜è®¤é¡µé¢ï¼š\nåˆ°è¿™è¯´æ˜å·²ç»æˆåŠŸæ­å»º Lnmp\nåˆ›å»ºè™šæ‹Ÿä¸»æœº é”®å…¥ä¸‹é¢å‘½ä»¤ï¼Œæ·»åŠ è™šæ‹Ÿä¸»æœºå¹¶ç»‘å®šåŸŸåã€‚\næ³¨æ„åŸŸååº”è¯¥æå‰è§£æè‡³ä½ çš„ä¸»æœºIP\ncd /root/oneinstack/ ./vhost.sh æµç¨‹å¦‚ä¸‹ï¼š\nåˆ›å»ºMySQLæ•°æ®åº“ Oneinstack æä¾› phpMyAdmin åœ¨çº¿ç®¡ç† Mysqlï¼›æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥ ip/phpMyAdmin ç™»å½•åˆ° phpMyAdminï¼š\nç„¶åç‚¹å‡»è´¦æˆ· \u0026gt; æ–°å»ºç”¨æˆ·è´¦æˆ·ï¼Œæ–°å¢æ•°æ®åº“ä¸ç”¨æˆ·ï¼Œå¹¶ç¡®è®¤æ‰§è¡Œï¼š\nåˆ›å»ºå®Œè™šæ‹Ÿä¸»æœºä»¥åŠæ•°æ®åº“åå°±å¯ä»¥ä¸Šä¼ ç¨‹åºå¹¶è¿›è¡Œå®‰è£…äº†\næ‰©å±•é…ç½® æ·»åŠ é™„åŠ ç»„ä»¶ å¦‚æœä¹‹å‰æ²¡æœ‰å®‰è£…ç»„ä»¶ï¼Œåç»­è¡¥å……å®‰è£…ï¼Œç»Ÿä¸€å…¥å£ä¸º ./install.sh ï¼Œè¯¦ç»†å¦‚ä¸‹ï¼š\n####################################################################### # OneinStack for CentOS/RedHat 7+ Debian 9+ and Ubuntu 16+ # # For more information please visit https://oneinstack.com # ####################################################################### version: 2.6 updated date: 2022-09-03 Usage: ./install.sh command ...[parameters].... --help, -h Show this help message, More: https://oneinstack.com/auto --version, -v Show version info --nginx_option [1-3] Install Nginx server version --apache Install Apache --apache_mode_option [1-2] Apache2.4 mode, 1(default): php-fpm, 2: mod_php --apache_mpm_option [1-3] Apache2.4 MPM, 1(default): event, 2: prefork, 3: worker --php_option [1-11] Install PHP version --mphp_ver [53~81] Install another PHP version (PATH: /usr/local/php${mphp_ver}) --mphp_addons Only install another PHP addons --phpcache_option [1-4] Install PHP opcode cache, default: 1 opcache --php_extensions [ext name] Install PHP extensions, include zendguardloader,ioncube, sourceguardian,imagick,gmagick,fileinfo,imap,ldap,calendar,phalcon, yaf,yar,redis,memcached,memcache,mongodb,swoole,xdebug --nodejs Install Nodejs --tomcat_option [1-4] Install Tomcat version --jdk_option [1-2] Install JDK version --db_option [1-14] Install DB version --dbinstallmethod [1-2] DB install method, default: 1 binary install --dbrootpwd [password] DB super password --pureftpd Install Pure-Ftpd --redis Install Redis --memcached Install Memcached --phpmyadmin Install phpMyAdmin --python Install Python (PATH: /usr/local/python) --ssh_port [No.] SSH port --iptables Enable iptables --reboot Restart the server after installation å¦‚ä¹‹å‰æ²¡æœ‰å®‰è£… php redis ä»¥åŠ imagick æ‰©å±•ï¼Œè¡¥å……å®‰è£…å‘½ä»¤ï¼š ./install.sh --php_extensions redis,imagick\nåˆ é™¤è™šæ‹Ÿä¸»æœº cd /root/oneinstack ./vhost.sh --del ç®¡ç† FTP è´¦å· cd /root/oneinstack ./pureftpd_vhost.sh å¤‡ä»½ç®¡ç† cd /root/oneinstack ./backup_setup.sh æ€»ç»“ Oneinstack æ˜¯å›½å†…ä¼˜ç§€çš„ LNMP å’Œ LAMP ç”Ÿäº§ç¯å¢ƒçš„ Shell ç¨‹åºï¼ŒOneinstack æœ€å¤§çš„é—®é¢˜å°±æ˜¯éœ€è¦æ‡‚å¾—ä¸€ç‚¹Linux çŸ¥è¯†ï¼ŒOneinstack è‡ªå¸¦äº†å¾ˆå¤šå¸¸ç”¨çš„é™æ€è§„åˆ™ï¼Œä½†ç¢°åˆ°ä¸€äº›éœ€è¦è‡ªå®šä¹‰çš„è§„åˆ™æ—¶å°±éº»çƒ¦äº†ã€‚\næœ€åè´´ä¸Šä¸€äº›åŸºæœ¬ä½¿ç”¨æ‰‹å†Œï¼š OneinstackåŸºæœ¬ä½¿ç”¨æ‰‹å†Œ ","date":"2022-02-23T17:14:41+08:00","permalink":"/archives/oneinstack/","title":"Oneinstack ä¸€é”®å®‰è£… LNMP åŠå¼€è®¾ç«™ç‚¹"},{"content":"å‰è¨€ CaddyæœåŠ¡å™¨ï¼ˆæˆ–ç§° Caddy Webï¼‰æ˜¯ä¸€ä¸ªå¼€æºçš„ï¼Œä½¿ç”¨ Golang ç¼–å†™ï¼Œæ”¯æŒ HTTP/2 çš„ Web æœåŠ¡ç«¯ï¼Œå®ƒä½¿ç”¨ Golang æ ‡å‡†åº“æä¾› HTTP åŠŸèƒ½ã€‚Caddy ä¸€ä¸ªæ˜¾è‘—çš„ç‰¹æ€§æ˜¯é»˜è®¤å¯ç”¨ HTTPSï¼Œå®ƒæ˜¯ç¬¬ä¸€ä¸ªæ— éœ€é¢å¤–é…ç½®å³å¯æä¾› HTTPS ç‰¹æ€§çš„ Web æœåŠ¡å™¨ã€‚Caddy å¯ä»¥æä¾›å„ç§ç½‘ç«™æŠ€æœ¯ï¼Œå®ƒä¹Ÿå¯ä»¥ä½œä¸ºåå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡å™¨ã€‚Caddy çš„å¤§éƒ¨åˆ†åŠŸèƒ½éƒ½ä»¥ä¸­é—´ä»¶çš„å½¢å¼å®ç°ï¼Œå¹¶é€šè¿‡ Caddyfile ä¸­çš„æŒ‡ä»¤ï¼ˆç”¨äºé…ç½® Caddy çš„æ–‡æœ¬æ–‡ä»¶ï¼‰è¿›è¡Œæ§åˆ¶ã€‚\nç®€å•æ¥è¯´å°±æ˜¯å¼€ç®±å³ç”¨\nCaddy å®˜ç½‘ å®‰è£… æ‰“å¼€ Caddy å®˜ç½‘ï¼Œç‚¹å‡»ä¸‹è½½æºæ–‡ä»¶ï¼Œæˆ–è€…æŒ‰ç…§å®˜æ–¹æ•™ç¨‹ä¸­çš„å®‰è£…æ–¹å¼è¿›è¡Œå®‰è£…ï¼Œæˆ‘æœåŠ¡å™¨æ˜¯ Debianï¼Œå°±ä½¿ç”¨å‘½ä»¤è¡Œè¿›è¡Œå®‰è£…ï¼š\napt install -y debian-keyring debian-archive-keyring apt-transport-https curl -1sLf \u0026#39;https://dl.cloudsmith.io/public/caddy/stable/gpg.key\u0026#39; | gpg --dearmor -o /usr/share/keyrings/caddy-stable-archive-keyring.gpg curl -1sLf \u0026#39;https://dl.cloudsmith.io/public/caddy/stable/debian.deb.txt\u0026#39; | tee /etc/apt/sources.list.d/caddy-stable.list apt update apt install caddy å®‰è£…å®Œæˆåå¯è¾“å…¥ caddy version æˆ–è€… which caddy çœ‹æ˜¯å¦å®‰è£…æˆåŠŸã€‚\næ³¨æ„ï¼šè¿™é‡Œé»˜è®¤å®‰è£…çš„æ˜¯ Caddy2\né…ç½® å®‰è£…å®Œæˆååœ¨æµè§ˆå™¨è¾“å…¥æœåŠ¡å™¨ IP å°±å¯ä»¥çœ‹åˆ° Caddy å·²ç»å¼€å§‹è¿è¡Œäº†ï¼Œå¹¶ä¸”ç”Ÿæˆäº†ä¸€ä¸ªé»˜è®¤é¡µé¢ï¼š\nè¿™ä¸ªæ—¶å€™æˆ‘ä»¬åˆ›å»ºå¥½ç½‘ç«™ç›®å½•ï¼š\nmkdir -p /var/www/xx ç„¶åæˆ‘ä»¬å¯ä»¥å¯¹ Caddy è¿›è¡Œé…ç½®äº†ï¼Œç”¨ vim å‘½ä»¤å¯¹é…ç½®æ–‡ä»¶è¿›è¡Œç¼–è¾‘ï¼Œæ‹¿ä¸å‡†çš„å¯ä»¥ä¸‹è½½ä¸‹æ¥ç¼–è¾‘æ–‡ä»¶è·¯å¾„ä¸º /etc/caddy/Caddyfile\nvim /etc/caddy/Caddyfile Caddy çš„é…ç½®æ¯”è¾ƒç®€å•ï¼Œç¬¬ä¸€è¡Œè¾“å…¥ç»‘å®šå¥½çš„åŸŸåï¼Œè¿™æ ·å°±ä¼šè‡ªåŠ¨å¼€å¯80å’Œ443ç«¯å£ï¼š\nxx.com ç„¶åæ˜¯ç½‘ç«™æ ¹ç›®å½•è®¾ç½®ï¼š\nxx.com { root * /var/www/xx } è¿™æ ·ä¸€ä¸ªç®€å•çš„ç«™ç‚¹å°±å·²ç»é…ç½®å®Œæˆäº†ï¼Œç„¶åæ·»åŠ ä¸€äº›è‡ªå·±éœ€è¦çš„åŠŸèƒ½ï¼Œå¹¶ä¸”å¼€å¯é™æ€æ–‡ä»¶æµè§ˆï¼š\nxx.com { root * /var/www/xx encode gzip file_server tls XX@email.com } å¦‚æœè¦å¼€è®¾å¤šä¸ªç«™ç‚¹ï¼Œé‚£ä¹ˆç›´æ¥å¦èµ·ä¸€è¡Œï¼Œè¿›è¡Œå…¶ä»–ç«™ç‚¹çš„é…ç½®å°±è¡Œäº†ï¼š\nxx.com { root * /var/www/xx encode gzip file_server tls XX@email.com } www.xx.com { root * /var/www/yy tls xx@email.com } æˆ–è€…å°†å­åŸŸåé‡å®šå‘åˆ°ä¸»åŸŸåï¼š\nxx.com { root * /var/www/xx encode gzip file_server tls XX@email.com } www.xx.com { redir https://xx.com{uri} } æˆ‘çš„è®¾ç½®å‚è€ƒï¼š\n# åŸŸå domain.com { # è®¾ç½®æ—¥å¿—æ–‡ä»¶ä½ç½®ï¼Œç­‰çº§ä¸º error log { output file /var/log/caddy/xx.log level error } # ç½‘ç«™æ ¹ç›®å½• root * /var/www/xx # å¼€å¯ gzip encode gzip # é”™è¯¯é¡µé¢ handle_errors { rewrite * /{err.status_code}.html file_server } # PHP php_fastcgi unix//run/php/php7-fpm.sock # é™æ€æ–‡ä»¶æœåŠ¡ file_server # TLSè®¾ç½® tls xx@email.com } é…ç½®å®Œæˆåè¾“å…¥ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥é…ç½®ï¼š\ncaddy adapt --config /etc/caddy/Caddyfile å¦‚æœªæŠ¥é”™ï¼Œåˆ™è¡¨ç¤ºé…ç½®æ— è¯¯ã€‚\né‡è½½ Caddy é…ç½®ï¼š\ncaddy reload --config /etc/caddy/Caddyfile é‡å¯ Caddy å¹¶æ·»åŠ è‡ªå¯åŠ¨\nsystemctl restart caddy systemctl enable caddy ä¸€äº›åŸºæœ¬çš„ Caddy é…ç½®å°±æ˜¯è¿™ä¹ˆå¤šäº†ï¼Œè¯¦ç»†å†…å®¹å¯ä»¥åˆ°å®˜æ–¹æ–‡æ¡£è¿›è¡ŒæŸ¥é˜…ï¼šCaddy å®˜æ–¹æ–‡æ¡£ ä¸Šä¼ æ–‡ä»¶ æœ€åæˆ‘ä»¬å°†è‡ªå·±çš„é™æ€æ–‡ä»¶é¡µé¢ä¸Šä¼ è‡³ /var/www/xxx ä¹Ÿå°±æ˜¯ä½ çš„ç½‘ç«™æ ¹ç›®å½•ä¸‹å³å¯è¿›è¡Œè®¿é—®å•¦ï¼\n","date":"2022-02-20T16:30:17+08:00","permalink":"/archives/caddy/","title":"ç”¨ Caddy2 æ­å»ºé™æ€é¡µé¢ç«™ç‚¹"},{"content":"å‰è¨€ ç”±äºæœ€è¿‘åœ¨ä½¿ç”¨ VPS æ—¶ï¼Œå‘ç° SSH ä¸€ç›´åœ¨è¢«äººæš´åŠ›æ‰«æï¼Œè™½ç„¶è¯´æ²¡æœ‰è¢«ç ´è§£ï¼Œä½†æ˜¯è€æ˜¯è¢«äººç›¯ç€æ€»æ„Ÿè§‰ä¸å¤ªèˆ’æœã€‚å…¶å®è¦ä¿è¯å®‰å…¨ç™»å½•ï¼Œæœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯ä¿®æ”¹é»˜è®¤çš„ 22 ç«¯å£ï¼›æœ€å½»åº•çš„æ–¹æ³•ï¼Œæ˜¯ç¦ç”¨å¯†ç ç™»å½•ï¼Œæ”¹ç”¨å¯†é’¥ç™»å½•ï¼Œåªè¦ä¿è¯å¯†é’¥å®‰å…¨ï¼ŒæœåŠ¡å™¨ä¹Ÿæ²¡æœ‰äººèƒ½è¿›å…¥äº†ã€‚è€Œä¸”ç°åœ¨æ‰‹ä¸­çš„ VPS è¶Šæ¥è¶Šå¤šï¼Œæ¯æ¬¡éƒ½è¦è¿›è¡Œä¸€äº›åŸºæœ¬é…ç½®ã€‚æ‰€ä»¥å¯¹è¿™äº›é…ç½®è¿›è¡Œä¸€ä¸‹è®°å½•ï¼Œæ–¹ä¾¿ä»¥åæŸ¥çœ‹ã€‚\né…ç½® ä¿®æ”¹ç™»å½•å¯†ç  passwd è¾“å…¥å¯†ç æ˜¯ä¸ä¼šæ˜¾ç¤ºçš„ï¼ŒæŒ‰ç…§æç¤ºè¾“å…¥æ–°å¯†ç å›è½¦ä¸¤æ¬¡å³å¯\næ›´æ–°ã€å®‰è£…åŸºæœ¬è½¯ä»¶ apt update \u0026amp;\u0026amp; apt full-upgrade -y \u0026amp;\u0026amp; apt autoremove -y \u0026amp;\u0026amp; apt autoclean apt install -y wget curl vim screen ä¿®æ”¹SSHç«¯å£ vim /etc/ssh/sshd_config è¿™é‡Œæˆ‘ä½¿ç”¨ vim ç¼–è¾‘ï¼Œæ‹¿ä¸å‡†å¯ä»¥ç›´æ¥ä¸‹è½½åˆ°æœ¬åœ°ç¼–è¾‘\næ‰¾åˆ°é»˜è®¤ 22 ç«¯å£ï¼Œå°†å…‰æ ‡ç§»åŠ¨åˆ°è¯¥ä½ç½®ï¼Œè¾“å…¥ i è¿›è¡Œç¼–è¾‘ï¼›å»æ‰å‰é¢çš„æ³¨é‡Šï¼Œå¹¶ä¸”æ·»åŠ ä¸€ä¸ªç«¯å£ï¼š\nPort 22 Port 1234 # ä»¥ 1234 ç«¯å£ä¸ºä¾‹ ç¼–è¾‘å®ŒæˆåæŒ‰ä¸‹ ESC ç„¶åè¾“å…¥ :wq ä¿å­˜é€€å‡ºï¼Œå¹¶é‡å¯ ssh æœåŠ¡è¿›ç¨‹ï¼š\nsystemctl restart sshd è®¾ç½®å®Œæ¯•åéœ€è¦å¼€æ”¾æ–°ç«¯å£ï¼Œå¹¶å¼€å¯é˜²ç«å¢™ï¼›å¦‚æœ VPS ç®¡ç†é¢æ¿è‡ªå¸¦é˜²ç«å¢™å¯ä»¥é€šè¿‡ç®¡ç†é¢æ¿å¼€æ”¾ç«¯å£ï¼›æ²¡æœ‰çš„è¯ï¼Œæˆ‘ä¸€èˆ¬ç”¨ ufwï¼š\napt install -y ufw ufw allow 1234 ufw enable å¼€å¯é˜²ç«å¢™åè®°å¾—é€šè¿‡ ufw allow xx å¼€æ”¾å¸¸ç”¨ç«¯å£\nè®¾ç½®å®Œæˆåï¼Œé€šè¿‡æ–°ç«¯å£è¿›è¡Œ SSH ç™»å½•ï¼Œæµ‹è¯•æ˜¯å¦æˆåŠŸï¼Œå¹¶ä¸”å°†é»˜è®¤çš„ç«¯å£å…³é—­ï¼š\nvim /etc/ssh/sshd_config å°†é»˜è®¤ç«¯å£ä¸€è¡Œæ³¨é‡Šæ‰ï¼š\n#Port 22 Port 1234 è®¾ç½®ç§˜é’¥ç™»å½• ä¿®æ”¹ç«¯å£è™½ç„¶å¯ä»¥æå‡å®‰å…¨æ€§ï¼Œä½†æ˜¯è¿˜æ˜¯ä¼šè¢«æ‰«å‡ºç«¯å£ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è®¾ç½®ç§˜é’¥ç™»å½•ï¼Œå¹¶å…³é—­å¯†ç ç™»å½•ã€‚\né€šè¿‡å‘½ä»¤è¡Œç”Ÿæˆå…¬é’¥ä¸ç§é’¥ ssh-keygen -t rsa æç¤ºå¦‚ä¸‹ï¼š\nGenerating public/private rsa key pair. Enter file in which to save the key (/root/.ssh/id_rsa): # è¾“å…¥å­˜å‚¨ä½ç½®ï¼Œå»ºè®®å›è½¦ä½¿ç”¨é»˜è®¤ä½ç½® Enter passphrase (empty for no passphrase): # è¾“å…¥å¯†ç (ç•™ç©ºåˆ™ç›´æ¥å›è½¦) Enter same passphrase again: # é‡å¤è¾“å…¥å¯†ç  Your identification has been saved in /root/.ssh/id_rsa. Your public key has been saved in /root/.ssh/id_rsa.pub. # å…¬é’¥ä¸ç§é’¥å­˜å‚¨ä½ç½® ç”Ÿæˆçš„ç§˜é’¥æ–‡ä»¶ä½äº ~/.ssh ç›®å½•ä¸‹\nä¹Ÿå¯ä»¥é€šè¿‡ XShell æˆ–è€… PuTTy Gen è½¯ä»¶è¿›è¡Œç”Ÿæˆç§˜é’¥æ–‡ä»¶ï¼Œä½†æ˜¯è¦æ³¨æ„å®ƒä»¬ç”Ÿæˆçš„ç§é’¥å¹¶ä¸é€šç”¨ï¼Œéœ€è¦é€šè¿‡ PuTTy Gen è¿›è¡Œè½¬æ¢ã€‚\nä¸Šä¼ /é…ç½®å…¬é’¥æ–‡ä»¶ å¦‚æœæ˜¯ä½¿ç”¨å‘½ä»¤è¡Œåœ¨ VPS ç”Ÿæˆçš„ç§˜é’¥æ–‡ä»¶ï¼Œåˆ™å°†ç§é’¥æ–‡ä»¶ä¸‹è½½å¹¶å¯¼å…¥ SSH è½¯ä»¶å³å¯ã€‚è‹¥æ˜¯è½¯ä»¶ç”Ÿæˆï¼Œåˆ™å°† id_rsa.pub æ–‡ä»¶ä¸Šä¼ è‡³ ~/.ssh ç›®å½•ä¸‹ï¼Œå®Œæˆä¸Šè¿°æ“ä½œåæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š\nmv id_rsa.pub authorized_keys chmod 600 authorized_keys ç„¶åä¿®æ”¹ sshd_config æ‰¾åˆ°å¹¶ä¿®æ”¹æˆä¸‹é¢ä¸ªé…ç½® ï¼š\nPubkeyAuthentication yes ä¿å­˜é€€å‡ºï¼Œå¹¶é‡å¯æœåŠ¡è¿›ç¨‹ï¼š\nsystemctl restart sshd ä½¿ç”¨ SSH è½¯ä»¶æµ‹è¯•æ˜¯å¦å¯ä»¥é€šè¿‡ç§˜é’¥æ–‡ä»¶è¿›è¡Œç™»å½•ã€‚\nç¦æ­¢å¯†ç ç™»å½• ç¡®è®¤å¯ä»¥é€šè¿‡ç§˜é’¥æ–‡ä»¶è¿›è¡Œç™»å½•åï¼Œå°±å¯ä»¥ç¦æ­¢å¯†ç ç™»å½•äº†ï¼Œä¿®æ”¹ etc/ssh/sshd_config æ–‡ä»¶ï¼Œæ‰¾åˆ°å¹¶ä¿®æ”¹æˆå¦‚ä¸‹ï¼š\nPasswordAuthentication no é‡å¯ ssh\nsystemctl restart sshd å¼€å¯åŠ é€ŸæœåŠ¡ å¤åˆ¶ä¸‹é¢å‘½ä»¤ï¼Œç²˜è´´å›è½¦ï¼š\nwget -N --no-check-certificate \u0026#34;https://raw.githubusercontent.com/chiakge/Linux-NetSpeed/master/tcp.sh\u0026#34; chmod +x tcp.sh ./tcp.sh é¢æ¿å¦‚ä¸‹ï¼š\næ“ä½œæ–¹æ³•ï¼šå…ˆå®‰è£…å†…æ ¸ï¼Œé‡å¯ VPS è®©å†…æ ¸ç”Ÿæ•ˆï¼Œå†å¯åŠ¨å¯¹åº”çš„åŠ é€Ÿå³å¯ã€‚æ•°å­— 1 çš„ BBR/BBR é­”æ”¹å†…æ ¸å¯¹åº”æ•°å­— 4ã€5ã€6 çš„ BBR åŠ é€Ÿã€BBR é­”æ”¹åŠ é€Ÿå’Œæš´åŠ› BBR é­”æ”¹ç‰ˆåŠ é€Ÿã€‚æ•°å­— 2 çš„ BBRplus å†…æ ¸å¯¹åº”æ•°å­— 7 çš„ BBRplus åŠ é€Ÿã€‚æ•°å­— 3 çš„é”é€ŸåŠ é€Ÿå†…æ ¸å¯¹åº”æ•°å­— 8 çš„é”é€ŸåŠ é€Ÿã€‚\nå…ˆå®‰è£…å†…æ ¸ï¼Œç­‰å¾…æç¤ºé‡å¯åè¾“å…¥ y è¿›è¡Œé‡å¯ï¼š\nå¦‚æœå®‰è£…å†…æ ¸è¿‡ç¨‹ä¸­ï¼Œå‡ºç°ä»¥ä¸‹æƒ…å†µï¼Œé€‰æ‹©å¦å³å¯ï¼š\né‡å¯å®Œæˆåï¼Œè¾“å…¥ ./tcp.sh è¿›å…¥åŠ é€Ÿé¢æ¿ï¼Œé€‰æ‹©å¯¹åº”å†…æ ¸çš„åŠ é€Ÿå¹¶è¾“å…¥å¯¹åº”æ•°å­—å¼€å¯åŠ é€Ÿã€‚çœ‹åˆ°æç¤ºåŠ é€ŸæˆåŠŸåï¼Œå†æ¬¡è¾“å…¥ ./tcp.sh æ£€æŸ¥æ˜¯å¦æˆåŠŸå¼€å¯\nå¦‚æœæƒ³æ¢ä¸€ä¸ªåŠ é€Ÿï¼Œè¾“å…¥ ./tcp.sh è¿›å…¥é¢æ¿ï¼Œå¹¶è¾“å…¥æ•°å­—9è¿›è¡Œå¸è½½åŠ é€Ÿï¼Œç„¶åè¿›è¡ŒåŒæ ·çš„æ“ä½œï¼Œå®‰è£…å†…æ ¸å†å®‰è£…å¯¹åº”å†…æ ¸çš„åŠ é€Ÿå³å¯ã€‚\nè‡³æ­¤ VPS çš„ä¸€äº›åŸºæœ¬é…ç½®ä¸ä¼˜åŒ–ç»“æŸ\n","date":"2022-02-18T17:14:41+08:00","permalink":"/archives/setvps/","title":"VPS çš„ä¸€äº›åŸºæœ¬é…ç½®åŠä¼˜åŒ–"}]